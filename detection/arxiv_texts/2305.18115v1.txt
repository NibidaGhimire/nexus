arXiv:2305.18115v1  [math.CO]  29 May 2023Clones of pigmented words and realizations
of special classes of monoids
Samuele Giraudo
Université du Québec à Montréal, LACIM,
Pavillon Président-Kennedy, 201 Avenue du Président-Kenn edy, Montréal, H2X 3Y7, Canada.
giraudo.samuele@uqam.ca
Abstract. Clones are generalizations of operads forming powerful ins truments to de-
scribe varieties of algebras wherein repeating variables a re allowed in their relations. They
allow us in this way to realize and study a large range of algeb raic structures. A func-
torial construction from the category of monoids to the cate gory of clones is introduced.
The obtained clones involve words on positive integers wher e letters are pigmented by ele-
ments of a monoid. By considering quotients of these structu res, we construct a complete
hierarchy of clones involving some families of combinatori al objects. This provides clone
realizations of some known and some new special classes of mo noids as among others the
variety of left-regular bands, bounded semilattices, and r egular band monoids.
Contents
1 Introduction · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · 2
2 Clones and realizations of varieties · · · · · · · · · · · · · · · · · · · · · · 4
2.1 Abstract clones · · · · · · · · · · · · · · · · · · · · · · · · · · · 4
2.2 Terms and free clones · · · · · · · · · · · · · · · · · · · · · · · · · 5
2.3 Clone presentations and varieties · · · · · · · · · · · · · · · · · · · · 6
3 Pigmented monoids and clones of pigmented words · · · · · · · · · · · · · · 7
3.1 Pigmented monoids · · · · · · · · · · · · · · · · · · · · · · · · · · 8
3.2 Clone of pigmented words · · · · · · · · · · · · · · · · · · · · · · · 9
3.3 Clone realization · · · · · · · · · · · · · · · · · · · · · · · · · · · 12
4 Construction of quotients · · · · · · · · · · · · · · · · · · · · · · · · · · 15
4.1P-symbols and realizations of quotient clones · · · · · · · · · · · · · · · 15
4.2 Congruences of the clone of pigmented words · · · · · · · · · · · · · · · 17
4.3 Three simple quotients · · · · · · · · · · · · · · · · · · · · · · · · 20
5 A hierarchy of clones · · · · · · · · · · · · · · · · · · · · · · · · · · · · 24
5.1 On pigmented magnets · · · · · · · · · · · · · · · · · · · · · · · · 24
5.2 On pigmented stalactites · · · · · · · · · · · · · · · · · · · · · · · 32
5.3 On pigmented pillars · · · · · · · · · · · · · · · · · · · · · · · · · 35
6 Open questions and future work · · · · · · · · · · · · · · · · · · · · · · · 37
7 References · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · 39
◮Subjects (MSC2020). 05E16, 08B15, 16S15, 18M80, 68R15.
◮Key words and phrases. Realizations of algebraic structures; Varieties of algebr as; Monoids;
Abstract clones; P-symbols.
◮Funding. This research has been partially supported by the projects C ARPLO (ANR-20-CE40-
0007) and LambdaComb (ANR-21-CE48-0017) of the Agence nati onale de la recherche.
◮Date. 2023-05-30 ( compiled on 2023-05-30, 00:53 ).
◮Length. 41pages.1 INTRODUCTION —
1 Introduction
Given a variety of algebras speciﬁed by a set of generating op erations together with relations
between the operations, an important question consists in d eciding if two compound operations
are equivalent. For instance, in the variety of groups, the t wo operations ( x1, x2)/maps⊔o→(x1·x2)−1
and ( x1, x2)/maps⊔o→x−1
2·x−1
1compute always both the same value, where ( x1, x2)/maps⊔o→x1·x2is the
multiplication operation and x1/maps⊔o→x−1
1is the inverse operation of groups. This general question
is known as the word problem and in some cases, term rewrite sy stems [ BN98 ;Bez+03 ] oﬀer
solutions by orienting in a suitable way the relations which deﬁne the variety in order to form a
terminating and conﬂuent rewrite system.
While the word problem is in general undecidable, this inher ent undecidability does not
obstruct the development of tools capable of resolving spec iﬁc instances. Rather than focusing
on ﬁnding the optimal orientation or completion of the relat ions within a variety, an alternative
combinatorial approach involves encoding compound operat ions by using combinatorial objects.
In this context, the functional composition can be interpre ted as a relevant operation on these
objects. Within this framework, operads [ LV12;Mén15 ;Gir18 ] emerge as valuable instruments
to facilitate these abstractions, called operad realizati ons of a variety. An illustrating example
can be found in the realization of the variety of pre-Lie alge bras in terms of rooted trees [ CL01 ]
and grafting operations on such trees. Besides, operads are also great tools to tackling problems
originating from combinatorics. Indeed, by endowing a set o f combinatorial objects with an
operad structure, we obtain a framework for enumerating [ Gir20b ] and generating [ Gir19 ] their
elements. This is based on presentations by generators and r elations of the operads to study and
more precisely on their orientations in order to form, here a gain, terminating and conﬂuent term
rewrite systems.
Despite their broad utility, operads have limitations, par ticularly when dealing with varieties
that are deﬁned through relations with repeating variables . This issue arises for instance in
the variety of groups, lattices, or ﬂexible algebras, where natural descriptions of these varieties
require relations involving repeated inputs. Although it i s feasible to capture a certain part of such
varieties by working with operads in the category of vector s paces on a ﬁeld of zero characteristic
and by considering some tricks to encode relations with repe ating variables by linear combinations
of linear terms (like in the case of the variety of ﬂexible alg ebras [ May72 ]), operads are not the
ideal instrument in this context. Some other devices have be en developed for these purposes.
Examples include abstract clones [ Coh65 ;Tay93 ], Lawvere theories [ Law63 ;Adá+10 ], and monads
with arities [ EM65 ;HP07 ;BMW12 ]. The aim of this work is to create bridges between the theory of
abstract clones —called simply “clones” here henceforth— a nd combinatorics. To our knowledge,
contrary to what operad theory has experienced since its reb irth in the 1990s [ Lod96 ], not many
such connections have been established in the existing lite rature. We have opted to work with
clones rather than with Lawvere theories or monads with arit ies because clones can be perceived
as generalized operads with minor distinctions. Since as pr esented above, the connections between
operads and combinatorics are now very clear and well-estab lished (see also [ CL01 ;Gir15 ;Gir18 ;
Gir20a ]), we anticipate that new signiﬁcant connections between c lones and combinatorics could
be unearthed.
In an initial, humble, and modest ﬁrst step in this direction , we introduce a new combinatorial
recipe to build clones of combinatorial objects. More preci sely, given a monoid M, we construct
a clone P(M) involving M-pigmented words, that are some words of integers whose lett ers are
pigmented by elements of M. The variety of algebras described by P(M), called variety of M-
pigmented monoids, bears similarities to the variety of alg ebras described by the operad T(M),
Clones of pigmented words 2 /41 S. Giraudo1 INTRODUCTION —
where Tis a construction from monoids to operads introduced in [ Gir15 ]. More speciﬁcally, the
variety of M-pigmented algebras has an extra generator (playing the rol e of a unit) and some
relations involving it compared to the variety of algebras d escribed by T(M). For this reason,
the present work can be seen as a continuation and a generaliz ation of [ Gir15 ], but in the context
of clones rather than of operads.
The clone P(M) is rich enough to contain some notable quotients. In order t o construct
quotients of P(M), we consider clone congruences ≡ofP(M) each coming with a P-symbol to
decide whether two M-pigmented words are ≡-equivalent. A P-symbol for a clone congruence
≡is a map sending an M-pigmented word to a representative of its ≡-equivalence class. Such
maps enable us to obtain concrete realizations and presenta tions by generators and relations
of quotients of P(M). The studied quotients of P(M) ﬁt into a diagram of surjective clone
morphisms generalizing some lattices of varieties of speci al classes of monoids (see [ GLV22 ]) and
of semigroups (see [ Eva71 ;SVV09 ;KKP11 ]). In particular, we obtain as main results clone
realizations of commutative monoids, left-regular bands, bounded semilattices, and regular bands.
These clone realizations allow us to solve the word problem i n these varieties by using algorithms
akin to those developed in [ SS82 ;NS00 ] for idempotent semigroups.
This paper is organized as follows. Section 2contains preliminary notions about terms,
clones and free clones, presentations of clones, and variet ies of algebras. In particular, we show
Proposition 2.3.2.A which is an important result to establish presentations of c lones. Next, in
Section 3, we introduce the varieties of M-pigmented monoids and describe the construction P.
By Theorem 3.3.3.B , the main result of this section, we show that P(M) is a clone realization of
the variety of M-pigmented monoids. In Section 4we introduce some tools to investigate quotient
clones of P(M). In particular, we introduce the concept of P-symbol speciﬁc to our context and
its relationships with clone congruences by way of Proposit ions 4.1.1.A ,4.1.1.B , and 4.1.3.A . We
show also with Proposition 4.1.2.A how to obtain a concrete description of a quotient of P(M)
by a congruence ≡admitting a P-symbol P≡. Continuing this, two clone congruences ≡sortand
≡ﬁrst k,k/greaterorequalslant0, are introduced. These congruences as well as some of their compositions are used
to build the quotient clones WInc (M),Arra k(M),k/greaterorequalslant0, and Inck,k/greaterorequalslant0. By Propositions 4.3.1.A ,
4.3.2.A , and 4.3.3.A , we describe presentations of these clones. Finally, Secti on5contains the most
technical results under a combinatorial point of view. Here , we construct three quotients of P(M)
by clone congruences deﬁned by intersecting some of the cong ruences ≡sortand≡ﬁrst k,k/greaterorequalslant0. The
main results contain Theorems 5.1.4.B ,5.2.4.B , and 5.3.4.B describing realizations of these clones,
and Theorems 5.1.5.B ,5.2.5.B , and 5.3.5.B giving presentations for these clones. In particular, we
obtain here a clone realization of the variety of regular ban ds which seems new at the best of our
knowledge. This text ends with a list of open questions and fu ture research directions.
General notations and conventions. For any integers iandj, [i, j] denotes the set {i, i+
1, . . . , j }. For any integer i, [i] denotes the set [1 , i] and/llbracketi] denotes the set [0 , i]. For any set A,A∗
is the set of words on A. For any w∈A∗,ℓ(w) is the length of w, and for any i∈[ℓ(w)],w(i) is
thei-th letter of w. For any a∈A,|w|ais the number of occurrences of ainw. The only word of
length 0 is the empty word ǫ. For any i/lessorequalslantj∈[ℓ(w)],w(i, j) is the word w(i)w(i+1). . . w(j). The
word r( w) is the mirror image w(ℓ(w)). . . w(1) of w. Given two words wandw′, the concatenation
ofwandw′is denoted by ww′or by w.w′.
Clones of pigmented words 3 /41 S. Giraudo2 CLONES AND REALIZATIONS OF VARIETIES —
2 Clones and realizations of varieties
This preliminary section contains the main deﬁnitions and n otions about abstract clones, free
abstract clones, presentations of abstract clones by gener ators and relations, varieties of algebras,
and clone realizations of varieties of algebras.
2.1 Abstract clones
In this part, we set our notations and main notions about abst ract clones. Let us begin with
graded sets.
2.1.1 Graded sets. Agraded set is a set G:=/unionsqtext
n/greaterorequalslant0G(n). For any x∈G, the unique
integer n/greaterorequalslant0 such that x∈G(n) is the arity ofx, denoted by |x|. If for any n/greaterorequalslant0,G(n) is
ﬁnite, then Giscombinatorial . In this case, the sequence of dimensions ofGis the sequence
(#G(n))n/greaterorequalslant0. Let G′be another graded set. A map φ:G→G′is agraded set morphism ifφ
preserves the arities. Besides, if for any n/greaterorequalslant0,G′(n)⊆G(n), then G′is agraded subset ofG.
A binary relation RonGis agraded set binary relation onGifRpreserve the arities. The
quotient ofGby a graded set equivalence relation ≡is the graded set G/≡deﬁned for any n/greaterorequalslant0
byG/≡(n) :={[x]≡:x∈G(n)}where [ x]≡is the ≡-equivalence class of x∈G.
2.1.2 Abstract clones. Abstract clones are devices which can be used to describe alg ebraic
structures [ Coh65 ;Neu70 ;Tay93 ] (see also [ Fuj20 ] for a point of view from universal algebra). An
abstract clone (orclone for short) Cis a graded set Cendowed with maps
−[−, . . . , −]n,m:C(n)× C(m)n→ C(m), (2.1.2.A)
where n, m/greaterorequalslant0, called superposition maps , and with distinguished elements 1i,n∈ C(n), where
n/greaterorequalslant1 and i∈[n], called projections . This data has to satisfy, for any x∈ C(n),n/greaterorequalslant0,
y1, . . . , y n∈ C(m),m/greaterorequalslant0,z1, . . . , z m∈ C(k),k/greaterorequalslant0, and i∈[n], the relations
1i,n[y1, . . . , y n]n,m=yi, (2.1.2.B)
x[11, . . . ,1n]n,n=x, (2.1.2.C)
x[y1, . . . , y n]n,m[z1, . . . , z m]m,k=x/bracketleftBig
y1[z1, . . . , z m]m,k, . . . , y n[z1, . . . , z m]m,k/bracketrightBig
n,k. (2.1.2.D)
To lighten the notation when the context is clear, we shall dr op the indices of the superposition
maps in order to write x[y1, . . . , y n] instead of x[y1, . . . , y n]n,mfor any x∈ C(n),n/greaterorequalslant0 and
y1, . . . , y n∈ C(m),m/greaterorequalslant0. In the same way, we shall write 1iinstead of 1i,nfor any n/greaterorequalslant1 and
i∈[n] when the value of nis clear or not signiﬁcant.
Observe that for any 0 /lessorequalslantn/lessorequalslantm, there is a map ιn,m:C(n)→ C(m) such that for any
x∈ C(n),ιn,m(x) := x[11,m, . . . ,1n,m]. It is easy to check that ιis an injection. Therefore,
in each set C(m), there is a copy of the elements of C(n), seen in C(m) as elements of arity m.
Observe also that for any n/greaterorequalslant0,ιn,nis the identity map on C(n), and that for any 0 /lessorequalslantn/lessorequalslantm/lessorequalslantk,
the relation ιm,k◦ιn,m=ιn,kholds.
Thetrivial clone is the clone Tsuch that for any n/greaterorequalslant0,T(n) is a singleton. Observe that
there is no choice for the deﬁnition of the superposition map s ofT. Let C′be another clone. A
graded set morphism φ:C → C′is aclone morphism if, for any n/greaterorequalslant1 and i∈[n],φsends
Clones of pigmented words 4 /41 S. Giraudo2 CLONES AND REALIZATIONS OF VARIETIES — 2.2 Terms and free clon es
the projection 1i,nofCto the projection 1′
i,nofC′, and for any x∈ C(n),n/greaterorequalslant0, and any
y1, . . . , y n∈ C(m),m/greaterorequalslant0,
φ(x[y1, . . . , y n]) =φ(x)[φ(y1), . . . , φ (yn)]. (2.1.2.E)
Besides, if C′is a graded subset of Csuch that C′contains the projections of C, and C′is closed
under the superposition maps of C, then C′is asubclone ofC. Given S⊆ C, the subclone of C
generated bySis the smallest subclone CSofCcontaining S. When CS=C,Sis agenerating
setofC. Aclone congruence ofCis a graded set equivalence relation ≡onCsuch that for any
x, x′∈ C(n),n/greaterorequalslant0, and any y1, y′
1, . . . , y n, y′
n∈ C(m),m/greaterorequalslant0, ifx≡x′andy1≡y′
1, . . . , yn≡y′
n,
then x[y1, . . . , y n]≡x′[y′
1, . . . , y′
n].Thequotient ofCby≡is the clone on the graded set C/≡such
that for any x∈ C(n),n/greaterorequalslant0,y1, . . . , y n∈ C(m),m/greaterorequalslant0, the superposition maps of C/≡satisfy
[x]≡[[y1]≡, . . . , [yn]≡] = [x[y1, . . . , y n]]≡, (2.1.2.F)
and for any n/greaterorequalslant1 and i∈[n], the projection 1i,nofC/≡is the ≡-equivalence class of the
projection 1i,nofC.
2.1.3 Algebras over clones. LetCbe a clone. An algebra over C(or a C-algebra for short)
is a pair ( A,opn) where Ais a set and for for any n/greaterorequalslant0, eachopnis a map
opn:C(n)→(An→ A) ( 2.1.3.A)
satisfying the following relations. For any a1, . . . , a m∈ A,m/greaterorequalslant0,i∈[m],x∈ C(n),n/greaterorequalslant0, and
y1, . . . , y n∈ C(m),
op(1i,m)(a1, . . . , a m) =ai, (2.1.3.B)
op(x[y1, . . . , y n])(a1, . . . , a m) =op(x)(op(y1)(a1, . . . , a m), . . . ,op(yn)(a1, . . . , a m)).(2.1.3.C)
In other terms, each x∈ C(n) gives rise to an operation op(x) onAwith ninputs and one output,
and the functional composition of such operations is cohere nt with the superposition maps of C.
2.2 Terms and free clones
In order to describe free clones, we need to introduce some no tions and combinatorics about
terms. The reason behind this is that the elements of free clo nes can be described as terms and
their superposition maps as graftings in terms.
2.2.1 Terms. Asignature is a graded set G. Its elements are called constants . Any element
of the set X:=/uniontext
n/greaterorequalslant1Xn, whereXn:={x1, . . . , xn}, is a variable . AG-term (or simply term when
the context is clear) is recursively either a variable or a pa ir (g,(t1, . . . ,tk)), where g∈G(k),k/greaterorequalslant0,
andt1, . . . ,tkareG-terms. For convenience, we shall write g[t1, . . . ,tk] instead of ( g,(t1, . . . ,tk)).
From this deﬁnition, any G-term is a rooted planar tree where internal nodes are decora ted by
constants and leaves are decorated by variables. The graded set ofG-terms is denoted by T(G)
where, for any n/greaterorequalslant0,T(G)(n) is a copy of the set of the G-terms having all variables belonging
toXn.
Lettbe aG-term. The degree dg(t) oftis the number of internal nodes of tseen as a tree.
Thelength ℓ(t) oftis the number of variables of t. IfG′is a signature and φ:G→G′is a graded
set morphism, we denote by /hatwideφ:T(G)→T(G′) the map such that, for any t∈T(G),/hatwideφ(t) is the
G′-term obtained by replacing each decoration g∈Gof an internal node of tbyφ(g).
Clones of pigmented words 5 /41 S. Giraudo2 CLONES AND REALIZATIONS OF VARIETIES — 2.3 Clone presentati ons and varieties
For instance, by setting Gas the signature satisfying G=G(0)⊔G(2)⊔G(3) withG(0) = {a},
G(2) = {b,c}, andG(3) = {d},
t:=d[b[d[x1,a,x1],x3],a,d[c[x5,x3],x4,a]] ( 2.2.1.A)
is aG-term. The treelike representation of tis
x1 x3x4a
ax1x3a
x5dd bd
c(2.2.1.B)
This term has 8 as degree and 6 as length.
There is at this stage a little subtlety to remark: a G-termtgives rise to diﬀerent elements
of the graded set T(G) depending on the arity attributed to it. For instance, the t erm deﬁned
in (2.2.1.B ) can among others be an element of T(G)(5) or of T(G)(6), both distinct from each
other.
2.2.2 Free clones. Given a signature G,t∈T(G)(n),n/greaterorequalslant0, andt′, . . . ,t′
n∈T(G)(m),
m/greaterorequalslant0, the composition oft′
1, . . . ,t′
nintis theG-termt[t′
1, . . . ,t′
n] obtained by simultaneously
replacing for all i∈[n] all occurrences of the variables xiintbyt′
i. For instance, by considering
the signature Gdeﬁned at the end of Section 2.2.1, we have the composition
x3x1
x3 x1d
b

x1ax2 bc
,
x2x2b,
x2 ab
=x2
a
x1ax2a
x1ax2
x2b
bb
bcd
bc
(2.2.2.A)
ofG-terms.
The free clone onGis the clone T(G) on the graded set of the G-terms endowed with
the following superposition maps and projections. Given t∈T(G)(n),n/greaterorequalslant0, andt′, . . . ,t′
n∈
T(G)(m),m/greaterorequalslant0 the superposition t[t′
1, . . . ,t′
n] is the composition of t′
1, . . . ,t′
nint. Moreover, for
anyn/greaterorequalslant1 and i∈[n], the projection 1i,nis theG-term xn.
2.3 Clone presentations and varieties
This preliminary section ends by setting up some notions abo ut varieties of algebras and clone
presentations.
2.3.1 Evaluation maps. IfCis a clone, Cis in particular a graded set and thus, a signature.
Therefore, the free clone on Cis a well-deﬁned clone T(C). The evaluation map ofCis the map
evC:T(C)→ C recursively deﬁned, for any n/greaterorequalslant1 and i∈[n] by
evC(xi) :=1i,n, (2.3.1.A)
and, for any g∈ C(k),k/greaterorequalslant0, andt1, . . . ,tk∈T(C), by
evC(g[t1, . . . ,tk]) := g[evC(t1), . . . , evC(tk)], (2.3.1.B)
where the superposition of the right-hand side of ( 2.3.1.B ) is the one of C.
Clones of pigmented words 6 /41 S. Giraudo3 PIGMENTED MONOIDS AND CLONES OF PIGMENTED WORDS —
2.3.2 Varieties and presentations. Avariety is a pair V:= (G,R) such that Gis a
signature and Ris an equivalence relation on T(G). Any pair ( t,t′) ofG-terms such that t R t′
is an equation ofV. The clone congruence generated byRis the smallest clone congruence ≡R
ofT(G) containing R. If it exists, the degree ofVis the smallest integer d/greaterorequalslant0 such that all
R-equivalence classes of G-terms of degrees d′/greaterorequalslantd+ 1 are trivial.
Apresentation of a clone Cis a variety V:= (G,R) such that Cis isomorphic as a clone to
T(G)/≡R. A presentation V:= (G,R) ofCisﬁnitely related ifVadmits a degree. An algebra
over the variety Vis an algebra over the clone admitting Vas presentation.
The following statement is an important tool used in the sequ el to establish clones presenta-
tions.
◮Proposition 2.3.2.A — LetCbe a clone, V:= (G,R)be a variety, and φ:G→ C be a graded
set morphism. If φ(G)is a generating set of Cand, for any t,t′∈T(G),t≡Rt′if and only if
evC/parenleftBig
/hatwideφ(t)/parenrightBig
=evC/parenleftBig
/hatwideφ(t′)/parenrightBig
,then Vis a presentation of C.
◭Proof — Let us denote by θ:T(G)→ C the map evC◦/hatwideφ. Since evC:T(C)→ C is a surjective
clone morphism and φ(G) is a generating set of C,θis a surjective clone morphism. Moreover,
the fact that, by hypothesis, for any G-termstandt′such that t≡Rt′,θ(t) =θ(t′) holds, θ
induces a well-deﬁned surjective clone morphism θ:T(G)/≡R→ C. Besides, if [ t]≡Rand [t′]≡R
are two ≡R-equivalence classes of G-terms such that θ/parenleftbig
[t]≡R/parenrightbig
=θ/parenleftbig
[t′]≡R/parenrightbig
,then for any t∈[t]≡R
andt′∈[t′]≡R, we have θ(t) =θ(t′). This implies by using the hypothesis of the statement of th e
proposition that t≡Rt′. Therefore, [ t]≡R= [t′]≡R, showing that θis injective. We have shown
that θis a clone isomorphism between T(G)/≡RandC, implying the statement of the proposition.
/square/square/square
2.3.3 Clone realizations of varieties. In the other direction, given a variety V, any clone
admitting Vas presentation is a clone realization ofV(see [ Neu70 ]).
For instance, let the variety V:= (G,R) whereGis the signature satisfying G=G(2) = {∧}
andRis the equivalence relation on T(G) satisfying
∧[∧[x1,x2],x3]R∧[x1,∧[x2,x3]], (2.3.3.A)
∧[x1,x2]R∧[x2,x1], (2.3.3.B)
∧[x1,x1]Rx1. (2.3.3.C)
This is the variety of semilattices. The clone realization C:=T(G)/≡Radmits the following
concrete description. For any n/greaterorequalslant0,C(n) is a copy of the set of nonempty subsets of [ n]. The
superposition maps of Csatisfy, for any n/greaterorequalslant0,U∈ C(n), andU′
1, . . . ,U′
n∈ C(m),m/greaterorequalslant0,
U[U′
1, . . . ,U′
n] =/uniondisplay
i∈UU′
i, (2.3.3.D)
and for any n/greaterorequalslant1 and i∈[n], the projection 1i,nis{i}. Any algebra over Cis a semilattice.
3 Pigmented monoids and clones of pigmented
words
We introduce here the variety of pigmented monoids which is r oughly speaking a variety wherein
algebras are monoids endowed with monoid endomorphisms ind exed on another monoid M—the
pigments— with some extra structure. A clone realization P(M) of this variety involving some
particular words as main combinatorial objects is describe d.
Clones of pigmented words 7 /41 S. Giraudo3 PIGMENTED MONOIDS AND CLONES OF PIGMENTED WORDS — 3.1 Pigme nted monoids
3.1 Pigmented monoids
Let us describe the variety of pigmented monoids and browse s ome examples of such structures
having some combinatorial interest.
3.1.1 Varieties of pigmented monoids. Let ( M,·,e) be a monoid. Recall that ·is an
associative binary operation and that e is the unit w.r.t. th e operation ·. We denote by Ethe
trivial monoid, that is the monoid having e as unique element .
The variety of M-pigmented monoids (or simply pigmented monoids when the context is
clear) is the variety ( GM,RM) such that GM:=GM(0)⊔GM(1)⊔GM(2) where
GM(0) := {u},GM(1) := {pα:α∈ M} ,GM(2) := {⋆}, (3.1.1.A)
andRMis the equivalence relation on T(GM) satisfying
⋆[⋆[x1,x2],x3]RM⋆[x1, ⋆[x2,x3]], (3.1.1.B)
⋆[u,x1]RMx1RM⋆[x1,u], (3.1.1.C)
pα[⋆[x1,x2]]RM⋆[pα[x1],pα[x2]], (3.1.1.D)
pα[u]RMu, (3.1.1.E)
pα1[pα2[x1]]RMpα1·α2[x1], (3.1.1.F)
pe[x1]RMx1, (3.1.1.G)
for any α, α 1, α2∈ M .
Let ( A,op) be an algebra over the variety of M-pigmented monoids. By denoting by ⋆the
binary product op(⋆), by u the constant op(u), and for any α∈ M , by p αthe unary product
op(pα), the following properties hold.
(i) By ( 3.1.1.B ) and ( 3.1.1.C ), (A, ⋆,u) is a monoid.
(ii) By ( 3.1.1.D ) and ( 3.1.1.E ), each p α,α∈ M , is a monoid endomorphism of ( A, ⋆,u).
(iii) By ( 3.1.1.F ) and ( 3.1.1.G ), for any α∈ M , the map ·:M × A → A deﬁned by α·x:= p α(x)
is a left monoid action of MonA.
Any such quadruple ( A, ⋆,u,pα) is an M-pigmented monoid (or simply pigmented monoid when
the context is clear).
For instance, any Z/2Z-pigmented monoid is a set Aendowed with an associative product ⋆
and two unary operations p 0and p 1such that ⋆admits a unit u ∈ A, p0is the identity map on A,
and for any x, x 1, x2∈ A, p1(x1⋆ x2) = p 1(x1)⋆p1(x2),p1(u) = u ,and p 1(p1(x)) = x.In other
terms, a Z/2Z-pigmented monoid is a monoid endowed with an involutive mon oid endomorphism.
Similarly, a ( {0,1},×,1)-pigmented monoid is a monoid endowed with an idempotent m onoid
endomorphism.
A variation of M-pigmented monoids have been considered in [ Gir15 ] (see also [ Gir18 , Chap. 4])
as algebras over some operads. In this cited work, the consid ered variety admits GM\ {u}as
signature and RMdeprived of Relations ( 3.1.1.C ) and ( 3.1.1.E ) as equivalence relation.
3.1.2 Examples. Let us consider the following examples of pigmented monoids .
(E1) Let A:= (N∗, ., ǫ,pα) where .is the concatenation product and for any α∈N, pαis the
map sending any word to its subword made of the letters greate r than or equal to α. This
quadruple is an M-pigmented monoid where M:= (N,max,0). For instance,
p2(0015213.41200) = 52342 = p 2(0015213).p2(41200). (3.1.2.A)
Clones of pigmented words 8 /41 S. Giraudo3 PIGMENTED MONOIDS AND CLONES OF PIGMENTED WORDS — 3.2 Clone of pigmented
words
(E2) Let A:= (Z∗, ., ǫ,pα) where .is the concatenation product and for any α∈Z, pαis the map
sending any word to the word obtained by incrementing by αits letters. This quadruple
is an M-pigmented monoid where M:= (Z,+,0). For instance, by denoting by nany
negative integer having nas absolute value,
p3/parenleftbig
2430.264/parenrightbig
=1163531 = p3/parenleftbig
2430/parenrightbig
.p3/parenleftbig
264/parenrightbig
. (3.1.2.B)
(E3) Let A:= (K/a\}bracke⊔le{⊔/a\}bracke⊔le{⊔z/a\}bracke⊔ri}h⊔/a\}bracke⊔ri}h⊔,+,0,pα) where Kis a ﬁeld of zero characteristic with multiplication
denoted by ·,K/a\}bracke⊔le{⊔/a\}bracke⊔le{⊔z/a\}bracke⊔ri}h⊔/a\}bracke⊔ri}h⊔is the space of formal power series on the parameter z, and for any
α∈K, pαis the map sending any series to the series obtained by multip lying its coeﬃcients
byα. This quadruple is an M-pigmented monoid where M:= (K,·,1).
(E4) Generalizing the previous example, let A:= (V,+,0,pα) where Vis a vector space on a
ﬁeldKwith multiplication denoted by ·, and for any α∈Kandv∈V, pα(v) =α·v. This
quadruple is an M-pigmented monoid where M:= (K,·,1).
3.2 Clone of pigmented words
We describe now a construction taking at input a monoid Mand outputting a clone P(M) on
the graded set of M-pigmented words. We show some ﬁrst properties of this const ruction P, as
the fact that it is a functor from the category of monoids to th e category of clones and describe
a generating set of P(M).
3.2.1 Pigmented words. LetSbe an nonempty set. An S-pigmented letter (orpigmented
letter when the context is clear) is a pair ( i, α), denoted by iα, where α∈Sandiis a positive
integer. We call i(resp. α) the value (resp. the pigment ) ofiα. Let LMbe the set of M-pigmented
letters. An S-pigmented word (orpigmented word when the context is clear) of arity n,n/greaterorequalslant0,
is a word ponLMsuch that all values of the pigmented letters of pbelong to [ n]. The only
S-pigmented word of arity 0 is the empty word, denoted by ǫin this context. For instance,
p:= 2a1a1b6ais an {a, b, c, d }-pigmented word of arity 17.
3.2.2 Construction. Let (M,·,e) be a monoid. Let P(M) be the graded set of M-pigmented
words. Let ·:M × P(M)→P(M) be the map deﬁned for any α∈ M and any M-pigmented
word iα1
1. . . iαℓ
ℓby
α·iα1
1. . . iαℓ
ℓ:=iα·α1
1 . . . iα·αℓ
ℓ. (3.2.2.A)
Let us moreover endow P(M) with the superposition maps deﬁned for any iα1
1. . . iαℓ
ℓ∈P(M)(n),
n/greaterorequalslant0, andp1, . . . ,pn∈P(M)(m),m/greaterorequalslant0, by
iα1
1. . . iαℓ
ℓ[p1, . . . ,pn] := ( α1·pi1). . . . . (αℓ·piℓ). (3.2.2.B)
For instance, by denoting by A∗the free monoid ( A∗, ., ǫ) generated by A:={a, b, c }, we have in
P(A∗),
2ba2aa4baa3ǫ/bracketleftbig
2b1aa,1bbb1ǫ2b,2aa2a,ǫ/bracketrightbig
=/parenleftbig
ba·1bbb1ǫ2b/parenrightbig
./parenleftbig
aa·1bbb1ǫ2b/parenrightbig
.(baa·ǫ).(ǫ·2aa2a) (3.2.2.C)
= 1babbb1ba2bab.1aabbb1aa2aab.ǫ.2aa2a
= 1babbb1ba2bab1aabbb1aa2aab2aa2a.
We also set, for any n/greaterorequalslant1 and i∈[n],1i,nas the pigmented word ieof length 1. For instance,
by considering the monoid Mof the previous example, 12,4is the pigmented word 2ǫ.
Clones of pigmented words 9 /41 S. Giraudo3 PIGMENTED MONOIDS AND CLONES OF PIGMENTED WORDS — 3.2 Clone of pigmented
words
Besides, given a monoid morphism φ:M → M′between two monoids MandM′, let
P(φ) :P(M)→P(M′) be the map deﬁned for any M-pigmented word iα1
1. . . iαℓ
ℓby
P(φ)(iα1
1. . . iαℓ
ℓ) :=iφ(α1)
1 . . . iφ(αℓ)
ℓ. (3.2.2.D)
For instance, by denoting by Nthe additive monoid ( N,+,0), the map φ:A∗→Nsending each
w∈A∗to its length is a monoid morphism. We have in this context
P(φ)/parenleftbig
2ba2aa3ǫ/parenrightbig
= 222230. (3.2.2.E)
◮Theorem 3.2.2.A — The construction Pis a functor from the category of monoids to the
category of clones. Moreover, this functor preserves injec tions and surjections.
◭Proof — In this proof, we consider two monoids ( M,·,e) and ( M′,·′,e′).
Let us ﬁrst prove that P(M) is a clone. For any n/greaterorequalslant1,i∈[n], andp1, . . . ,pn∈P(M)(n),
since e is the unit of M, we have ie[p1, . . . ,pn] =piso that Relation ( 2.1.2.B ) is satisﬁed. Moreover,
for any n/greaterorequalslant0 andp∈P(M), again since e is the unit of M, we have p[1e, . . . , ne] =pso that
Relation ( 2.1.2.C ) is satisﬁed. Finally, for any n/greaterorequalslant0,m/greaterorequalslant0,k/greaterorequalslant0,iα1
1. . . iαℓ
ℓ∈P(M)(n),
jβ1,1
1,1. . . jβ1,k1
1,k1, . . . , jβn,1
n,1. . . jβn,kn
n,k n∈P(M)(m),andp1, . . . ,pm∈P(M)(k), since ·is associative,
we have
iα1
1. . .iαℓ
ℓ/bracketleftBig
jβ1,1
1,1. . . jβ1,k1
1,k1, . . . , jβn,1
n,1. . . jβn,kn
n,k n/bracketrightBig
[p1, . . . ,pm] ( 3.2.2.F)
=/parenleftBig
α1·jβi1,1
i1,1. . . jβi1,ki1
i1,ki1/parenrightBig
. . ./parenleftbigg
αℓ·jβiℓ,1
iℓ,1. . . jβiℓ,kiℓ
iℓ,kiℓ/parenrightbigg
[p1, . . . ,pm]
=jα1·βi1,1
i1,1 . . . jα1·βi1,ki1
i1,ki1. . . jαℓ·βiℓ,1
iℓ,1 . . . jαℓ·βiℓ,kiℓ
iℓ,kiℓ[p1, . . . ,pm]
=/parenleftbig
(α1·βi1,1)·pji1,1/parenrightbig
. . ./parenleftBig/parenleftbig
α1·βi1,ki1/parenrightbig
·pji1,ki1/parenrightBig
. . ./parenleftBig
(αℓ·βiℓ,1)·pjiℓ,1/parenrightBig
. . ./parenleftBig/parenleftBig
αℓ·βiℓ,kiℓ/parenrightBig
·pjiℓ,kiℓ/parenrightBig
=α1·/parenleftBig/parenleftbig
βi1,1·pji1,1/parenrightbig
. . ./parenleftBig
βi1,ki1·pji1,ki1/parenrightBig/parenrightBig
. . . α ℓ·/parenleftBig/parenleftBig
βiℓ,1·pjiℓ,1/parenrightBig
. . ./parenleftBig
βiℓ,kiℓ·pjiℓ,kiℓ/parenrightBig/parenrightBig
=iα1
1. . . iαℓ
ℓ/bracketleftbig/parenleftbig
β1,1·pj1,1/parenrightbig
. . ./parenleftbig
β1,k1·pj1,k1/parenrightbig
, . . . ,/parenleftbig
βn,1·pjn,1/parenrightbig
. . ./parenleftbig
βn,k n·pjn,kn/parenrightbig/bracketrightbig
=iα1
1. . . iαℓ
ℓ/bracketleftBig
jβ1,1
1,1. . . jβ1,k1
1,k1[p1, . . . ,pm], . . . , jβn,1
n,1. . . jβn,kn
n,k n[p1, . . . ,pm]/bracketrightBig
so that Relation ( 2.1.2.D ) is satisﬁed. Therefore, P(M) is a clone.
Letφ:M → M′be a monoid morphism. Let us show that P(φ) is a clone morphism.
First, P(φ) is a graded set morphism. Moreover, for any n/greaterorequalslant1 and i∈[n], since φsends the
unit of Mto the unit of M′, we have P(φ)(ie) =iφ(e)=ie′.Finally, for any n/greaterorequalslant0,m/greaterorequalslant0,
iα1
1. . . iαℓ
ℓ∈P(M)(n), and jβ1,1
1,1. . . jβ1,k1
1,k1, . . . , jβn,1
n,1. . . jβn,kn
n,k n∈P(M)(m),since φis a monoid
morphism, we have
P(φ)/parenleftBig
iα1
1. . . iαℓ
ℓ/bracketleftBig
jβ1,1
1,1. . . jβ1,k1
1,k1, . . . , jβn,1
n,1. . . jβn,kn
n,k n/bracketrightBig/parenrightBig
(3.2.2.G)
=P(φ)/parenleftbigg/parenleftBig
α1·jβi1,1
i1,1. . . jβi1,ki1
i1,ki1/parenrightBig
. . ./parenleftbigg
αℓ·jβiℓ,1
iℓ,1. . . jβiℓ,kiℓ
iℓ,kiℓ/parenrightbigg/parenrightbigg
=P(φ)/parenleftbigg
jα1·βi1,1
i1,1 . . . jα1·βi1,ki1
i1,ki1. . . jαℓ·βiℓ,1
iℓ,1 . . . jαℓ·βiℓ,kiℓ
iℓ,kiℓ/parenrightbigg
=jφ(α1·βi1,1)
i1,1 . . . jφ/parenleftbig
α1·βi1,ki1/parenrightbig
i1,ki1. . . jφ(αℓ·βiℓ,1)
iℓ,1 . . . jφ/parenleftbig
αℓ·βiℓ,kiℓ/parenrightbig
iℓ,kiℓ
=jφ(α1)·′φ(βi1,1)
i1,1 . . . jφ(α1)·′φ/parenleftbig
βi1,ki1/parenrightbig
i1,ki1. . . jφ(αℓ)·′φ(βiℓ,1)
iℓ,1 . . . jφ(αℓ)·′φ/parenleftbig
βiℓ,kiℓ/parenrightbig
iℓ,kiℓ
Clones of pigmented words 10 / 41 S. Giraudo3 PIGMENTED MONOIDS AND CLONES OF PIGMENTED WORDS — 3.2 Clone of pigmented
words
=/parenleftbigg
φ(α1)·′jφ(βi1,1)
i1,1 . . . jφ/parenleftbig
βi1,ki1/parenrightbig
i1,ki1/parenrightbigg
. . ./parenleftbigg
φ(αℓ)·′jφ(βiℓ,1)
iℓ,1 . . . jφ/parenleftbig
βiℓ,kiℓ/parenrightbig
iℓ,kiℓ/parenrightbigg
=iφ(α1)
1 . . . iφ(αℓ)
ℓ/bracketleftbigg
jφ(β1,1)
1,1 . . . jφ(β1,k1)
1,k1, . . . , jφ(βn,1)
n,1 . . . jφ(βn,kn)
n,k n/bracketrightbigg
=P(φ)(iα1
1. . . iαℓ
ℓ)/bracketleftBig
P(φ)/parenleftBig
jβ1,1
1,1. . . jβ1,k1
1,k1/parenrightBig
, . . . , P(φ)/parenleftBig
jβn,1
n,1. . . jβn,kn
n,k n/parenrightBig/bracketrightBig
.
Therefore, P(φ) is a clone morphism. Moreover, it is immediate, for any mono idM′′and monoid
morphism φ′:M′→ M′′, that P(φ′◦φ) =P(φ′)◦P(φ). It is also immediate that if I : M → M
is the identity map, then P(I) is the identity map on P(M). For these reasons, Pis a functor
from the category of monoids to the category of clones.
Let us ﬁnally prove that Ppreserves injections and surjections. Assume that φis in-
jective. If iα1
1. . . iαℓ
ℓandjβ1
1. . . jβk
kare two elements of P(M) such that P(φ)(iα1
1. . . iαℓ
ℓ) =
P(φ)/parenleftBig
jβ1
1. . . jβk
k/parenrightBig
,then iφ(α1)
1 . . . iφ(αℓ)
ℓ=jφ(β1)
1 . . . jφ(βk)
k.Thus, ℓ=k,i1=j1, . . . , iℓ=jℓ,
φ(α1) =φ(β1), . . . , φ(αℓ) =φ(βℓ). Since φis injective, we have α1=β1, . . . , αℓ=βℓ, showing
that P(φ) is injective. Assume that φis surjective. Let jβ1
1. . . jβk
k∈P(M′). Since φis sur-
jective, there are α1, . . . , α k∈ M such that φ(α1) =β1, . . . , φ(αk) =βk. Therefore, we have
P(φ)(jα1
1. . . jαk
k) =jβ1
1. . . jβk
k,showing that P(φ) is surjective. /square/square/square
3.2.3 First properties. We describe now a generating set of P(M) and show that the map
sending any M-pigmented word to its mirror image is an involutive clone au tomorphism of P(M).
◮Proposition 3.2.3.A — For any monoid M, the graded set GM:=GM(0)⊔GM(1)⊔GM(2)
deﬁned by GM(0) := {ǫ},GM(1) := {1α:α∈ M} , and GM(2) := {1e2e}where eis the unit of
Mis a generating set of the clone P(M).
◭Proof — Let us prove by induction on the length ℓofp∈P(M)(n),n/greaterorequalslant0, thatp∈P(M)GM.
First, if ℓ= 0, then p=ǫand since ǫ∈GM, the property holds. If ℓ/greaterorequalslant1, thenpdecomposes
asp=p′.iαwherep′∈P(M)(n) and iα∈ L M. By deﬁnition of the superposition maps of
P(M),pexpresses as p= 1e2e[p′,1α[1i,n]].Now, since ℓ(p′) =ℓ−1, by induction hypothesis,
p′∈P(M)GM. Moreover, since 1e2e∈GMand 1α∈GM, this shows the previously stated
property. /square/square/square
By considering the graded set GMintroduced by Proposition 3.2.3.A , letintM:GM→GM
be the graded set morphism deﬁned by intM(u) := ǫ,intM(pα) := 1α,α∈ M , and intM(⋆) :=
1e2e. This bijective map will be used together with Proposition 2.3.2.A in order to establish a
presentation of P(M).
The map r sending any word to its mirror image is in particular a well-deﬁned graded set
morphism from P(M) toP(M). As stated by the following result, this map has an addition al
property.
◮Proposition 3.2.3.B — For any monoid M, the map r :P(M)→P(M)is an involutive clone
automorphism.
◭Proof — Let·be the operation of Mand e its unit. It is ﬁrst immediate that the projections
ie∈P(M)(n),n/greaterorequalslant1,i∈[n], are ﬁxed-points of r. Moreover, as a consequence of the fac t that
for any words uandvon any alphabet, r( u.v) = r( v).r(u), for any iα1
1. . . iαℓ
ℓ∈P(M),n/greaterorequalslant0, and
p1, . . . ,pn∈P(M)(m),m/greaterorequalslant0, we have
r(iα1
1. . . iαℓ
ℓ[p1, . . . ,pn]) = r( αℓ·piℓ). . .r(α1·pi1) = r( iα1
1. . . iαℓ
ℓ)[r(p1), . . . , r(pn)]. (3.2.3.A)
Clones of pigmented words 11 / 41 S. Giraudo3 PIGMENTED MONOIDS AND CLONES OF PIGMENTED WORDS — 3.3 Clone realization
Therefore, r is a clone morphism. Finally, since the r is an in volution, the statement of the
proposition follows. /square/square/square
3.3 Clone realization
This last part of the present section is devoted to establish its main result, namely the fact that
P(M) is a clone realization of the variety of M-pigmented monoids. For this, we shall use a
method consisting in building a speciﬁc system of represent atives for the quotient T(GM)/≡RM
which is in one-to-one correspondence with the graded set of M-pigmented words. Other ap-
proaches are possible as well including those using term rew rite systems [ BN98 ;Bez+03 ] and
proofs for their termination and conﬂuence.
3.3.1 Properties of the equation set. We begin with two elementary properties satisﬁed
by the equivalence relation RM.
◮Lemma 3.3.1.A — For any monoid Mand any t,t′∈T(GM),t≡RMt′implies that tandt′
are of equal length.
◭Proof — For any equation ( t,t′) of the variety ( GM,RM) (see Relations ( 3.1.1.B )—( 3.1.1.G )),
we can observe that ℓ(t) = ℓ(t′). Since by deﬁnition, ≡RMis the smallest clone congruence
containing RM, the statement of the lemma follows. /square/square/square
Thefrontier map is the map frM:T(GM)→P(M) deﬁned by frM:=evP(M)◦/hatwideintM, where
intMis the graded set morphism deﬁned in Section 3.2.3. For instance, by considering the free
monoid ( A∗, ., ǫ) generated by A:={a, b}, we have in P(A∗),
frP(A∗)(⋆[pa[⋆[x3,pb[x2]]], ⋆[x1,pb[x2]]]) ( 3.3.1.A)
=evP(A∗)/parenleftBig
/hatwideintA∗(⋆[pa[⋆[x3,pb[x2]]], ⋆[x1,pb[x2]]])/parenrightBig
=evP(A∗)/parenleftbig
1ǫ2ǫ/bracketleftbig
1a/bracketleftbig
1ǫ2ǫ/bracketleftbig
3ǫ,1b[2ǫ]/bracketrightbig/bracketrightbig
,1ǫ2ǫ/bracketleftbig
1ǫ,1b[2ǫ]/bracketrightbig/bracketrightbig/parenrightbig
= 3a2ab1ǫ2b.
◮Lemma 3.3.1.B — For any monoid Mand any t,t′∈T(GM),t≡RMt′implies frM(t) =
frM(t′).
◭Proof — Let·be the operation of Mand e is its unit. For any α, α 1, α2∈ M , we have
frM(⋆[⋆[x1,x2],x3]) = 1e2e3e=frM(⋆[x1, ⋆[x2,x3]]), (3.3.1.B)
frM(⋆[u,x1]) = 1e=frM(x1) = 1e=frM(⋆[x1,u]), (3.3.1.C)
frM(pα[⋆[x1,x2]]) = 1α2α=frM(⋆[pα[x1],pα[x2]]), (3.3.1.D)
frM(pα[u]) = ǫ=frM(u), (3.3.1.E)
frM(pα1[pα2[x1]]) = 1α1·α2=frM((pα1·α2)[x1]), (3.3.1.F)
frM(pe[x1]) = 1e=frM(x1). (3.3.1.G)
Since by deﬁnition, ≡RMis the smallest clone congruence containing RMand, as we have seen
here, for any ( t,t′)∈RM, we have frM(t) =frM(t′), the statement of the lemma follows. /square/square/square
Clones of pigmented words 12 / 41 S. Giraudo3 PIGMENTED MONOIDS AND CLONES OF PIGMENTED WORDS — 3.3 Clone realization
3.3.2 Right comb factorization. We describe now a way to encode any M-pigmented
word as a particular GM-term having some important properties.
Theright comb factorization map is the map rcM:P(M)→T(GM) recursively deﬁned, for
anyp∈P(M), by
rcM(p) :=

u if p=ǫ,
⋆[pα[xi],rcM(p′)] otherwise, where p=iα.p′,(3.3.2.A)
where iα∈ L M,xi∈X, andp′∈P(M). For instance,
rcM/parenleftbig
1ab3aa2ǫ2b/parenrightbig
=⋆[pab[x1], ⋆[paa[x3], ⋆[pǫ[x2], ⋆[pb[x2],u]]]]. (3.3.2.B)
◮Lemma 3.3.2.A — For any monoid Mand any p∈P(M),frM(rcM(p)) =p.
◭Proof — Let·be the operation of Mand e is its unit. We proceed by induction on the
length ℓofp. Ifℓ= 0, then p=ǫand since frM(rcM(ǫ)) = frM(u) = ǫ,the property holds. If
ℓ/greaterorequalslant1,pdecomposes as p=iα.p′where iα∈ L Mandp′∈P(M). By deﬁnition of rcMand by
induction hypothesis,
frM(rcM(p)) = frM(rcM(iα.p′)) = frM(⋆[pα[xi],rcM(p′)]) ( 3.3.2.C)
= 1e2e[1α[ie],frM(rcM(p′))] = 1e2e[1α[ie],p′] =iα.p′=p.
Therefore, the stated property holds. /square/square/square
◮Lemma 3.3.2.B — For any monoid Mand any t∈T(GM), there exists t′∈rcM(P(M))such
thatt≡RMt′.
◭Proof — Let·be the operation of Mand e is its unit. We proceed by induction on the pairs
(ℓ, d) ordered lexicographically, where ℓis the length of tanddis the degree of t.
(I)Ifℓ= 0, then thas no variable. By ( 3.1.1.C ) and ( 3.1.1.E ),t≡RMu. Since u belongs to
rcM(P(M)), the stated property is satisﬁed.
(II)Ifℓ/greaterorequalslant1, we have three sub-cases to explore depending on the genera l form of t.
(a)Ift=xiwhere xi∈X, by ( 3.1.1.C ),t≡RM⋆[xi,u].By ( 3.1.1.G ),t≡RM⋆[pe(xi),u].
Since ⋆[pe(xi),u] belongs to rcM(P(M)), the stated property is satisﬁed.
(b)Ift= p α[s] where α∈ M ands∈T(GM), since ℓ(s) =ℓ(t) and dg( s)<dg(t), by
induction hypothesis, there exists s′∈rcM(P(M)) such that s≡RMs′. By deﬁnition
ofrcM,s′can have two diﬀerent forms.
(i)Ifs′= u, we have t≡RMpα[u]. By ( 3.1.1.E ),t≡RMu.Since u belongs to
rcM(P(M)), the stated property is satisﬁed.
(ii)Otherwise, s′=⋆[pα′[xi],r] where α′∈ M ,xi∈X, andr∈T(GM). We
havet≡RMpα[⋆[pα′[xi],r]].By ( 3.1.1.D ), we have t≡RM⋆[pα[pα′[xi]],pα[r]] and
by ( 3.1.1.F ), we have t≡RM⋆[pα·α′[xi],pα[r]].Now, by Lemma 3.3.1.A ,ℓ(pα[r])<
ℓ(t). Thus, by induction hypothesis, there exists r′∈rcM(P(M)) such that
pα[r]≡RMr′. Therefore, t≡RM⋆[pα·α′[xi],r′].By deﬁnition of rcM,⋆[pα·α′[xi],r′]
belongs to P(M) so that the stated property is satisﬁed.
(c)Otherwise, t=⋆[s1,s2] wheres1∈T(GM) ands2∈T(GM). Since ℓ(s1)/lessorequalslantℓ(t),
dg(s1)<dg(t),ℓ(s2)/lessorequalslantℓ(t), and dg( s2)<dg(t), by induction hypothesis, there exist
s′
1,s′
2∈rcM(P(M)) such that s1≡RMs′
1ands2≡RMs′
2. To simplify the notations,
let us treat the constant ⋆as an inﬁx operator which associates from right to left. This
Clones of pigmented words 13 / 41 S. Giraudo3 PIGMENTED MONOIDS AND CLONES OF PIGMENTED WORDS — 3.3 Clone realization
means that for any r1, . . . ,rk∈T(GM),k/greaterorequalslant1,r1⋆r2⋆. . .⋆tk−1⋆tkspeciﬁes the GM-term
⋆[r1, ⋆[r2, ⋆[. . . ⋆ [tk−1,tk]. . .]]].By deﬁnition of rcM,s′
1ands′
2decompose respectively
ass′
1= p α1,1/bracketleftbig
xi1,1/bracketrightbig
⋆. . .⋆ pα1,k1/bracketleftbig
xi1,k1/bracketrightbig
⋆u ands′
2= p α2,1/bracketleftbig
xi2,1/bracketrightbig
⋆. . .⋆ pα2,k2/bracketleftbig
xi2,k2/bracketrightbig
⋆u for
some α1,1, . . . , α 1,k1, α2,1, . . . , α 2,k2∈ M ,xi1,1, . . . , xi1,k1,xi2,1, . . . , xi2,k2∈X,k1/greaterorequalslant0,
andk2/greaterorequalslant0. Now, by ( 3.1.1.B ) and ( 3.1.1.C ), we have
t≡RMs′
1⋆s′
2 (3.3.2.D)
=/parenleftbig
pα1,1/bracketleftbig
xi1,1/bracketrightbig
⋆ . . . ⋆ pα1,k1/bracketleftbig
xi1,k1/bracketrightbig
⋆u/parenrightbig
⋆/parenleftbig
pα2,1/bracketleftbig
xi2,1/bracketrightbig
⋆ . . . ⋆ pα2,k2/bracketleftbig
xi2,k2/bracketrightbig
⋆u/parenrightbig
≡RM/parenleftbig
pα1,1/bracketleftbig
xi1,1/bracketrightbig
⋆ . . . ⋆ pα1,k1/bracketleftbig
xi1,k1/bracketrightbig/parenrightbig
⋆/parenleftbig
pα2,1/bracketleftbig
xi2,1/bracketrightbig
⋆ . . . ⋆ pα2,k2/bracketleftbig
xi2,k2/bracketrightbig
⋆u/parenrightbig
≡RMpα1,1/bracketleftbig
xi1,1/bracketrightbig
⋆ . . . ⋆ pα1,k1/bracketleftbig
xi1,k1/bracketrightbig
⋆pα2,1/bracketleftbig
xi2,1/bracketrightbig
⋆ . . . ⋆ pα2,k2/bracketleftbig
xi2,k2/bracketrightbig
⋆u.
By deﬁnition of rcM, the last term of ( 3.3.2.D ) belongs to rcM(P(M)) so that the
stated property is satisﬁed.
/square/square/square
3.3.3 Clone presentation. We use now the tools developed in the previous sections to pro ve
that P(M) is a clone realization of the variety of M-pigmented monoids.
◮Lemma 3.3.3.A — For any monoid Mand any t,t′∈T(GM),frM(t) = frM(t′)implies
t≡RMt′.
◭Proof — Assume that frM(t) =frM(t′). By Lemma 3.3.2.B , there exist p,p′∈P(M) such
thatt≡RMrcM(p) andt′≡RMrcM(p′). By Lemma 3.3.1.B ,frM(t) =frM(rcM(p)) and frM(t′) =
frM(rcM(p′)). By Lemma 3.3.2.A ,frM(t) =pandfrM(t′) =p′. Since frM(t) =frM(t′), we have
p=p′. This shows that t≡RMrcM(p) =rcM(p′)≡RMt′,so thatt≡RMt′. /square/square/square
Here is the main result of the section.
◮Theorem 3.3.3.B — For any monoid M, the clone P(M)is a clone realization of the variety
ofM-pigmented monoids.
◭Proof — By Lemmas 3.3.3.A and 3.3.1.B , for any t,t′∈T(GM),t≡Rt′if and only if
frM(t) = frM(t′). Moreover, by Proposition 3.2.3.A ,GM=intM(GM) is a generating set of
P(M). Therefore, by Proposition 2.3.2.A , these two properties imply that the variety ( GM,RM)
ofM-pigmented monoids is a presentation of P(M). /square/square/square
By Theorem 3.3.3.B , for any monoid M, all algebras over P(M) are M-pigmented monoids.
Since all algebras over the operad T(M) can be seen as specialized versions of M-pigmented
monoids [ Gir15 ], we can see the construction Pas a generalization of the construction Tat the
level of clones.
Let us end this section by giving a tool to establish presenta tions of quotients of P(M).
◮Proposition 3.3.3.C — LetMbe a monoid and R′
Mbe an equivalence relation on T(GM)
containing RM. If≡′is the clone congruence of P(M)generated by frM(t)≡′frM(t′)whenever
t R′
Mt′, then/parenleftbig
GM,R′
M/parenrightbig
is a presentation of the clone P(M)/≡′.
◭Proof — First of all since by Theorem 3.3.3.B ,P(M) admits ( GM,RM) as presentation and
sinceRM⊆R′
M, the clone admitting/parenleftbig
GM,R′
M/parenrightbig
as presentation is a quotient of P(M).
Letθ:P(M)→P(M)/≡′be the canonical projection map. Since ≡R′
Mis the clone
congruence generated by R′
M, by deﬁnition of ≡′, for any t,t′∈T(GM),t≡R′
Mt′is equivalent to
frM(t)≡′frM(t′). This in turn is equivalent to θ(frM(t)) = θ(frM(t′)), which is ﬁnally equivalent
Clones of pigmented words 14 / 41 S. Giraudo4 CONSTRUCTION OF QUOTIENTS —
toevP(M)/≡′(t) =evP(M)/≡′(t′).By Proposition 2.3.2.A , the clone P(M)/≡′admits the stated
presentation. /square/square/square
4 Construction of quotients
The clones P(M) are very large and contain a lot of subclones and quotients w orth investigating.
We present here some tools to construct quotients of P(M) through P-symbols which are here
particular maps from P(M) to itself. Results about the description of the elements of such
quotients are provided. As a direct application, we constru ct in this section the quotients clones
WInc (M),Arra k(M), and InckofP(M).
4.1P-symbols and realizations of quotient clones
Let us present here P-symbols and how to use these to build quotients of P(M).
4.1.1P-symbols and clone congruences. LetMbe a monoid and ≡be an equivalence
relation on P(M) which is not necessarily at this stage a clone congruence. A P-symbol for≡is
a mapP≡:P(M)→P(M) such that
(i) for any p∈P(M),p≡P≡(p);
(ii) for any p,p′∈P(M),p≡p′impliesP≡(p) =P≡(p′).
By extension, given an M-pigmented word p,P≡(p) is the P-symbol ofp. Besides, for any
p∈P(M), by (i),p≡P≡(p), and by (ii), this implies that P≡(p) =P≡(P≡(p)). For this reason,
P≡is idempotent. Moreover, observe that for any p,p′∈P(M), ifP≡(p) =P≡(p′), then by (i),
p≡P≡(p) =P≡(p′)≡p′,which implies p≡p′. Therefore, the converse of (ii)holds.
As it is usually the case in the description of P-symbols, it is always possible to provide an
iterative description of such maps through algorithms by se ttingP(ǫ) := ǫand by computing
P(p.iα) as the insertion of the M-pigmented letter iαinto the M-pigmented word P(p). As a side
remark, most P-symbols appearing in the literature map words to other comb inatorial objects
(like Young tableaux [ Lot02 , Chap. 5], binary trees [ HNT05 ], or pairs of twin binary trees [ Gir12 ]).
Here, our notion of P-symbol is very speciﬁc to our purposes.
In the other direction, given a map P:P(M)→P(M), the ﬁber equivalence relation of
Pis the equivalence relation ≡PonP(M) such that for any p,p′∈P(M),p≡Pp′whenever
P(p) =P(p′).
◮Proposition 4.1.1.A — LetMbe a monoid and P:P(M)→P(M)be a map. If Pis
idempotent, then the map Pis aP-symbol for the ﬁber equivalence relation ≡PofP.
◭Proof — The map Psatisﬁes Condition (ii)immediately by construction of ≡P. Besides,
sincePis idempotent, for any p∈P(M), we have P(p) =P(P(p)) so that p≡pP(p). Therefore,
Condition (i)holds. /square/square/square
◮Proposition 4.1.1.B — LetMbe a monoid, ≡be an equivalence relation on P(M), andP≡
be aP-symbol for ≡. The equivalence relation ≡is a clone congruence of P(M)if and only if for
anyp∈P(M)(n),n/greaterorequalslant0, andp′
1, . . . ,p′
n∈P(M)(m),m/greaterorequalslant0,
p[p′
1, . . . ,p′
n]≡P≡(p)[P≡(p′
1), . . . ,P≡(p′
n)]. (4.1.1.A)
◭Proof — If≡is a clone congruence of P(M), (4.1.1.A ) holds by the fact that since P≡is a
P-symbol for ≡,P≡satisﬁes Condition (i)ofP-symbols.
Clones of pigmented words 15 / 41 S. Giraudo4 CONSTRUCTION OF QUOTIENTS — 4.1 P-symbols and realizations of quotient clones
Conversely, let us assume that ( 4.1.1.A ) holds. Let p∈P(M)(n),q∈P(M)(n),n/greaterorequalslant0, and
p′
1, . . . ,p′
n∈P(M)(m),q′
1, . . . ,q′
n∈P(M)(m),m/greaterorequalslant0, such that p≡qandp′
i≡q′
ifor all
i∈[n]. Therefore, by Condition (ii)ofP-symbols, P≡(p) =P≡(q) andP≡(p′
i) =P≡(q′
i) for all
i∈[n], so that P≡(p)[P≡(p′
1), . . . ,P≡(p′
n)] =P≡(q)[P≡(q′
1), . . . ,P≡(q′
n)].By ( 4.1.1.A ), this implies
thatp[p′
1, . . . ,p′
n]≡q[q′
1, . . . ,q′
n] and shows as expected that ≡is a clone congruence of P(M).
/square/square/square
4.1.2 Realizations of quotient clones. The next result uses P-symbols for clone congru-
ences ≡ofP(M) in order to build realizations of the quotients P(M)/≡.
◮Proposition 4.1.2.A — LetMbe a monoid, ≡be a clone congruence of P(M), andP≡be a
P-symbol for ≡. The clone P(M)/≡is isomorphic to the clone on P≡(P(M))with superposition
maps deﬁned, for any p∈P≡(P(M))(n),n/greaterorequalslant0, andp′
1, . . . ,p′
n∈P≡(P(M))(m),m/greaterorequalslant0, by
p[p′
1, . . . ,p′
n] :=P≡(p[p′
1, . . . ,p′
n]), (4.1.2.A)
where the superposition map of the right-hand side of (4.1.2.A )is the one of P(M).
◭Proof — This is a direct consequence of the fact that by (i)and(ii),P≡sends each p∈
P(M) to the representative of its ≡-equivalence class and thus, that P≡(P(M)) is a system of
representatives of the quotient graded set P(M)/≡. /square/square/square
4.1.3 Composition of P-symbols. Let us focus now on the compositions of P-symbols and
on the properties of the resulting maps.
◮Proposition 4.1.3.A — LetMbe a monoid, ≡1and≡2be two clone congruences of P(M),
andP≡1andP≡2be twoP-symbols, respectively for ≡1and≡2. IfP≡1andP≡2commute for the
composition of maps, then by setting P12as the map P≡1◦P≡2=P≡2◦P≡1and≡as the ﬁber
equivalence relation of P12,
(i) the map P12is aP-symbol for ≡;
(ii) the equivalence relation ≡is a clone congruence of P(M);
(iii) the clone P(M)/≡is a quotient of both P(M)/≡1andP(M)/≡2.
◭Proof — In this proof, in order to lighten the notation, for any word w∈[2]∗, we denote by
Pwthe map P≡w(1)◦ · · · ◦P≡w(ℓ(w)).
Let us ﬁrst show (i). SinceP1andP2areP-symbols, they are idempotent. Moreover, by
hypothesis, they commute for the composition of maps. Thus, for anyp∈P(M), we have
P12(P12(p)) =P1212(p) =P1122(p) =P12(p).Therefore, P12is idempotent, implying by Proposi-
tion 4.1.1.A thatP12is aP-symbol for ≡.
Let us prove (ii). SinceP1andP2are respectively P-symbols for the congruences ≡1and≡2
ofP(M), andP1andP2commute for the composition of maps, by Proposition 4.1.1.B , for any
p∈P(M)(n),n/greaterorequalslant0, andp′
1, . . . ,p′
n∈P(M)(m),m/greaterorequalslant0, we have
P12(p[p′
1, . . .p′
n]) =P12(P2(p)[P2(p′
1), . . . ,P2(p′
n)]) ( 4.1.3.A)
=P21(P2(p)[P2(p′
1), . . . ,P2(p′
n)])
=P21(P12(p)[P12(p′
1), . . . ,P12(p′
n)])
=P12(P12(p)[P12(p′
1), . . . ,P12(p′
n)]).
By Proposition 4.1.1.B ,≡is a clone congruence of P(M).
Clones of pigmented words 16 / 41 S. Giraudo4 CONSTRUCTION OF QUOTIENTS — 4.2 Congruences of the clone of pigmented words
To show (iii), letp,p′∈P(M)(n),n/greaterorequalslant0, such that p≡1p′. SinceP1is aP-symbol for
≡1, we have P1(p) =P1(p′), so that P21(p) =P21(p′). Since P1andP2commute, this shows
thatP12(p) =P12(p′). Hence, we have p≡p′. The same argument shows that p≡2p′implies
p≡p′. Therefore, as equivalence relations, ≡is coarser than both ≡1and≡2. By (ii),≡is a
clone congruence of P(M) so that P(M)/≡is a well-deﬁned quotient of P(M). The statement
follows. /square/square/square
4.2 Congruences of the clone of pigmented words
Two maps sort/precedesorcurlyandﬁrst kfrom P(M) toP(M) are introduced. These maps and some of their
compositions lead through their ﬁber equivalence relation s to clone congruences of P(M).
In this section, Mis any monoid but in order to give concrete examples here, we s hall
consider Mas the free monoid ( A∗, ., ǫ) where Ais the alphabet {a, b, c }.
4.2.1 Reversions of congruences. We start by introducing an involutive transformation
on clone congruences of P(M). For any clone congruence ≡ofP(M), the reversion of≡is the
equivalence relation ≡ronP(M) satisfying, for any p,p′∈P(M),p≡rp′if r(p)≡r(p′).
◮Proposition 4.2.1.A — LetMbe a monoid. If ≡is a clone congruence of P(M), then
(i) the equivalence relation ≡ris a clone congruence of P(M);
(ii) the map r :P(M)/≡→P(M)/≡ris a clone isomorphism.
◭Proof — Letp,q∈P(M)(n),n/greaterorequalslant0, andp′
1, . . . ,p′
n,q′
1, . . . ,q′
n∈P(M)(m),m/greaterorequalslant0, such
thatp≡rqandp′
i≡rq′
ifor all i∈[n]. By deﬁnition of ≡rand since r is an involution, we have
r(p)≡r(q) and r(p′
i)≡r(q′
i) for all i∈[n]. Now, since ≡is a clone of congruence of P(M),
r(p)[r(p′
1), . . . , r(p′
n)]≡r(q)[r(q′
1), . . . , r(q′
n)]. (4.2.1.A)
This implies, since by Proposition 3.2.3.B , r is a clone isomorphism of P(M), that
r(p[p′
1, . . . ,p′
n])≡r(q[q′
1, . . . ,q′
n]). (4.2.1.B)
Therefore, by deﬁnition of ≡r, this shows that p[p′
1, . . . ,p′
n] is≡r-equivalent to q[q′
1, . . . ,q′
n], es-
tablishing (i).
To prove (ii), observe ﬁrst that since r is an involution of P(M), by deﬁnition of ≡r, for any
p∈P(M),
r([p]≡) ={r(p′) :p≡p′}={r(p′) : r(p)≡rr(p′)}={p′: r(p)≡rp′}= [r(p)]≡r. (4.2.1.C)
Therefore, the map r from P(M)/≡toP(M)/≡ris well-deﬁned and is bijective. Now, by using
consecutively the fact that ≡is a clone congruence of P(M), Relation ( 4.2.1.C ), the fact that
by Proposition 3.2.3.B , r is an endomorphism of P(M), and the fact that by (i),≡ris a clone
congruence of P(M), for any p∈P(M)(n),n/greaterorequalslant0, andp′
1, . . . ,p′
n∈P(M)(m),m/greaterorequalslant0, we have
r([p]≡[[p′
1]≡, . . . , [p′
n]≡]) = r([p[p′
1, . . . ,p′
n]]≡) ( 4.2.1.D)
= [r(p[p′
1, . . . ,p′
n])]≡r
= [r(p)[r(p′
1), . . . , r(p′
n)]]≡r
= [r(p)]≡r[[r(p′
1)]≡r, . . . , [r(p′
n)]≡r].
Observe also that, by denoting by e the unit of M, for any ie∈P(M)(n),n/greaterorequalslant1,i∈[n],
r([ie]≡) = [ie]≡r. Therefore, r is a clone isomorphism from P(M)/≡toP(M)/≡r. /square/square/square
Clones of pigmented words 17 / 41 S. Giraudo4 CONSTRUCTION OF QUOTIENTS — 4.2 Congruences of the clone of pigmented words
For any clone C:=P(M)/≡where ≡is a clone congruence of P(M), we denote by Crthe
clone P(M)/≡r. This clone is, by Proposition 4.2.1.A , well-deﬁned and isomorphic to C.
4.2.2 Sorting congruence. For any total order relation /precedesorcurlyonM, letsort/precedesorcurly:P(M)→P(M)
be the map sending any p∈P(M) to the M-pigmented word obtained by rearranging the values
ofpin weakly increasing way w.r.t. the total order relation /precedesorcurly/precedesorcurly/precedesorcurlyon the set of the M-pigmented
letters satisfying iα1
1/precedesorcurly/precedesorcurly/precedesorcurlyiα2
2ifi1< i2, ori1=i2andα1/precedesorcurlyα2. For instance, in P(A∗), where /precedesorcurlyis
the lexicographic order on A∗satisfying a/precedesorcurlyb/precedesorcurlyc, we have
sort/precedesorcurly/parenleftbig
3ǫ1b3a1a4ab2b3ǫ1ǫ/parenrightbig
= 1ǫ1a1b2b3ǫ3ǫ3a4ab. (4.2.2.A)
Let≡sort/precedesorcurlybe the ﬁber equivalence relation of sort/precedesorcurly. By Proposition 4.1.1.A , since sort/precedesorcurlyis idempo-
tent, sort/precedesorcurlyis aP-symbol for ≡sort/precedesorcurly. Observe moreover that for any total order relations /precedesorcurlyand/precedesorcurly′
onMand any p,p′∈P(M), we have p≡sort/precedesorcurlyp′if and only if p≡sort/precedesorcurly′p′. For this reason, the
equivalence relation ≡sort/precedesorcurlydoes not depend on the total order relation /precedesorcurly. Therefore, we denote
simply by ≡sortthis equivalence relation.
◮Proposition 4.2.2.A — For any monoid M, the equivalence relation ≡sortis a clone congruence
ofP(M).
◭Proof — Let/precedesorcurlybe any total order relation on Mandp∈P(M). For any iα∈ L M,p
andsort/precedesorcurly(p) admit the same number of occurrences of iα. For this reason and by the deﬁnition
of the superposition maps of P(M), theP-symbol sort/precedesorcurlyfor≡sortsatisﬁes the prerequisites of
Proposition 4.1.1.B . This implies the statement of the proposition. /square/square/square
4.2.3 First occurrences congruence. For any k/greaterorequalslant0 and any p∈P(M), a position
j∈[ℓ(p)] is a leftk-witness ofpif inp(1, j−1), there are at most k−1M-pigmented letters
having as value the one of p(j). Similarly, a position j∈[ℓ(p)] is a right k-witness ofpif in
p(j+ 1, ℓ(p)), there are at most k−1M-pigmented letters having as value the one of p(j).
We shall highlight these properties by putting a segment wit h a circle on the left (resp. right)
under each M-pigmented letter such that its position is a left (resp. rig ht)k-witness. In the
opposite case, we shall put a cross on the left (resp. right) e dge of the segment to highlight the
fact that this position is not a left (resp. right) k-witness when it is the case. For instance, by
settingp:= 2aa2b3a1a3ba2b3ǫ,the left and right 1-witnesses of pare highlighted as
2aa
×2b
××3a
×1a3ba
××2b
×3ǫ
×(4.2.3.A)
and the left and right 2-witnesses of pare highlighted as
2aa
×2b3a
×1a3ba2b
×3ǫ
×. (4.2.3.B)
Moreover, a left (resp. right) edge of a segment having neith er a circle nor a cross speciﬁes the
fact that the status of this position is unknown. For instanc e, for a ﬁxed k/greaterorequalslant0, the notation
p1.1ba.p2.1ab
×1b.p3 (4.2.3.C)
wherep1,p2, andp3are some A∗-pigmented words speciﬁes an A∗-pigmented word such that
the position of the shown M-pigmented letter 1bais a left k-witness and may or may not be a
right k-witness, that the position of the shown M-pigmented letter 1abmay or may not be a left
k-witness and is not a right k-witness, and that the position of the shown M-pigmented letter 1b
may or may not be a left k-witness and is a right k-witness.
Clones of pigmented words 18 / 41 S. Giraudo4 CONSTRUCTION OF QUOTIENTS — 4.2 Congruences of the clone of pigmented words
Now, let ﬁrst k:P(M)→P(M) be the map sending any p∈P(M) to the M-pigmented
word deﬁned as the subword of pconsisting in the letters whose positions are left k-witnesses.
For instance,
ﬁrst 1/parenleftBig
1ǫ3ab1b
×3b
×1aa
×3ǫ
×2aa3bba
×/parenrightBig
=1ǫ3ab2aa, (4.2.3.D)
ﬁrst 2/parenleftBig
1ǫ3ab1b3b1aa
×3ǫ
×2aa3bba
×/parenrightBig
=1ǫ3ab1b3b2aa. (4.2.3.E)
Let≡ﬁrst kbe the ﬁber equivalence relation of ﬁrst k. By Proposition 4.1.1.A , since ﬁrst kis idempo-
tent, ﬁrst kis aP-symbol for ≡ﬁrst k.
Observe that for any 0 /lessorequalslantk/lessorequalslantk′and anyp,p′∈P(M),p≡ﬁrstk′p′impliesp≡ﬁrst kp′. Hence,
the equivalence relation ≡ﬁrstk′is a reﬁnement of ≡ﬁrst k.
◮Proposition 4.2.3.A — For any monoid Mand any k/greaterorequalslant0, the equivalence relation ≡ﬁrst kis a
clone congruence of P(M).
◭Proof — From the deﬁnitions of ﬁrst kand of the superposition maps of P(M), for any
p∈P(M)(n),n/greaterorequalslant0, andp1, . . . ,pn∈P(M)(m),m/greaterorequalslant0, we have
ﬁrst k(p[p1, . . . ,pn]) =ﬁrst k(ﬁrst k(p)[p1, . . . ,pn]) ( 4.2.3.F)
and, for any j∈[n],
ﬁrst k(p[p1, . . . ,pn]) =ﬁrst k(p[p1, . . . ,pj−1,ﬁrst k(pj),pj+1, . . . ,pn]). (4.2.3.G)
These two properties imply that the P-symbol ﬁrst kfor≡ﬁrst ksatisﬁes the prerequisites of Propo-
sition 4.1.1.B . This establishes the statement of the proposition. /square/square/square
For any k/greaterorequalslant0, let us denote by ﬁrstr
k:P(M)→P(M) the map deﬁned for any p∈P(M) by
ﬁrstr
k(p) := r( ﬁrst k(r(p))). In this way, for any p∈P(M),ﬁrstr
k(p) is the subword of pconsisting
in the letters whose positions are right k-witnesses. It is straightforward to prove that ﬁrstr
kis
idempotent and that the ﬁber equivalence relation of ﬁrstr
kis the equivalence relation ≡r
ﬁrst k. By
Propositions 4.2.3.A and 4.2.1.A ,≡r
ﬁrst kis a clone congruence of P(M).
4.2.4 Compositions. We consider here some compositions of the maps sort/precedesorcurly,ﬁrst k, and ﬁrstr
k′,
k, k′/greaterorequalslant0. Directly from the deﬁnition of the map ﬁrst k, for any k, k′/greaterorequalslant0,ﬁrst k◦ﬁrst k′=
ﬁrst min{k,k′}. Moreover, for any k, k′/greaterorequalslant0 such that k/lessorequalslantk′,ﬁrst k′◦ﬁrstr
k=ﬁrstr
kandﬁrstr
k′◦ﬁrst k=
ﬁrst k. Observe also that the maps ﬁrst kandﬁrst k′,k, k′/greaterorequalslant0 do not commute. Indeed, in P(E),
we have
ﬁrst 1(ﬁrstr
2(2e1e2e1e2e)) = 1e2e/\e}a⊔io\slash= 2e1e=ﬁrstr
2(ﬁrst 1(2e1e2e1e2e)). (4.2.4.A)
◮Proposition 4.2.4.A — For any monoid M, any k/greaterorequalslant0, and any total order relation /precedesorcurlyonM,
the maps sort/precedesorcurlyandﬁrst konP(M)commute if and only if Mis the trivial monoid E.
◭Proof — Letp∈P(E)(n),n/greaterorequalslant0. By deﬁnition of sortand of ﬁrst k,sort/precedesorcurly(ﬁrst k(p)) is the
E-pigmented word qsuch that for any j∈[ℓ(q)−1],q(j)/precedesorcurly/precedesorcurly/precedesorcurlyq(j+ 1), and for any ie∈ L E,qhas
exactly min {|p|ie, k}occurrences of ie. Since ﬁrst k(sort/precedesorcurly(p)) satisﬁes the same property, we have
sort/precedesorcurly(ﬁrst k(p)) = ﬁrst k(sort/precedesorcurly(p)).
Conversely, assume that Mis not trivial. Thus, Mcontains two distinct elements α1andα2.
By considering without loss of generality that α1/precedesorcurlyα2, we have in particular sort/precedesorcurly(ﬁrst 1(1α21α1)) =
1α2/\e}a⊔io\slash= 1α1=ﬁrst 1(sort/precedesorcurly(1α21α1)).This shows that sort/precedesorcurlyandﬁrst kdo not commute. /square/square/square
Clones of pigmented words 19 / 41 S. Giraudo4 CONSTRUCTION OF QUOTIENTS — 4.3 Three simple quotients
4.3 Three simple quotients
We use the clone congruences introduced in the previous sect ion to build three quotients WInc (M),
Arra k(M), and InckofP(M). Each of these clones admits ﬁnitely related presentation s: the ﬁrst
clone is a clone realization of a generalization of the varie ty of commutative monoids, the second
one is a clone realization of a generalization of the variety of left-regular bands, and the last one
is a clone realization of a generalization of the variety of b ounded semilattices.
4.3.1 On pigmented weakly increasing words. Let
WInc (M) :=P(M)/≡sort. (4.3.1.A)
By Proposition 4.2.2.A ,WInc (M) is a well-deﬁned quotient clone of P(M).
Since sort/precedesorcurlyis aP-symbol for ≡sortwhere/precedesorcurlyis any total order relation on M,WInc (M)
admits as realization the clone described by Proposition 4.1.2.A . Hence, by deﬁnition of sort/precedesorcurly,
WInc (M) is a clone on the graded set of weakly/precedesorcurly-increasing M-pigmented words, which are the
M-pigmented words psuch that, for any j∈[ℓ(p)−1],p(j)/precedesorcurly/precedesorcurly/precedesorcurlyp(j+1). Equivalently, the elements
ofWInc (M) can be seen as multisets of M-pigmented letters. For instance, in WInc (A∗), we have
2ab3ǫ3a4b4b/bracketleftbig
1ab2ba,1b2ba3ǫ3b,1ǫ2b,3b/bracketrightbig
=sort/precedesorcurly/parenleftbig
1abb2abba3ab3abb1ǫ2b1a2ab3bb3bb/parenrightbig
(4.3.1.B)
= 1ǫ1a1abb2ab2abba2b3ab3abb3bb3bb.
Besides, the clone WInc (M) is not combinatorial because {ǫ,1e,1e1e, . . .} ⊆WInc (M)(1) where
e is the unit of M.
◮Proposition 4.3.1.A — For any monoid M, the clone WInc (M)admits the presentation/parenleftbig
GM,R′
M/parenrightbig
whereR′
Mis the set RMaugmented with the GM-equation
rcM(1e2e)R′
MrcM(2e1e) ( 4.3.1.C)
where eis the unit of M.
◭Proof — Let≡′be the clone congruence of P(M) generated by
1e2e≡′2e1e. (4.3.1.D)
Let us show that the clone congruences ≡′and≡sortofP(M) are equal. This will imply, by
Proposition 3.3.3.C , that WInc (M) admits the stated presentation.
For this, let us introduce some intermediate binary relatio ns on P(M). Let/precedesorcurlybe any total
order on Mand/leadstobe the binary relation on P(M) satisfying
p.iα1
1iα2
2.p′/leadstop.iα2
2iα1
1.p′ifiα1
1/\e}a⊔io\slash=iα2
2andiα2
2/precedesorcurly/precedesorcurly/precedesorcurlyiα1
1, (4.3.1.E)
wherep,p′∈P(M) and iα1
1, iα2
2∈ L M. Let ∼be the reﬂexive, symmetric, and transitive closure
of/leadstoand let us show that ∼is equal to ≡sort. First, observe that directly from the deﬁnition of
/leadsto, for any r,r′∈P(M),r/leadstor′implies sort/precedesorcurly(r) =sort/precedesorcurly(r′). Hence, we have r≡sortr′, and since
∼is the smallest equivalence relation containing /leadsto,r∼r′impliesr≡sortr′. Conversely, assume
thatr≡sortr′forr,r′∈P(M). By deﬁnition of sort/precedesorcurly, for any q∈P(M), the process consisting
in swapping iteratively and as long as possible two adjacent M-pigmented letters iα1
1andiα2
2of
qsuch that iα1
1/\e}a⊔io\slash=iα2
2andiα2
2/precedesorcurly/precedesorcurly/precedesorcurlyiα1
1ﬁnally produces the M-pigmented word sort/precedesorcurly(q). Moreover,
observe that by deﬁnition of /leadsto, for any q′,q′′∈P(M), the property q′/leadstoq′′is equivalent to
the fact that q′′is obtained from q′by swapping two adjacent M-pigmented letters iα1
1andiα2
2
Clones of pigmented words 20 / 41 S. Giraudo4 CONSTRUCTION OF QUOTIENTS — 4.3 Three simple quotients
such that iα1
1/\e}a⊔io\slash=iα2
2andiα2
2/precedesorcurly/precedesorcurly/precedesorcurlyiα1
1. Due to the fact that ∼is the smallest equivalence relation
containing /leadsto,r∼r′holds.
Now, let us show that ≡′is equal to ∼. First, since the left-hand and the right-hand sides
of ( 4.3.1.D ) are ∼-equivalent, ≡′is contained into ∼. Conversely, for any p,p′∈P(M) and
iα1
1, iα2
2∈ L M, we have
p.iα1
1iα2
2.p′= 1e2e3e[p,1e2e[iα1
1iα2
2],p′]≡′1e2e3e[p,2e1e[iα1
1iα2
2],p′] =p.iα2
2iα1
1.p′. (4.3.1.F)
This shows that for any r,r′∈P(M),r/leadstor′impliesr≡′r′. Since ∼is the smallest equivalence
relation containing /leadsto,∼is contained into ≡′. This establishes the statement of the proposition.
/square/square/square
By Proposition 4.3.1.A , any WInc (M)-algebra is an M-pigmented monoid ( A, ⋆,u,pα) where ⋆
is commutative. In particular, WInc (E) is a clone realization of the variety of commutative
monoids.
4.3.2 On pigmented arrangements. For any k/greaterorequalslant0, let
Arra k(M) :=P(M)/≡ﬁrstk. (4.3.2.A)
By Proposition 4.2.3.A ,Arra k(M) is a well-deﬁned quotient clone of P(M). Since for any 0 /lessorequalslantk/lessorequalslant
k′,≡ﬁrstk′is a reﬁnement of ≡ﬁrst k,Arra k(M) is a quotient of Arra k′(M). Moreover, since ≡ﬁrst 0
is the coarsest clone congruence of P(M),Arra 0(M) is the trivial clone T. Besides, the clone
Arrar
k(M) :=Arra k(M)ris by Proposition 4.2.1.A isomorphic to Arra k(M).
Since ﬁrst kis aP-symbol for ≡ﬁrst k,Arra k(M) admits as realization the clone described by
Proposition 4.1.2.A . Hence, by deﬁnition of ﬁrst k,Arra k(M) is a clone on the graded set of M-
pigmented arrangements , which are the M-pigmented words psuch that for any value i, there
are at most kM-pigmented letters of phaving ias value. For instance, in Arra 1(A∗),
2ǫ3aa1b4ca/bracketleftbig
3ǫ1a,2bb,2b1a3a,1c2c/bracketrightbig
=ﬁrst 1/parenleftbig
2bb2aab1aaa3aaa3b1ba1cac2cac/parenrightbig
(4.3.2.B)
= 2bb1aaa3aaa,
and in Arra 2(A∗),
2ǫ3aa1b4ca/bracketleftbig
3ǫ1a,2bb,2b1a3a,1c2c/bracketrightbig
=ﬁrst 2/parenleftbig
2bb2aab1aaa3aaa3b1ba1cac2cac/parenrightbig
(4.3.2.C)
= 2bb2aab1aaa3aaa3b1ba.
Besides, when Mis ﬁnite, Arra k(M) is combinatorial and for any n/greaterorequalslant0,
#Arra k(M)(n) =/summationdisplay
u∈/llbracketk]n(u(1) + · · ·+u(n))!
u(1)!. . . u(n)!(#M)u(1)+ ···+u(n)(4.3.2.D)
In particular, we have
#Arra 1(M)(n) =/summationdisplay
i∈/llbracketn]/parenleftbiggn
i/parenrightbigg
i!(#M)i. (4.3.2.E)
The sequences of dimensions of Arra k(E) for k∈/llbracket2] start by
1,1,1,1,1,1,1,1,1, k = 0, (4.3.2.F)
1,2,5,16,65,326,1957,13700 ,109601 , k = 1, (4.3.2.G)
1,3,19,271,7365,326011 ,21295783 ,1924223799 ,229714292041 , k = 2. (4.3.2.H)
The second and third ones are respectively Sequences A000522 andA003011 of [Slo].
Clones of pigmented words 21 / 41 S. Giraudo4 CONSTRUCTION OF QUOTIENTS — 4.3 Three simple quotients
◮Proposition 4.3.2.A — For any monoid Mand any k/greaterorequalslant0, the clone Arra k(M)admits the
presentation/parenleftbig
GM,R′
M/parenrightbig
whereR′
Mis the set RMaugmented with the GM-equation
rcM(1α12e1α23e. . .1αk(k+ 1)e1αk+1)R′
MrcM(1α12e1α23e. . .1αk(k+ 1)e) ( 4.3.2.I)
with α1, α2, . . . , α k, αk+1∈ M where eis the unit of M.
◭Proof — Let≡′be the clone congruence of P(M) generated by
1α12e1α23e. . .1αk(k+ 1)e1αk+1≡′1α12e1α23e. . .1αk(k+ 1)e(4.3.2.J)
with α1, α2, . . . , α k, αk+1∈ M . Let us show that the clone congruences ≡′and≡ﬁrst kofP(M)
are equal. This will imply, by Proposition 3.3.3.C , that Arra k(M) admits the stated presentation.
For this, let us introduce some intermediate binary relatio ns on P(M). Let/leadstobe the binary
relation on P(M) satisfying
p.iα1.q1.iα2.q2. . . . .iαk.qk.iαk+1.p′/leadstop.iα1.q1.iα2.q2. . . . .iαk.qk.p′(4.3.2.K)
wherep,q1,q2, . . . ,qk,p′∈P(M) and iα1, iα2, . . . , iαk, iαk+1∈ L M. Let ∼be the reﬂexive,
symmetric, and transitive closure of /leadstoand let us show that ∼is equal to ≡ﬁrst k. First, observe
that directly from the deﬁnition of /leadsto, for any r,r′∈P(M),r/leadstor′implies ﬁrst k(r) =ﬁrst k(r′).
Hence, we have r≡ﬁrst kr′, and since ∼is the smallest equivalence relation containing /leadsto,r∼r′
impliesr≡ﬁrst kr′. Conversely, assume that r≡ﬁrst kr′forr,r′∈P(M). By deﬁnition of ﬁrst k, for
anyq∈P(M), the process consisting in deleting iteratively and as lon g as possible each letter
ofqwhich is not a left k-witness ﬁnally produces the M-pigmented word ﬁrst k(q). Moreover,
observe that by deﬁnition of /leadsto, for any q′,q′′∈P(M), the property q′/leadstoq′′is equivalent to the
fact that q′′is obtained from q′by deleting a letter which is not a left k-witness. Due to the fact
that ∼is the smallest equivalence relation containing /leadsto,r∼r′holds.
Now, let us show that ≡′is equal to ∼. First, since the left-hand and right-hand sides
of (4.3.2.J ) are ∼-equivalent, ≡′is contained into ∼. Conversely, for any p,q1,q2, . . . ,qk,p′∈P(M)
andiα1, iα2, . . . , iαk, iαk+1∈ L M, we have
p.iα1.q1.iα2.q2. . . . .iαk.qk.iαk+1.p′(4.3.2.L)
= 1e2e3e[p,1α12e1α23e. . .1αk(k+ 1)e1αk+1[ie,q1,q2, . . . ,qk],p′]
≡′1e2e3e[p,1α12e1α23e. . .1αk(k+ 1)e[ie,q1,q2, . . . ,qk],p′]
=p.iα1.q1.iα2.q2. . . . .iαk.qk.p′.
This shows that for any r,r′∈P(M),r/leadstor′impliesr≡′r′. Since ∼is the smallest equivalence
relation containing /leadsto,∼is contained into ≡′. This establishes the statement of the proposition.
/square/square/square
By Proposition 4.3.2.A , any Arra k(M)-algebra is an M-pigmented monoid ( A, ⋆,u,pα) where ⋆
and p αsatisfy
pα1(x1)⋆ x2⋆pα2(x1)⋆ x3⋆· · ·⋆pαk(x1)⋆ xk+1⋆pαk+1(x1) ( 4.3.2.M)
= p α1(x1)⋆ x2⋆pα2(x1)⋆ x3⋆· · ·⋆pαk(x1)⋆ xk+1
for any x1, . . . , x k+1∈ Aandα1, . . . , α k, αk+1∈ M . In particular, Arra 1(E) is a clone realization
of the variety of left-regular bands, that are monoids ( A, ⋆,u) such that ⋆satisﬁes x1⋆ x2⋆ x1=
x1⋆ x2for any x1, x2∈ A.
Clones of pigmented words 22 / 41 S. Giraudo4 CONSTRUCTION OF QUOTIENTS — 4.3 Three simple quotients
4.3.3 On increasing monochrome words. Let us denote by /precedesorcurlybe the unique order relation
on the trivial monoid E. By Proposition 4.2.2.A (resp. 4.2.3.A ),≡sort(resp. ≡ﬁrst k) is a clone
congruence of P(E) and sort/precedesorcurly(resp. ﬁrst k) is aP-symbol for ≡sort(resp. ≡ﬁrst k). Therefore, by
Propositions 4.2.4.A and 4.1.3.A , the map φk:=sort/precedesorcurly◦ﬁrst k=ﬁrst k◦sort/precedesorcurlyis aP-symbol for the
ﬁber equivalence relation ≡φkofφkand≡φkis a clone congruence of P(E).
For any k/greaterorequalslant0, let
Inck:=P(E)/≡φk. (4.3.3.A)
For the previous reasons, Inckis a well-deﬁned quotient of P(M). Moreover, since for any
0/lessorequalslantk/lessorequalslantk′and any p,p′∈P(E),p≡φk′p′impliesp≡φkp′, the equivalence relation ≡φk′is a
reﬁnement of ≡φk. Therefore, Inckis a quotient of Inck′. Besides, since ≡φ0is the coarsest clone
congruence of P(E),Inc0is the trivial clone T.
Since φkis aP-symbol for ≡φk,Inckadmits the realization described by Proposition 4.1.2.A .
Hence, by deﬁnition of φk,Inckis a clone on the set of monochrome k-increasing words , which
are the E-pigmented words psuch that pare weakly /precedesorcurly-increasing and for any value i,phave at
most koccurrences of ie. Equivalently, the elements of Inckcan be seen as multisets of positive
integers where each element has multiplicity at most k. For instance, in Inc1,
1e3e[2e4e,1e3e4e,2e] = 2e4e, (4.3.3.B)
and in Inc2,
1e3e[2e4e,1e3e4e,2e] = 2e2e4e. (4.3.3.C)
Besides, Inckis combinatorial and for any n/greaterorequalslant0, #Inck(n) = ( k+ 1)n.
The clone Inckis not parameterized by a monoid since, as shown by Propositi on4.2.4.A ,≡φk
is a clone congruence of P(M) only when M=E.
◮Proposition 4.3.3.A — For any k/greaterorequalslant0, the clone Inckadmits the presentation/parenleftbig
GE,R′
E/parenrightbig
where
R′
Eis the set REaugmented with the GE-equations
rcM(1e2e)R′
ErcM(2e1e), (4.3.3.D)
rcM/parenleftBig
(1e)k+1/parenrightBig
R′
ErcM/parenleftBig
(1e)k/parenrightBig
(4.3.3.E)
where eis the unique element of E.
◭Proof — Let≡′be the clone congruence of P(E) generated by
1e2e≡′2e1e, (4.3.3.F)
(1e)k+1≡′(1e)k. (4.3.3.G)
Let us show that the clone congruences ≡′and≡φkofP(E) are equal. This will imply, by
Proposition 3.3.3.C , that Inckadmits the stated presentation.
For this, let us introduce some intermediate binary relatio ns on P(E). Let/leadstobe the binary
relation on P(E) satisfying
p.ie
1ie
2.p′/leadstop.ie
2ie
1.p′ifi2< i1, (4.3.3.H)
p.(ie)k+1.p′/leadstop.(ie)k.p′, (4.3.3.I)
wherep,p′∈P(E) and ie, ie
1, ie
2∈ L E. Let ∼be the reﬂexive, symmetric, and transitive closure
of/leadstoand let us show that ∼is equal to ≡φk. First, observe that directly from the deﬁnition of
Clones of pigmented words 23 / 41 S. Giraudo5 A HIERARCHY OF CLONES —
/leadsto, for any r,r′∈P(E),r/leadstor′implies φk(r) =φk(r′). Hence, we have r≡φkr′, and since ∼
is the smallest equivalence relation containing /leadsto,r∼r′impliesr≡φkr′. Conversely, assume
thatr≡φkr′forr,r′∈P(E). By deﬁnition of φk, for any q∈P(M), the process consisting in
swapping iteratively and as long as possible two adjacent E-pigmented letters ie
1andie
2ofqsuch
that i2< i1and then by deleting iteratively and as long as possible each E-pigmented letter ie
having on its left koccurrences of ieﬁnally produces the E-pigmented word φk(q). Moreover,
observe that by deﬁnition of /leadsto, for any q′,q′′∈P(E), the property q′/leadstoq′′is equivalent to the
fact that q′′is obtained from q′swapping two adjacent E-pigmented letters ie
1andie
2such that
i2< i1or by deleting iteratively each E-pigmented letter iehaving on its left koccurrences of ie.
Due to the fact that ∼is the smallest equivalence relation containing /leadsto,r∼r′holds.
Now, let us show that ≡′is equal to ∼. First, since the left-hand and right-hand sides
of (4.3.3.F ) (resp. ( 4.3.3.G )) are ∼-equivalent, ≡′is contained into ∼. Conversely, for any p,p′∈
P(E) and ie, ie
1, ie
2∈ L E, we have
p.ie
1ie
2.p′= 1e2e3e[p,1e2e[ie
1, ie
2],p′]≡′1e2e3e[p,2e1e[ie
1, ie
2],p′] =p.ie
2ie
1.p′(4.3.3.J)
and
p.(ie)kie.p′= 1e2e3e/bracketleftBig
p,(1e)k1e[ie],p′/bracketrightBig
≡′1e2e3e/bracketleftBig
p,(1e)k[ie],p′/bracketrightBig
=p.(ie)k.p′. (4.3.3.K)
This shows that for any r,r′∈P(E),r/leadstor′impliesr≡′r′. Since ∼is the smallest equivalence
relation containing /leadsto,∼is contained into ≡′. This establishes the statement of the proposition.
/square/square/square
By Proposition 4.3.3.A , any Inck-algebra is a monoid ( A, ⋆,u) where ⋆is commutative and
satisﬁes
x1⋆· · ·⋆ x1/bracehtipupleft/bracehtipdownright/bracehtipdownleft /bracehtipupright
k+1=x1⋆· · ·⋆ x1/bracehtipupleft/bracehtipdownright/bracehtipdownleft /bracehtipupright
k. (4.3.3.L)
In particular, Inc1is a clone realization of the variety of meet-semilattices a dmitting a greatest
element (also known as bounded semilattices).
5 A hierarchy of clones
We use the construction Pand intersections of the clone congruences ≡sort,≡ﬁrst k, and ≡ﬁrstr
k′
introduced in the previous section to build a hierarchy of cl ones quotients of P(M). Figure 1
contains the full diagram the constructed clones. The clone s located on the bottom three lines
of the diagram have been constructed and studied in Section 4. The clones constructed in the
following sections are clone realizations of varieties gen eralizing some special classes of monoids,
including regular bands. These structures allow us to solve the word problem in the corresponding
varieties. The algorithms are described in terms of P-symbols and are similar to the ones solving
the word problem in idempotent semigroups by using conditio nal string rewrite systems [ SS82 ;
NS00 ].
In this section, Mis a (ﬁnite or inﬁnite) monoid endowed a total order relation /precedesorcurly. To give
concrete examples, we shall consider Mas the free monoid ( A∗, ., ǫ) where Ais the alphabet
{a, b, c }and/precedesorcurlyis the lexicographic order on A∗satisfying a/precedesorcurlyb/precedesorcurlyc.
5.1 On pigmented magnets
By considering the intersection of the clone congruences ≡ﬁrst k,k/greaterorequalslant0, and their reversions ≡r
ﬁrstk′,
k′/greaterorequalslant0, we construct a quotient clone Magnk,k′(M) ofP(M). This clone is studied in detail
Clones of pigmented words 24 / 41 S. Giraudo5 A HIERARCHY OF CLONES — 5.1 On pigmented magnets
P(M)
Pillk,k′(M)
Magnk,k′(M) Stal k(M) Stalr
k′(M)
WInc (M) Arra k(M) Arrar
k′(M)
Incmin{k,k′}
Inc0
Figure 1: The full diagram of the considered quotients of the clone P(M) where Mis a monoid and k, k′/greaterorequalslant0.
The arrows are clone surjections.
for the case k= 1 = k′. A realization through new combinatorial objects named M-pigmented
magnets is introduced and a ﬁnitely related presentation is described. The algebras over this clone
are generalizations of regular bands. These results are bas ed on the introduction of a P-symbol
for the underlying equivalence relation.
5.1.1 Clone construction. For any k, k′/greaterorequalslant0, let ≡k,k′be the equivalence relation ≡ﬁrst k
∩ ≡r
ﬁrstk′and
Magnk,k′(M) :=P(M)/≡k,k′. (5.1.1.A)
By Propositions 4.2.3.A and 4.2.1.A ,Magnk,k′(M) is a well-deﬁned clone, and Arra k(M) and
Arrar
k′(M) are both quotients of Magnk,k′. Since for any 0 /lessorequalslantk/lessorequalslantk′′and 0/lessorequalslantk′/lessorequalslantk′′′,≡k′′,k′′′
is a reﬁnement of ≡k,k′,Magnk,k′(M) is a quotient of Magnk′′,k′′′(M). Moreover, since ≡0,0
is the coarsest clone congruence of P(M),Magn0,0is the trivial clone T. Besides, the clone
Magnr
k,k′(M) := Magnk,k′(M)ris by Proposition 4.2.1.A isomorphic to Magnk,k′(M). Since the
reversion operation on congruences is involutive, the clon esMagnr
k,k′(M) and Magnk′,k(M) are
isomorphic.
5.1.2 Equivalence relation. To lighten the notation, we denote by ≡the equivalence rela-
tion≡1,1onP(M). By deﬁnition, for any p,p′∈P(M),p≡p′holds if and only ( ﬁrst 1(p),ﬁrstr
1(p)) =
(ﬁrst 1(p′),ﬁrstr
1(p′)).
In order to obtain properties about the clone Magn1,1(M), we introduce an alternative
equivalence relation ∼for which we will show that it is equal to ≡. Let/leadsto1,/leadsto2, and/leadsto3be the
three binary relations on P(M) satisfying
p.iα
××.p′/leadsto1p.p′, (5.1.2.A)
p.iα1
1×iα2
2×.p′/leadsto2p.iα2
2×iα1
1×.p′where i1/\e}a⊔io\slash=i2, (5.1.2.B)
Clones of pigmented words 25 / 41 S. Giraudo5 A HIERARCHY OF CLONES — 5.1 On pigmented magnets
p.iα
×iα
×.p′/leadsto3p.iα.p′, (5.1.2.C)
wherep,p′∈P(M) and iα, iα1
1, iα2
2∈ L M. Let/leadstobe the union /leadsto1∪/leadsto2∪/leadsto3and let also ∼
be the reﬂexive, symmetric, and transitive closure of /leadsto.
As a side remark, let up emphasize the fact that, despite appe arances, /leadsto1,/leadsto2, and/leadsto3
cannot be studied as rewrite rules of string rewrite systems [BF93 ;BN98 ;Bez+03 ]. Indeed, since
we could have for instance p/leadsto2p′but notp.q/leadsto2p′.qfor some p,p′,q∈P(M), the compatibility
with the context required by string rewrite systems is not sa tisﬁed.
◮Lemma 5.1.2.A — For any monoid M, the equivalence relation ∼is a monoid congruence of
the monoid (P(M), .,ǫ).
◭Proof — To prove this statement, since ∼is the smallest equivalence relation containing /leadsto1,
/leadsto2, and/leadsto3, it is enough to prove that for any j∈[3] andq,q′,r∈P(M), ifq/leadstojq′then
q.r∼q′.randr.q∼r.q′.
Directly from the deﬁnitions of /leadsto1,/leadsto2, and/leadsto3, for any j∈[3],q/leadstojq′impliesr.q/leadstojr.q′.
This is due to the fact that ( 5.1.2.A ), (5.1.2.B ), and ( 5.1.2.C ) do not require that some positions of
the involved M-pigmented words are left 1-witnesses. Moreover, directly from the deﬁnitions of
/leadsto1and/leadsto3, for any j∈ {1,3},q/leadstojq′impliesq.r/leadstojq′.r. This is due to the fact that ( 5.1.2.A )
and ( 5.1.2.C ) do not require that some positions of the involved M-pigmented words are right 1-
witnesses. The remaining case to explore happens when q/leadsto2q′. In this case, qandq′decompose
asq=p.iα1
1×iα2
2×.p′andq′=p.iα2
2×iα1
1×.p′wherep,p′∈P(M),iα1
1, iα2
2∈ L M, and i2/\e}a⊔io\slash=i1. As
the position ℓ(p) + 2 ofq.ris a right 1-witness if and only if there is no M-pigmented letter of
value i2inr, we have two cases to explore. If this position is a right 1-wi tness, then
q.r=p.iα1
1×iα2
2×.p′.r/leadsto2p.iα2
2×iα1
1×.p′.r=q′.r. (5.1.2.D)
Otherwise, we have
q.r=p.iα1
1×iα2
2××.p′.r/leadsto1p.iα1
1×.p′.r (5.1.2.E)
and
q′.r=p.iα2
2××iα1
1×.p′.r/leadsto1p.iα1
1×.p′.r. (5.1.2.F)
This shows that q.r∼q′.r. /square/square/square
◮Lemma 5.1.2.B — For any monoid Mand any p∈P(M),
p∼ﬁrst 1(p).ﬁrstr
1(p). (5.1.2.G)
◭Proof — Let us ﬁrst show that p∼p.pby induction on ℓ:=ℓ(p). If ℓ= 0, then p=ǫand
sincep.p=ǫ, the stated property holds. Assume now that ℓ/greaterorequalslant1. In this case, pdecomposes as
p=iα.p′where iα∈ L Mandp′∈P(M). We have now p.p=iα
×.p′.iα
×.p′and two cases to
explore depending on whether the position ℓ+ 1 inp.pis a right 1-witness.
(I)If it is the case, then p.p=iα
×.p′.iα
×.p′.Since there is no occurrence of any M-pigmented
letter having ias value in p′, and additionally, there is no position j∈[ℓ] inp.pwhich is a
right 1-witness, we have iα
×.p′.iα
×.p′/leadsto2. . ./leadsto2iα
×iα
×.p′.p′.
(II)Otherwise, p.p=iα
×.p′.iα
××.p′.Since there are occurrences of letters having ias value in p′,
we have iα
×.p′.iα
××.p′/leadsto1iα
×.p′.p′and iα
×iα
××.p′.p′/leadsto1iα
×.p′.p′.
In both cases, by induction hypothesis and by using the fact t hat by Lemma 5.1.2.A ,∼is a monoid
congruence, we obtain p.p∼iαiα
×.p′.p′∼iαiα
×.p′.Finally, since iαiα
×.p′/leadsto3iα.p′=p,the
stated property is established.
Clones of pigmented words 26 / 41 S. Giraudo5 A HIERARCHY OF CLONES — 5.1 On pigmented magnets
Let us now show that p.p∼ﬁrst 1(p).ﬁrstr
1(p).By assuming that pwrites as p=iα1
1. . . iαℓ
ℓ,
there exists a unique pair ( r1. . . r k, s1. . . s k) of subwords of 1 . . . ℓsuch that ﬁrst 1(p) =iαr1r1. . . iαrkrk
andﬁrstr
1(p) =iαs1s1. . . iαsksk.Therefore, we have iαr1r1.p1. . . . . iαrkrk.pk=p=p′
k.iαs1s1. . . . .p′
1.iαsksk
wherep1, . . . ,pk,p′
k, . . . ,p′
1∈P(M). Hence,
p.p=iαr1r1.p1. . . . . iαrkrk.pk.p′
k.iαs1s1. . . . .p′
1.iαsksk, (5.1.2.H)
and since the positions in p.pof the letters of its factors p1, . . . ,pk,p′
k, . . . ,p′
1are neither left
1-witnesses nor right 1-witnesses, we have
p.p/leadsto1. . ./leadsto1iαr1r1. . .iαrkrkiαs1s1. . .iαsksk=ﬁrst 1(p).ﬁrstr
1(p). (5.1.2.I)
By putting these ∼-equivalences together, we obtain p∼p.p∼ﬁrst 1(p).ﬁrstr
1(p) establishing
the stated ∼-equivalence. /square/square/square
◮Proposition 5.1.2.C — For any monoid M, the binary relations ≡and∼onP(M)are equal.
◭Proof — First, observe that for any j∈[3] and any p,p′∈P(M), ifp/leadstojp′, then
ﬁrst 1(p) =ﬁrst 1(p′) and ﬁrstr
1(p) =ﬁrstr
1(p′). Hence, and since ∼is the smallest equivalence rela-
tion containing /leadsto1,/leadsto2, and/leadsto3, we have p≡p′. Therefore, ∼is contained into ≡. Conversely,
for anyp,p′∈P(M) such that p≡p′, we have ﬁrst 1(p) =ﬁrst 1(p′) and ﬁrstr
1(p) =ﬁrstr
1(p′). By
Lemma 5.1.2.B ,p∼ﬁrst 1(p).ﬁrstr
1(p) =ﬁrst 1(p′).ﬁrstr
1(p′)∼p′.For this reason, we have p∼p′,
showing that ≡is contained into ∼. /square/square/square
5.1.3P-symbol algorithm. With the aim of describing a realization of Magn1,1(M), we
propose now a P-symbol for ≡. For any j∈[3], let/precedesorcurlyjbe the reﬂexive and transitive closure
of/leadstoj.
◮Lemma 5.1.3.A — For any monoid M, the binary relation /precedesorcurlyj,j∈[3], is a partial order
relation on P(M). Moreover, for any p∈P(M), there is exactly one maximal element qof the
poset (P(M),/precedesorcurlyj)such that p/precedesorcurlyjq.
◭Proof — Let us consider each binary relation /precedesorcurlyj,j∈[3] one by one.
(I)For anyp,p′∈P(M), we have p/precedesorcurly1p′if and only if p′can be obtained from pby deleting
some M-pigmented letters whose positions are neither left 1-witn esses nor right 1-witnesses.
This implies immediately the properties of the statement of lemma for /precedesorcurly1.
(II)For any p,p′∈P(M), ifp/precedesorcurly2p′, then by denoting by τ(p) (resp. τ(p′)) the sum of
the positions of p(resp.p′) of the M-pigmented letters which are right 1-witnesses, we
have τ(p) =τ(p′) + 1. Since /precedesorcurly2is the reﬂexive and transitive closure of /leadsto2, this shows
that/precedesorcurly2is antisymmetric. The second property is a consequence of th e fact that for any
p,p′,p′′∈P(M), ifp′/\e}a⊔io\slash=p′′,p/leadsto2p′, andp/leadsto2p′′, then there exists p′′′∈P(M) such that
p′/leadsto2p′′′andp′′/leadsto2p′′′. This property is due to the fact that for any r,r′∈P(M) and
iα1
1, iα2
2, iα3
3∈ L M, it is not possible to have both r.iα1
1×iα2
2×iα3
3.r′/leadsto2r.iα2
2×iα1
1×iα3
3.r′and
r.iα1
1iα2
2×iα3
3×.r′/leadsto2r.iα1
1iα3
3×iα2
2×.r′.Indeed, these two properties would lead to the fact
that the position ℓ(r) + 2 ofr.iα1
1iα2
2iα3
3.r′is a right 1-witness and, at the same time, is not
a right 1-witness.
(III) For anyp,p′∈P(M), we have p/precedesorcurly3p′if and only if p′can be obtained from pby deleting
some M-pigmented letters which have a same M-pigmented letter as neighbor. In the
same way as the ﬁrst case, this implies immediately the prope rties of the statement of
lemma for /precedesorcurly3.
Clones of pigmented words 27 / 41 S. Giraudo5 A HIERARCHY OF CLONES — 5.1 On pigmented magnets
/square/square/square
Let, for any j∈[3],↓j:P(M)→P(M) be the map such that for any p∈P(M),p↓jis
the maximal element of the poset ( P(M),/precedesorcurlyj) comparable with p. By Lemma 5.1.3.A , this map
is well-deﬁned.
LetP≡:P(M)→P(M) be the map deﬁned for any p∈P(M) by
P≡(p) :=p↓1↓2↓3. (5.1.3.A)
For instance, we have
P≡/parenleftBig
2ǫ
×1b
×2ǫ
×3a
×1ba
××1b
×3ǫ
×/parenrightBig
=2ǫ
×1b
×2ǫ
×3a
×1ba
××1b
×3ǫ
×↓1↓2↓3 (5.1.3.B)
=2ǫ
×1b
×2ǫ
×3a
×1b
×3ǫ
×↓2↓3
=2ǫ
×2ǫ
×1b
×1b
×3a
×3ǫ
×↓3
=2ǫ1b3a
×3ǫ
and
P≡/parenleftBig
4a
×2b
×1c
×1c
×4b
××3b
×3a
×2a
××2a
××4a
××2c
××4a
×2c
×/parenrightBig
(5.1.3.C)
=4a
×2b
×1c
×1c
×4b
××3b
×3a
×2a
××2a
××4a
××2c
××4a
×2c
×↓1↓2↓3
=4a
×2b
×1c
×1c
×3b
×3a
×4a
×2c
×↓2↓3
=4a
×2b
×1c
×1c
×3b
×3a
×4a
×2c
×↓3
=4a
×2b
×1c3b
×3a
×4a
×2c
×.
Let us emphasize the fact that the maps ↓1,↓2, and ↓3do not commute. Indeed, we have for
instance
P≡/parenleftBig
1ǫ
×1a
××1ǫ
×/parenrightBig
=1ǫ/\e}a⊔io\slash=1ǫ
×1ǫ
×=1ǫ
×1a
××1ǫ
×↓2↓3↓1. (5.1.3.D)
◮Lemma 5.1.3.B — For any monoid Mand any p∈P(M),p∼P≡(p).
◭Proof — First, since for any j∈[3],∼contains /precedesorcurlyj, we have p↓j∼p. Moreover, as P≡is by
deﬁnition the map composition ↓3◦ ↓2◦ ↓1,P≡(p) is∼-equivalent to p. /square/square/square
◮Lemma 5.1.3.C — For any monoid Mand any p,p′∈P(M),p∼p′impliesP≡(p) =P≡(p′).
◭Proof — Let us consider the following three cases depending whether p/leadsto1p′,p/leadsto2p′, or
p/leadsto3p′.
(I)Assume that p/leadsto1p′. By Lemma 5.1.3.A ,p↓1=p′↓1. Therefore, by deﬁnition of P≡,
P≡(p) =P≡(p′).
(II)Assume that p/leadsto2p′. Hence, pandp′decompose as p=q.iα1
1×iα2
2×.randp′=q.iα2
2×iα1
1×.r
whereq,r∈P(M),iα1
1, iα2
2∈ L M, and i1/\e}a⊔io\slash=i2. If the letter at position ℓ(q) + 1 ofpis not
a left 1-witness, then the letter at position ℓ(q) + 2 ofp′is not a left 1-witness and
p↓1= (q↓1).iα2
2×.(r↓1) =p′↓1. (5.1.3.E)
Therefore, p↓1=p′↓1andP≡(p) =P≡(p′). Otherwise, when the letter at position ℓ(q) + 1
ofpis a left 1-witness, the letter at position ℓ(q) + 2 ofp′is also a left 1-witness and we
have
p↓1= (q↓1).iα1
1×iα2
2×.(r↓1)/leadsto2(q↓1).iα2
2×iα1
1×.(r↓1) =p′↓1. (5.1.3.F)
By Lemma 5.1.3.A ,p↓1↓2=p′↓1↓2. Therefore, by deﬁnition of P≡,P≡(p) =P≡(p′).
Clones of pigmented words 28 / 41 S. Giraudo5 A HIERARCHY OF CLONES — 5.1 On pigmented magnets
(III) Assume that p/leadsto3p′. Hence, pandp′decompose as p=q.iαiα.randp′=q.iα.rwhere
q,r∈P(M) and iα∈ L M. If the letters at positions ℓ(q) + 1 and ℓ(q) + 2 ofpare neither
left 1-witnesses nor right 1-witnesses, then the letter at p osition ℓ(q) + 1 ofp′is neither a
left 1-witnesses nor a right 1-witness and
p↓1= (q↓1).(r↓1) =p′↓1. (5.1.3.G)
Therefore, p↓1=p′↓1andP≡(p) =P≡(p′). Otherwise, if there is exactly one position
among ℓ(q) + 1 and ℓ(q) + 2 ofpwhich is neither a left 1-witness nor a right 1-witness, then ,
since the letter at position ℓ(q) + 1 ofpcannot be a right 1-witness, we have
p↓1= (q↓1).iα.(r↓1) =p′↓1. (5.1.3.H)
Therefore, p↓1=p′↓1andP≡(p) =P≡(p′). The last possibility happens when the letter
at position ℓ(q) + 1 ofpis a left 1-witness and the letter at position ℓ(q) + 2 ofpis a right
1-witness. In this case,
p↓1↓2= (q↓1↓2).iα
×iα
×.(r↓1↓2) ( 5.1.3.I)
/leadsto3(q↓1↓2).iα.(r↓1↓2) =p′↓1↓2.
By Lemma 5.1.3.A ,p↓1↓2↓3=p′↓1↓2↓3.Therefore, by deﬁnition of P≡,P≡(p) =P≡(p′).
The statement of the lemma is now implied by the fact that ∼is generated by /leadsto. /square/square/square
By Proposition 5.1.2.C and Lemmas 5.1.3.B and 5.1.3.C ,P≡is aP-symbol for ≡.
5.1.4 Realization. AnM-pigmented magnet (or simply pigmented magnet when the context
is clear) of arity n/greaterorequalslant0 is an M-pigmented word pof arity nwhich is a maximal element at the
same time in the posets ( P(M),/precedesorcurly1), (P(M),/precedesorcurly2), and ( P(M),/precedesorcurly3). For instance,
1aa
×1b
××2ab1b
×and 2ba
×3ǫ
×2ab
×1a3ba
×(5.1.4.A)
are not A∗-pigmented magnets. In contrast,
3b2ba
×4ba1a2ab
×and 2bb
×1a
×1aa
×2bb
×(5.1.4.B)
areA∗-pigmented magnets.
◮Lemma 5.1.4.A — For any monoid Mand any p∈P(M),P≡(p)is an M-pigmented magnet.
◭Proof — Letp1:=p↓1,p2:=p1↓2, andp3:=p2↓3. By deﬁnition of P≡,p3=P≡(p). Let us
show that p3is a maximal element w.r.t. the partial order relations /precedesorcurly1,/precedesorcurly2, and/precedesorcurly3at the same
time.
(I)By Lemma 5.1.3.A ,p3is a maximal element w.r.t. /precedesorcurly3.
(II)Assume by contraction that there is q∈P(M) such that p3/precedesorcurly2qandp3/\e}a⊔io\slash=q. Recall that
p3=p2↓3and that p2is by Lemma 5.1.3.A a maximal element w.r.t. /precedesorcurly2. Therefore, p2
admits no decomposition of the form p2=r.iα1
1×iα2
2×.r′wherer,r′∈P(M),iα1
1, iα2
2∈ L M,
andi1/\e}a⊔io\slash=i2. Sincep3is obtained from p2by deleting some M-pigmented letters having
as neighbor a same M-pigmented letter, p3still does not admit any similar decomposition.
This contradicts the existence of qand shows that p3is a maximal element w.r.t. /precedesorcurly2.
(III) Assume by contraction that there is q∈P(M) such that p3/precedesorcurly1qandp3/\e}a⊔io\slash=q. Recall that
p3=p1↓2↓3and that p1is by Lemma 5.1.3.A a maximal element w.r.t. /precedesorcurly1. Therefore,
Clones of pigmented words 29 / 41 S. Giraudo5 A HIERARCHY OF CLONES — 5.1 On pigmented magnets
p1admits no decomposition of the form p1=r.iα
××.r′wherer,r′∈P(M) and iα∈ L M.
Sincep2is obtained from p1by swapping some M-pigmented letters, p2still does not admit
any similar decomposition. Moreover, since p3is obtained from p2by deleting some M-
pigmented letters having as neighbor a same M-pigmented letter, p3still does not admit any
similar decomposition. This contradicts the existence of qand shows that p3is a maximal
element w.r.t. /precedesorcurly1.
/square/square/square
◮Theorem 5.1.4.B — For any monoid M,P≡is aP-symbol for ≡andP≡(P(M))is the set of
M-pigmented magnets. Moreover, the graded set Magn1,1(M)is isomorphic to the graded set of
M-pigmented magnets.
◭Proof — By Proposition 5.1.2.C and Lemmas 5.1.3.B and 5.1.3.C ,P≡is aP-symbol for ≡. There-
fore,P≡is idempotent, which implies together with Lemma 5.1.4.A thatP≡(P(M)) is the set of
M-pigmented magnets. The last part of the statement is a direc t implication of Proposition 4.1.2.A
and the fact that P≡is, as we have just shown, a P-symbol for ≡. /square/square/square
By Proposition 4.1.2.A and Theorem 5.1.4.B ,Magn1,1(M) can be seen as a clone on M-
pigmented magnets with superposition maps satisfying ( 4.1.2.A ). For instance, in Magn1,1(A∗),
1a1b4b3ba2b/bracketleftbig
3b3a,1ǫ1ba3ǫ2ǫ2ab3ab,1ǫ1a,2ǫ3a3b1a/bracketrightbig
(5.1.4.C)
=P≡/parenleftbig
3ab3aa3bb3ba2b3ba3bb1ba1ba1baa1b1bba3b2b2bab3bab/parenrightbig
= 3ab2b1ba1bba2bab3bab.
Moreover, by Lemma 5.1.2.B and Theorem 5.1.4.B , the map φ:Arra 1(M)2→Magn1,1(M) de-
ﬁned for any ( p,p′)∈Arra 1(M)2byφ((p,p′)) :=P≡(p.p′) is a graded set isomorphism. Therefore,
when Mis ﬁnite, Magn1,1(M) is combinatorial. Moreover, by ( 4.3.2.E ), for any n/greaterorequalslant0,
#Magn1,1(M)(n) =/summationdisplay
i∈/llbracketn]/parenleftbiggn
i/parenrightbigg
i!2(#M)2i. (5.1.4.D)
In particular, the sequence of dimensions of Magn1,1(E) starts by
1,2,7,52,749,17686 ,614227 ,29354312 ,1844279257 , (5.1.4.E)
and forms Sequence A046662 of [Slo].
5.1.5 Presentation. In order to establish a presentation of Magn1,1(M), we introduce an
alternative description of the clone congruence ≡through a new equivalence relation ≡′. For this,
let us deﬁne ≡′as the equivalence relation on P(M) satisfying
p.q.q.p′≡′p.q.p′, (5.1.5.A)
p.(α1·q).r.(α2·q).r′.(α3·q).p′≡′p.(α1·q).r.r′.(α3·q).p′, (5.1.5.B)
wherep,p′,q,r,r′∈P(M) and α1, α2, α3∈ M .
◮Lemma 5.1.5.A — For any monoid M, the binary relations ≡and≡′onP(M)are equal.
◭Proof — Letp,p′∈P(M) such that p≡′p′. Since ≡′is generated by ( 5.1.5.A ) and ( 5.1.5.B ),
we have to cases to consider.
Clones of pigmented words 30 / 41 S. Giraudo5 A HIERARCHY OF CLONES — 5.1 On pigmented magnets
(I)Ifpandp′decompose as p=p′′.q.q.p′′′andp′=p′′.q.p′′′wherep′′,p′′′∈P(M), then
ﬁrst 1(p) =ﬁrst 1(p′′.q.p′′′) =ﬁrst 1(p′) and ﬁrstr
1(p) =ﬁrstr
1(p′′.q.p′′′) =ﬁrstr
1(p′).Therefore,
p≡p′.
(II)Ifpandp′decompose as p=p′′.(α1·q).r.(α2·q).r′.(α3·q).p′′′andp′=p′′.(α1·q).r.r′.(α3·q).p′′′
wherep′′,p′′′,q,r,r′∈P(M) and α1, α2, α3∈ M , then ﬁrst 1(p) =ﬁrst 1(p′′.(α1·q).r.r′.p′′′) =
ﬁrst 1(p′) and ﬁrstr
1(p) =ﬁrstr
1(p′′.r.r′.(α3·q).p′′′) =ﬁrstr
1(p′).Therefore, p≡p′.
This shows that p≡′p′impliesp≡p′.
Conversely, let p,p′∈P(M) such that p≡p′. By Proposition 5.1.2.C , this is equivalent to the
fact that p∼p′. Since ∼is generated by /leadsto, we have three cases to explore depending whether
p/leadsto1p′,p/leadsto2p′, orp/leadsto3p′.
(I)Ifp/leadsto1p′, thenpandp′decompose as p=q.iα
××.q′andp′=q.q′whereq,q′∈P(M) and
iα∈ L M. Since the position ℓ(q)+1 ofpis neither a left 1-witness nor a right 1-witness, there
is necessarily an occurrence of an M-pigmented letter having ias value both in qand inq′.
Hence,p=r.iα1
×.r′.iα
××.r′′.iα2
×.r′′′andp′=r.iα1
×.r′.r′′.iα2
×.r′′′wherer,r′,r′′,r′′′∈P(M),
q=r.iα1.r′,q′=r′′.iα2.r′′′, and iα1, iα2∈ L M. By ( 5.1.5.B ), we have p≡′p′.
(II)Ifp/leadsto2p′, thenpandp′decompose as p=q.iα1
1×iα2
2×.q′andp′=q.iα2
2×iα1
1×.q′where
q,q′∈P(M),iα1
1, iα2
2∈ L M, and i1/\e}a⊔io\slash=i2. Since the position ℓ(q) + 1 ofpis not a right 1-
witness and the position ℓ(q)+2 ofpis not a left 1-witness, there is necessarily an occurrence
of an M-pigmented letter having i2as value in qand an occurrence of an M-pigmented
letter having i1as value in q′. Hence,
p=r.iβ2
2×.r′.iα1
1×iα2
2×.r′′.iβ1
i×.r′′′(5.1.5.C)
≡′r.iβ2
2×.r′.iα2
2××iα1
1×iα2
2×.r′′.iβ1
i×.r′′′
≡′r.iβ2
2×.r′.iα2
2××iα1
1×iα2
2×iα1
1××.r′′.iβ1
i×.r′′′
≡′r.iβ2
2×.r′.iα2
2×iα1
1×.r′′.iβ1
i×.r′′′=p′
wherer,r′,r′′,r′′′∈P(M),q=r.iβ2
2.r′,q′=r′′.iβ1
1.r′′′, and iβ1
1, iβ2
2∈ L M. The ﬁrst and
second ≡′-equivalences of ( 5.1.5.C ) are consequences of ( 5.1.5.B ) considered from right to left
and the third ≡′-equivalence of ( 5.1.5.C ) is a consequence of ( 5.1.5.A ) considered from left to
right.
(III) Ifp/leadsto3p′, thenpandp′decompose as p=q.iαiα.q′andp′=q.iα.q′whereq,q′∈P(M)
andiα∈ L M. By ( 5.1.5.A ), we have p≡′p′.
This shows that p≡p′impliesp≡′p′and establishes the statement of the lemma. /square/square/square
◮Theorem 5.1.5.B — For any monoid M, the clone Magn1,1(M)admits the presentation/parenleftbig
GM,R′
M/parenrightbig
whereR′
Mis the set RMaugmented with the GM-equations
rcM(1e1e)R′
MrcM(1e), (5.1.5.D)
rcM(1α12e1α23e1α3)R′
MrcM(1α12e3e1α3), (5.1.5.E)
where α1, α2, α3∈ M andeis the unit of M.
◭Proof — Let≡′′be the clone congruence of P(M) generated by
1e1e≡′′1e, (5.1.5.F)
1α12e1α23e1α3≡′′1α12e3e1α3(5.1.5.G)
Clones of pigmented words 31 / 41 S. Giraudo5 A HIERARCHY OF CLONES — 5.2 On pigmented stalactites
with α1, α2, α3∈ M . Let us show that the clone congruences ≡and≡′′ofP(M) are equal. This
will imply, by using Proposition 3.3.3.C , that Magn1,1admits the stated presentation.
First, since ﬁrst 1(1e1e) = 1e=ﬁrst 1(1e) and ﬁrstr
1(1e1e) = 1e=ﬁrstr
1(1e), we have 1e1e≡1e.
Moreover, since for any α1, α2, α3∈ M ,ﬁrst 1(1α12e1α23e1α3) = 1α12e3e=ﬁrst 1(1α12e3e1α3) and
ﬁrstr
1(1α12e1α23e1α3) = 2e3e1α3=ﬁrstr
1(1α12e3e1α3),we have 1α12e1α23e1α3≡1α12e3e1α3.This
shows that ≡′′is contained into ≡.
To prove that ≡is contained into ≡′′, let us show that ≡′is contained into ≡′′. By
Lemma 5.1.5.A , the targeted property will follow. For any p,p′,q∈P(M), we have
p.q.q.p= 1e2e3e[p,1e1e[q],p′]≡′′1e2e3e[p,1e[q],p′] =p.q.p (5.1.5.H)
so that the ﬁrst and the last members of ( 5.1.5.H ) are ≡′′-equivalent. Moreover, for any p,p′,q,r,r′∈
P(M) and α1, α2, α3∈ M , we have
p.(α1·q).r.(α2·q).r′.(α3·q).p′= 1e2e3e[p,1α12e1α23e1α3[q,r,r′],p′] ( 5.1.5.I)
≡′′1e2e3e[p,1α12e3e1α3[q,r,r′],p′] =p.(α1·q).r.r′.(α3·q).p′
so that the ﬁrst and the last members of ( 5.1.5.I ) are ≡′′-equivalent. Since ≡′is the equivalence
relation generated by ( 5.1.5.A ) and ( 5.1.5.B ), the targeted property is shown. This establishes the
statement of the theorem. /square/square/square
By Theorem 5.1.5.B , any Magn1,1(M)-algebra is an M-pigmented monoid ( A, ⋆,u,pα) where
⋆is idempotent, and ⋆and p αsatisfy
pα1(x1)⋆ x2⋆pα2(x1)⋆ x3⋆pα3(x1) = p α1(x1)⋆ x2⋆ x3⋆pα3(x1) ( 5.1.5.J)
for any x1, x2, x3∈ Aandα1, α2, α3∈ M . In particular, Magn1,1(E) is a clone realization of the
variety of regular bands.
5.2 On pigmented stalactites
By considering the intersection of the clone congruences ≡sortand≡ﬁrst k,k/greaterorequalslant0, we construct a
quotient clone Stal k(M) ofP(M). A realization through new combinatorial objects named M-
pigmented stalactites is introduced and a ﬁnitely related p resentation is described. These results
are based on the introduction of a P-symbol for the underlying equivalence relation. The proof s
of the results and intermediate lemmas of this section are ve ry similar to the ones of Section 5.1
and are omitted for this reason.
5.2.1 Clone construction. For any k/greaterorequalslant0, let ≡kbe the equivalence relation ≡sort∩ ≡ ﬁrst k
and
Stal k(M) :=P(M)/≡k. (5.2.1.A)
By Propositions 4.2.2.A and 4.2.3.A ,Stal k(M) is a well-deﬁned clone, and WInc (M) and Arra k(M)
are both quotients of Stal k(M). Since for any 0 /lessorequalslantk/lessorequalslantk′,≡k′is a reﬁnement of ≡k,Stal k(M) is a
quotient of Stal k′(M). Moreover, since ≡0and≡sortare the same equivalence relations, Stal 0(M)
is isomorphic to WInc (M). Besides, the clone Stalr
k(M) := Stal k(M)ris by Proposition 4.2.1.A
isomorphic to Stal k(M).
5.2.2 Equivalence relation. By deﬁnition, for any p,p′∈P(M),p≡kp′holds if and only
(ﬁrst k(p),sort/precedesorcurly(p)) = ( ﬁrst k(p′),sort/precedesorcurly(p′)) where /precedesorcurlyis any total order relation on M.
Clones of pigmented words 32 / 41 S. Giraudo5 A HIERARCHY OF CLONES — 5.2 On pigmented stalactites
In order to obtain properties about the clone Stal k(M),k/greaterorequalslant0, we introduce an alternative
equivalence relation ∼(k)for which it appears that it is equal to ≡k. Let/leadsto(k)
1and/leadsto(k)
2be the
two binary relations on P(M) satisfying
p.iα1
1×iα2
2.p′/leadsto(k)
1p.iα2
2iα1
1×.p′where i1/\e}a⊔io\slash=i2, (5.2.2.A)
p.iα1
1×iα2
2×.p′/leadsto(k)
2p.iα2
2×iα1
1×.p′where iα1
1/\e}a⊔io\slash=iα2
2,andiα2
2/precedesorcurly/precedesorcurly/precedesorcurlyiα1
1, (5.2.2.B)
wherep,p′∈P(M) and iα1
1, iα2
2∈ L M. Note that these deﬁnitions depend on kbecause the
properties of being a left k-witness or a right k-witness of the shown pigmented letters in ( 5.2.2.A )
and ( 5.2.2.B ) depend themselves on k. Let/leadsto(k)be the union /leadsto(k)
1∪/leadsto(k)
2and let also ∼(k)be
the reﬂexive, symmetric, and transitive closure of /leadsto(k).
◮Proposition 5.2.2.A — For any monoid Mand any k/greaterorequalslant0, the binary relations ≡kand∼(k)
onP(M)are equal.
5.2.3P-symbol algorithm. With the aim of describing a realization of Stal k(M), we pro-
pose now a P-symbol for ≡k. For any j∈[2], let/precedesorcurly(k)
jbe the reﬂexive and transitive closure of
/leadsto(k)
j.
◮Lemma 5.2.3.A — For any monoid Mand any k/greaterorequalslant0, the binary relation /precedesorcurly(k)
j,j∈[2], is
a partial order relation on P(M). Moreover, for any p∈P(M), there is exactly one maximal
elementqof the poset/parenleftBig
P(M),/precedesorcurly(k)
j/parenrightBig
such that p/precedesorcurly(k)
jq.
Let, for any j∈[2],↓(k)
j:P(M)→P(M) be the map such that for any p∈P(M),p↓(k)
j
is the maximal element of the poset/parenleftBig
P(M),/precedesorcurly(k)
j/parenrightBig
comparable with p. By Lemma 5.2.3.A , this
map is well-deﬁned.
LetP≡k:P(M)→P(M) be the map deﬁned for any p∈P(M) by
P≡k(p) :=p↓(k)
1↓(k)
2. (5.2.3.A)
For instance, we have
P≡1/parenleftBig
3a2ǫ1a1b
×1ba
×2ǫ
×1ba
×1ǫ
×2a
×4a4b
×/parenrightBig
(5.2.3.B)
=3a2ǫ1a1b
×1ba
×2ǫ
×1ba
×1ǫ
×2a
×4a4b
×↓(1)
1↓(1)
2
=3a2ǫ1a4a1b
×1ba
×2ǫ
×1ba
×1ǫ
×2a
×4b
×↓(1)
2
=3a2ǫ1a4a1ǫ
×1b
×1ba
×1ba
×2ǫ
×2a
×4b
×
and
P≡2/parenleftBig
3a2ǫ1a1b1ba2ǫ1ba
×1ǫ
×2a
×4a4b/parenrightBig
(5.2.3.C)
=3a2ǫ1a1b1ba2ǫ1ba
×1ǫ
×2a
×4a4b↓(2)
1↓(2)
2
=3a2ǫ1a1b2ǫ4a4b1ba
×1ba
×1ǫ
×2a
×↓(2)
2
=3a2ǫ1a1b2ǫ4a4b1ǫ
×1ba
×1ba
×2a
×.
◮Lemma 5.2.3.B — For any monoid M, any k/greaterorequalslant0, and any p∈P(M),p∼(k)P≡k(p).
◮Lemma 5.2.3.C — For any monoid M, any k/greaterorequalslant0, and any p,p′∈P(M),p∼(k)p′implies
P≡k(p) =P≡k(p′).
By Proposition 5.2.2.A and Lemmas 5.2.3.B and 5.2.3.C ,P≡kis aP-symbol for ≡k.
Clones of pigmented words 33 / 41 S. Giraudo5 A HIERARCHY OF CLONES — 5.2 On pigmented stalactites
5.2.4 Realization. AnM-pigmented k-stalactite (or simply pigmented k-stalactite when the
context is clear) of arity n/greaterorequalslant0 is an M-pigmented word pof arity nwhich is a maximal element
at the same time in the posets/parenleftBig
P(M),/precedesorcurly(k)
1/parenrightBig
and/parenleftBig
P(M),/precedesorcurly(k)
2/parenrightBig
. For instance,
3b2a2a2b
×3b1a3b
×1b3a
×(5.2.4.A)
is not an A∗-pigmented 2-stalactite. In contrast,
2b2a1a3a4b1a3b1a
×2b
×2b
×3a
×3b
×(5.2.4.B)
is an A∗-pigmented 2-stalactite but not an A∗-pigmented 1-stalactite.
◮Lemma 5.2.4.A — For any monoid M, any k/greaterorequalslant0, and any p∈P(M),P≡k(p)is an M-
pigmented k-stalactite.
◮Theorem 5.2.4.B — For any monoid Mand any k/greaterorequalslant0,P≡kis aP-symbol for ≡kand
P≡k(P(M))is the set of M-pigmented k-stalactites. Moreover, the graded set Stal k(M)is iso-
morphic to the graded set of M-pigmented k-stalactites.
By Proposition 4.1.2.A and Theorem 5.2.4.B ,Stal k(M) can be seen as a clone on M-pigmented
k-stalactites with superposition maps satisfying ( 4.1.2.A ). For instance, in Stal 1(A∗),
4ab1a2ab3a3ǫ/bracketleftbig
2ba3b,3ba1b1b3ǫ,2ǫ3ab2ba3b,2a/bracketrightbig
(5.2.4.C)
=P≡1/parenleftbig
2aba2aba3ab3abba1abb1abb3ab2a3aab2aba3ab2ǫ3ab2ba3b/parenrightbig
= 2aba3ab1abb1abb2ǫ2a2aba2aba2ba3aab3ab3ab3ab3abba3b
and in Stal 2(A∗),
3a2a1b3ba3ǫ/bracketleftbig
2a1ab,3b3ǫ2ab,1ba3b,1a1ab/bracketrightbig
(5.2.4.D)
=P≡2/parenleftbig
1aba3ab3ab3a2aab2ba1bab1baba3bab1ba3b/parenrightbig
= 1aba3ab3ab2aab2ba1bab1ba1baba3a3b3bab.
5.2.5 Presentation. In order to establish a presentation of Stal k(M), we introduce an alter-
native description of the clone congruence ≡kthrough a new equivalence relation ≡′
k. For this,
let us deﬁne ≡′
kas the equivalence relation on P(M) satisfying
p.(α1·q). . . . . (αk·q).(β·q).r.p′≡′
kp.(α1·q). . . . . (αk·q).r.(β·q).p′, (5.2.5.A)
wherep,p′,q,r∈P(M) and α1, . . . , α k, β∈ M .
◮Lemma 5.2.5.A — For any monoid Mand any k/greaterorequalslant0, the binary relations ≡kand≡′
kon
P(M)are equal.
◮Theorem 5.2.5.B — For any monoid Mand any k/greaterorequalslant0, the clone Stal k(M)admits the
presentation/parenleftbig
GM,R′
M/parenrightbig
whereR′
Mis the set RMaugmented with the GM-equation
rcM/parenleftbig
1α1. . .1αk1β2e/parenrightbig
R′
MrcM/parenleftbig
1α1. . .1αk2e1β/parenrightbig
, (5.2.5.B)
where α1, . . . , α k, β∈ M andeis the unit of M.
By Theorem 5.2.5.B , any Stal k(M)-algebra is an M-pigmented monoid ( A, ⋆,u,pα) where ⋆
and p αsatisfy
pα1(x1)⋆ . . . ⋆ pαk(x1)⋆pβ(x1)⋆ x2= p α1(x1)⋆ . . . ⋆ pαk(x1)⋆ x2⋆pβ(x1) ( 5.2.5.C)
Clones of pigmented words 34 / 41 S. Giraudo5 A HIERARCHY OF CLONES — 5.3 On pigmented pillars
for any x1, x2∈ Aandα1, . . . , α k, β∈ M .
As a side remark, the equivalence relation ≡1, as a monoid congruence, has been introduced
in [HNT08 ] under the name of the “stalactic congruence” . As a monoid co ngruence, ≡k,k/greaterorequalslant0, is
therefore a generalization of the previous one.
5.3 On pigmented pillars
By considering the intersection of the clone congruences ≡sort,≡ﬁrst k,k/greaterorequalslant0, and their reversions
≡r
ﬁrstk′,k′/greaterorequalslant0, we construct a quotient clone Pillk,k′(M) ofP(M). This clone is studied in detail
for the case k= 1 = k′. A realization through new combinatorial objects named M-pigmented
pillars is introduced and a ﬁnitely related presentation is described. These results are based on
the introduction of a P-symbol for the underlying equivalence relation. The proof s of the results
and intermediate lemmas of this section are very similar to t he ones of Section 5.1and are omitted
for this reason.
5.3.1 Clone construction. For any k, k′/greaterorequalslant0, let ≡k,k′be the equivalence relation ≡ﬁrst k
∩ ≡ sort∩ ≡r
ﬁrstk′and
Pillk,k′(M) :=P(M)/≡k,k′. (5.3.1.A)
By Propositions 4.2.2.A ,4.2.3.A , and 4.2.1.A ,Pillk,k′(M) is a well-deﬁned clone, and Stal k(M),
Magnk,k′(M), and Stalr
k′(M) are quotients of Pillk,k′. Since for any 0 /lessorequalslantk/lessorequalslantk′′and 0/lessorequalslantk′/lessorequalslantk′′′,
≡k,k′is a reﬁnement of ≡k′′,k′′′,Pillk,k′(M) is a quotient of Pillk′′,k′′′(M). Moreover, since ≡0,0
and≡sortare the same equivalence relations, Pill0,0(M) is isomorphic to WInc (M). Besides,
the clone Pillr
k,k′(M) := Pillk,k′(M)ris by Proposition 4.2.1.A isomorphic to Pillk,k′(M). Since
the reversion operation on congruences is involutive, the c lones Pillr
k,k′(M) and Pillk′,k(M) are
isomorphic.
5.3.2 Equivalence relation. To lighten the notation, we denote by ≡the equivalence rela-
tion≡1,1onP(M). By deﬁnition, for any p,p′∈P(M),p≡p′holds if and only ( ﬁrst 1(p),sort/precedesorcurly(p),ﬁrstr
1(p)) =
(ﬁrst 1(p′),sort/precedesorcurly(p′),ﬁrstr
1(p′)) where /precedesorcurlyis any total order relation on M.
In order to obtain properties about the clone Pill1,1(M), we introduce an alternative equiva-
lence relation ∼for which we will show that it is equal to ≡. Let/leadsto1,/leadsto2, and/leadsto3be the three
binary relations on P(M) satisfying
p.iα1
×.q.iα2
××.p′/leadsto1p.iα1
×.iα2
××.q.p′whereq/\e}a⊔io\slash=ǫ,andi /∈q, (5.3.2.A)
p.iα1
××iα2
××.p′/leadsto2p.iα2
××iα1
××.p′where α1/\e}a⊔io\slash=α2andα2/precedesorcurlyα1, (5.3.2.B)
p.iα1
1×iα2
2×.p′/leadsto3p.iα2
2×iα1
1×.p′where i1/\e}a⊔io\slash=i2, (5.3.2.C)
wherep,p′,q,p′∈P(M),iα1, iα2, iα1
1, iα2
2∈ L M, and where the notation i /∈rmeans that the
M-pigmented word rhas no occurrence of any M-pigmented letter having ias value. Let /leadstobe
the union /leadsto1∪/leadsto2∪/leadsto3and let also ∼be the reﬂexive, symmetric, and transitive closure of /leadsto.
◮Proposition 5.3.2.A — For any monoid M, the binary relations ≡and∼onP(M)are equal.
5.3.3P-symbol algorithm. With the aim of describing a realization of Pill1,1(M), we pro-
pose now a P-symbol for ≡. For any j∈[3], let/precedesorcurlyjbe the reﬂexive and transitive closure of
/leadstoj.
Clones of pigmented words 35 / 41 S. Giraudo5 A HIERARCHY OF CLONES — 5.3 On pigmented pillars
◮Lemma 5.3.3.A — For any monoid M, the binary relation /precedesorcurlyj,j∈[3], is a partial order
relation on P(M). Moreover, for any p∈P(M), there is exactly one maximal element qof the
poset (P(M),/precedesorcurlyj)such that p/precedesorcurlyjq.
Let, for any j∈[3],↓j:P(M)→P(M) be the map such that for any p∈P(M),p↓jis
the maximal element of the poset ( P(M),/precedesorcurlyj) comparable with p. By Lemma 5.3.3.A , this map
is well-deﬁned.
LetP≡:P(M)→P(M) be the map deﬁned for any p∈P(M) by
P≡(p) :=p↓1↓2↓3. (5.3.3.A)
For instance, we have
P≡/parenleftBig
2ab
×2a
××4b
×4b
××2ǫ
××4ab
××4ǫ
×3a
×3a
××3ba
××2ab
×5b3ab
×/parenrightBig
(5.3.3.B)
=2ab
×2a
××4b
×4b
××2ǫ
××4ab
××4ǫ
×3a
×3a
××3ba
××2ab
×5b3ab
×↓1↓2↓3
=2ab
×2a
××2ǫ
××4b
×4b
××4ab
××4ǫ
×3a
×3a
××3ba
××2ab
×5b3ab
×↓2↓3
=2ab
×2ǫ
××2a
××4b
×4ab
××4b
××4ǫ
×3a
×3a
××3ba
××2ab
×5b3ab
×↓3
=2ab
×2ǫ
××2a
××4b
×4ab
××4b
××4ǫ
×2ab
×3a
×3a
××3ba
××5b3ab
×.
◮Lemma 5.3.3.B — For any monoid Mand any p∈P(M),p∼P≡(p).
◮Lemma 5.3.3.C — For any monoid Mand any p,p′∈P(M),p∼p′impliesP≡(p) =P≡(p′).
By Proposition 5.3.2.A and Lemmas 5.3.3.B and 5.3.3.C ,P≡is aP-symbol for ≡.
5.3.4 Realization. AnM-pigmented pillar (or simply pigmented pillar when the context is
clear) of arity n/greaterorequalslant0 is an M-pigmented word pof arity nwhich is a maximal element at the
same time in the posets ( P(M),/precedesorcurly1), (P(M),/precedesorcurly2), and ( P(M),/precedesorcurly3). For instance,
2b
×1a
×2ba
××4ǫ
×1ba
×3a2a
×4b
×and 1ǫ2b
×6b
×6a
××2ba
××5ab
×2ab
×6ǫ
×5a
××5ab
×(5.3.4.A)
are not A∗-pigmented pillars. In contrast,
1ǫ
×2ǫ
×2ǫ
×4a
×4b
××3ab4ǫ
×1ǫ
×and 4b
×4b
××5ba
×3ba
×3ab
××1ba5ǫ
×3b
×6b4b
×(5.3.4.B)
areA∗-pigmented pillars.
◮Lemma 5.3.4.A — For any monoid Mand any p∈P(M),P≡(p)is an M-pigmented pillar.
◮Theorem 5.3.4.B — For any monoid M,P≡is aP-symbol for ≡andP≡(P(M))is the set
ofM-pigmented pillars. Moreover, the graded set Pill1,1(M)is isomorphic to the graded set of
M-pigmented pillars.
By Proposition 4.1.2.A and Theorem 5.3.4.B ,Pill1,1(M) can be seen as a clone on M-pigmented
pillars with superposition maps satisfying ( 4.1.2.A ). For instance, in Pill1,1(A∗),
3ǫ2ab1b1a4a/bracketleftbig
2ba2ba1ab1ǫ,2a3a,1ba,3ba3a1ab2ab1b/bracketrightbig
(5.3.4.C)
=P≡/parenleftbig
1ba2aba3aba2bba2bba1bab1b2aba2aba1aab1a3aba3aa1aab2aab1ab/parenrightbig
= 1ba1a1aab1aab1b1bab2aba2aba2aba2bba2bba3aba3aba3aa2aab1ab.
Clones of pigmented words 36 / 41 S. Giraudo6 OPEN QUESTIONS AND FUTURE WORK —
5.3.5 Presentation. In order to establish a presentation of Pill1,1(M), we introduce an al-
ternative description of the clone congruence ≡through a new equivalence relation ≡′. For this,
let us deﬁne ≡′as the equivalence relation on P(M) satisfying
p.(α1·q).(α2·q).r.r′.(α3·q).p′≡′p.(α1·q).r.(α2·q).r′.(α3·q).p′(5.3.5.A)
≡′p.(α1·q).r.r′.(α2·q).(α3·q).p′,
p.(α1·q1).r.(β1·q2).(α2·q1).r′.(β2·q2).p′≡′p.(α1·q1).r.(α2·q1).(β1·q2).r′.(β2·q2).p′,(5.3.5.B)
wherep,p′,q,q1,q2,r,r′∈P(M) and α1, α2, α3, β1, β2∈ M .
◮Lemma 5.3.5.A — For any monoid M, the binary relations ≡and≡′onP(M)are equal.
◮Theorem 5.3.5.B — For any monoid M, the clone Pill1,1(M)admits the presentation/parenleftbig
GM,R′
M/parenrightbig
whereR′
Mis the set RMaugmented with the GM-equations
rcM(1α11α22e3e1α3)R′
MrcM(1α12e1α23e1α3)R′
MrcM(1α12e3e1α21α3), (5.3.5.C)
rcM/parenleftbig
1α12e3β11α24e3β2/parenrightbig
R′
MrcM/parenleftbig
1α12e1α23β14e3β2/parenrightbig
, (5.3.5.D)
where α1, α2, α3, β1, β2∈ M andeis the unit of M.
By Theorem 5.3.5.B , any Pill1,1(M)-algebra is an M-pigmented monoid ( A, ⋆,u,pα) where ⋆
and p αsatisfy
pα1(x1)⋆pα2(x1)⋆ x2⋆ x3⋆pα3(x1) = p α1(x1)⋆ x2⋆pα2(x1)⋆ x3⋆pα3(x1) ( 5.3.5.E)
= p α1(x1)⋆ x2⋆ x3⋆pα2(x1)⋆pα3(x1),
pα1(x1)⋆x2⋆pβ1(x3)⋆pα2(x1)⋆x4⋆pβ2(x3) = p α1(x1)⋆x2⋆pα2(x1)⋆pβ1(x3)⋆x4⋆pβ2(x3),(5.3.5.F)
for any x1, x2, x3, x4∈ Aandα1, α2, α3, β1, β2∈ M .
6 Open questions and future work
We have introduced the construction Pproducing clones from monoids and studied a selection of
quotient clones of P(M). This has resulted in a novel hierarchy of clone realizatio ns of varieties of
monoids. Here follow some open questions and future areas of investigation raised by this work.
Variations around the variety of pigmented monoids
As shown by Theorem 3.2.2.A ,P(M) is a clone realization of the variety of M-pigmented monoids.
This variety stems from the six relations ( 3.1.1.B ), (3.1.1.C ), (3.1.1.D ), (3.1.1.E ), (3.1.1.F ), and ( 3.1.1.G ).
A compelling question to consider involves the alternative varieties resulting from the omission
of some of these relations, and proposing in this way variati ons of the construction Pin order to
describe the corresponding clone realizations. There are t herefore 26−1 = 63 such alternative
varieties but only 23−1 = 7 seem worth to study because these relations are naturall y paired as
outlined at the end of Section 3.1.1. Indeed, ( 3.1.1.B ) pairs with ( 3.1.1.C ), (3.1.1.D ) with ( 3.1.1.E ),
and ( 3.1.1.F ) with ( 3.1.1.G ). In particular, in [ Gir18 ] (see also [ Gir17 ;Gir20a ]), the variety that
arises by omitting the pair consisting of Relations ( 3.1.1.D ) and ( 3.1.1.E ) (except for few detail) has
been studied via operads and involves conﬁgurations of nonc rossing and decorated diagonals in
polygons. Such objects recur very frequently in combinator ics [CP92 ;FN99 ;DRS10 ;PR14 ] and
considering clone structures on these objects could give an original point of view and lead to new
questions and results in this domain.
Clones of pigmented words 37 / 41 S. Giraudo6 OPEN QUESTIONS AND FUTURE WORK —
Linearization of the construction and relations
The clones examined in this work are deﬁned within the catego ry of sets. It is of course possible
to extend the construction Pin order to see the produced clones as clones on the K-linear
span of the set of M-pigmented words where Kis any ﬁeld of zero characteristic. This type
of extension opens a myriad of new questions. Among these, th e broad question of describing
the nontrivial relations satisﬁed by certain linear combin ations of terms of the variety of M-
pigmented monoids is worth considering. When translated in to the language of clones, this
equates to describe the presentations of certain subclones of the linearization of P(M) which are
generated by some linear combinations of M-pigmented words. More speciﬁcally, this question
can be posed, given α1, α2∈ M , for the commutator 1α12α2−2α21α1and for the anti-commutator
1α12α2+2α21α1in the linearization of P(M), as well as in the linearizations of some of its quotients
constructed in Sections 4.2and5. Similar questions have been explored for diﬀerent varieti es of
algebras: for instance for the anti-commutator of associat ive algebras [ Gle70 ], for the commutator
and anti-commutator of bicommutative algebras [ DI18], and for the anti-commutator of pre-Lie
algebras [ BL11 ].
Finitely generated subclones
In the present work, the clone P(M) is studied along with some of its quotients. A potential
next step in this research involves paying attention to subc lones of P(M) and to some of its
quotients generated by some ﬁnite sets of elements. This app roach has been considered in [ Gir15 ]
where a construction Tfrom monoids to operads has been introduced and numerous ope rads on
combinatorial objects have been discovered (on several sor ts of words, trees, and paths). Recall,
as explained in Section 3.1.1, that the construction Pcan be seen as a generalization of the
construction Tat the level of clones. In this way, we could expect to develop a hierarchy of
clones based on a large collection of sorts of combinatorial objects. As consequences, mainly
by describing presentations of such derived clones, it may s ometimes be feasible to establish a
convergent rewrite system on the terms of the underlying var iety. This could lead to new methods
for the enumeration of the involved combinatorial objects a nd for their —exhaustive or random—
generation (see [ Gir19 ] and [ Gir20b ] in the context of operads rather than clones).
Plactic-like monoids and other constructions
As brieﬂy highlighted in Section 4.1.1, many monoids hold a distinctive role in algebraic com-
binatorics. Examples include the plactic monoid [ LS81 ;Lot02 ], the hypoplactic monoid [ KT97 ],
the sylvester monoid [ HNT05 ], the Bell monoid [ Rey07 ], the Baxter monoid [ Gir12 ], the k-recoil
monoid [ NRT11 ], and the stalactic monoid [ HNT08 ]. These monoids can be deﬁned through con-
gruences of free monoids on a totally ordered alphabet. The m ain observation here is that these
monoids intervene in a crucial way to construct Hopf algebra s generalizing the prototypical one of
symmetric functions [ Gel+95 ] (also refer to the previously cited works and [ Gir11 , Chap. 5] for a
comprehensive description and properties of this construc tion). A key component here is formed
byP-symbols, which —akin to the present work— are maps sending w ords to some combinatorial
objects encoding the equivalence classes. In the context of the present work, we are interested in
clone congruences of P(M), which are in particular also monoid congruences on words o n integers.
As a matter of fact, most of the previously cited congruences do not deﬁne clone congruences
ofP(M). Nevertheless, instead of trying to use already existing m onoids to propose new clone
congruences of P(M) (which is a possible direction for future work that deserve s to be explored),
Clones of pigmented words 38 / 41 S. GiraudoReferences —
we can proceed in the opposite direction. This consists in tr ying to build Hopf algebras in the
same manner by considering the clone congruences and monoid s at the heart of the constructions
ofArra k(M),Magnk,k′(M),Stal k(M), and Pillk,k′(M).
General case for pigmented magnets and pigmented pillars
The ﬁnal question we ask here concerns the clones Magnk,k′(M) and Pillk,k′(M). These clone are
well understood in the case k= 1 = k′. Indeed, both realizations and presentations are furnishe d
for each clone in this case. The question here consists in est ablishing generalizations of these
results working for any nonnegative integers kandk′.
7 References
[Adá+10 ] J. Adámek, J. Rosický, E. M. Vitale, and F. W. Lawvere. Algebraic Theories: A Cate-
gorical Introduction to General Algebra . Cambridge Tracts in Mathematics. Cambridge
University Press, 2010 (cit. on p. 2).
[Bez+03 ] M. Bezem, J. W. Klop, R. de Vrijer, and Terese. Term Rewriting Systems . Cambridge
Tracts in Theoretical Computer Science. Cambridge Univers ity Press, 2003, p. 884
(cit. on pp. 2,12,26).
[BF93 ] R. V. Book and Otto F. String-Rewriting Systems . Springer New York, NY, 1993,
pp. viii+189 (cit. on p. 26).
[BL11 ] N. Bergeron and J.-L. Loday. “The symmetric operation in a f ree pre-Lie algebra is
magmatic”. In: P. Am. Math. Soc. 139.5 (2011), pp. 1585–1597 (cit. on p. 38).
[BMW12 ] C. Berger, P.-A. Melliès, and M. Weber. “Monads with aritie s and their associated
theories”. In: J. Pure Appl. Algebra 216.8-9 (2012), pp. 2029–2048 (cit. on p. 2).
[BN98 ] F. Baader and T. Nipkow. Term rewriting and all that . Cambridge University Press,
Cambridge, 1998, pp. xii+301 (cit. on pp. 2,12,26).
[CL01 ] F. Chapoton and M. Livernet. “Pre-Lie algebras and the root ed trees operad”. In: Int.
Math. Res. Notices 8 (2001), pp. 395–408 (cit. on p. 2).
[Coh65 ] P. M. Cohn. Universal Algebra . 1981 revised ed. by D. Reidel. xv+412. Harper & Row,
1965 (cit. on pp. 2,4).
[CP92 ] V. Capoyleas and J. Pach. “A Turán-type theorem on chords of a convex polygon”.
In:J. Comb. Theory B 56.1 (1992), pp. 9–15 (cit. on p. 37).
[DI18] A. S. Dzhumadil’daev and N. A. Ismailov. “Polynomial ident ities of bicommutative
algebras, Lie and Jordan elements”. In: Commun. Algebra 46.12 (2018), pp. 5241–5251
(cit. on p. 38).
[DRS10 ] J. A. De Loera, J. Rambau, and F. Santos. Triangulations . Vol. 25. Algorithms and
Computation in Mathematics. Structures for algorithms and applications. Springer-
Verlag, Berlin, 2010, pp. xiv+535 (cit. on p. 37).
[EM65 ] S. Eilenberg and J. C. Moore. “Adjoint functors and triples ”. In: Illinois J. Math. 9
(1965), pp. 381–398 (cit. on p. 2).
[Eva71 ] T. Evans. “The lattice of semigroup varieties”. In: Semigroup Forum 2 (1971), pp. 1–
43 (cit. on p. 3).
Clones of pigmented words 39 / 41 S. GiraudoReferences — References
[FN99 ] P. Flajolet and M. Noy. “Analytic combinatorics of non-cro ssing conﬁgurations”. In:
Discrete Math. 204.1-3 (1999), pp. 203–229 (cit. on p. 37).
[Fuj20 ] S. Fujii. “Introduction to universal algebra and clones”. In:arXiv:2004.10983 (2020)
(cit. on p. 4).
[Gel+95 ] I.M. Gelfand, D. Krob, A. Lascoux, B. Leclerc, V.S. Retakh, and J.-Y. Thibon. “Non-
commutative symmetric functions I”. In: Adv. Math. 112 (1995) (cit. on p. 38).
[Gir11 ] S. Giraudo. “Combinatoire algébrique des arbres”. PhD the sis. Université Paris-Est
Marne-la-Vallée, 2011 (cit. on p. 38).
[Gir12 ] S. Giraudo. “Algebraic and combinatorial structures on pa irs of twin binary trees”.
In:J. Algebra 360 (2012), pp. 115–157 (cit. on pp. 15,38).
[Gir15 ] S. Giraudo. “Combinatorial operads from monoids”. In: J. Algebr. Comb. 41.2 (2015),
pp. 493–538 (cit. on pp. 2,3,8,14,38).
[Gir17 ] S. Giraudo. “Combalgebraic structures on decorated cliqu es”. In: Formal Power Series
and Algebraic Combinatorics 78B.15 (2017). Proceedings published in Sém. Lothar.
Combin. (cit. on p. 37).
[Gir18 ] S. Giraudo. Nonsymmetric Operads in Combinatorics . ix+172. Springer Nature Switzer-
land AG, 2018 (cit. on pp. 2,8,37).
[Gir19 ] S. Giraudo. “Colored operads, series on colored operads, a nd combinatorial generating
systems”. In: Discrete Math. 342.6 (2019), pp. 1624–1657 (cit. on pp. 2,38).
[Gir20a ] S. Giraudo. “Operads of decorated cliques I: Construction and quotients”. In: Sém.
Lothar. Combin. 79.B79g (2020) (cit. on pp. 2,37).
[Gir20b ] S. Giraudo. “Tree series and pattern avoidance in syntax tr ees”. In: J. Comb. Theory.
A176 (2020) (cit. on pp. 2,38).
[Gle70 ] C. M. Glennie. “Identities in Jordan algebras”. In: Computational Problems in Ab-
stract Algebra (Proc. Conf., Oxford, 1967) . Pergamon, Oxford, 1970, pp. 307–313 (cit.
on p. 38).
[GLV22 ] S. V. Gusev, E. W. H. Lee, and B. M. Vernikov. “The lattice of v arieties of monoids”.
In:Jpn. J. Math. (2022) (cit. on p. 3).
[HNT05 ] F. Hivert, J.-C. Novelli, and J.-Y. Thibon. “The algebra of binary search trees”. In:
Theor. Comput. Sci. 339.1 (2005), pp. 129–165 (cit. on pp. 15,38).
[HNT08 ] F. Hivert, J.-C. Novelli, and J.-Y. Thibon. “Commutative c ombinatorial Hopf alge-
bras”. In: J. Algebr. Comb. 28.1 (2008), pp. 65–95 (cit. on pp. 35,38).
[HP07 ] M. Hyland and J. Power. “The category theoretic understand ing of universal algebra:
Lawvere theories and monads”. In: Electron. Notes Theor. Comput. Sci. 172 (2007),
pp. 437–458 (cit. on p. 2).
[KKP11 ] O. Klíma, M. Korbelář, and L. Polák. “Rewriting in varietie s of idempotent semi-
groups”. In: Algebraic informatics . Vol. 6742. Lect. Notes Comput. Sc. Springer, Hei-
delberg, 2011, pp. 185–200 (cit. on p. 3).
[KT97 ] D. Krob and J.-Y. Thibon. “Noncommutative symmetric funct ions IV : Quantum
linear groups and Hecke algebras at q= 0”. In: J. Algebr. Comb. 6 (1997), pp. 339–
376 (cit. on p. 38).
[Law63 ] F. W. Lawvere. “Functorial semantics of algebraic theorie s”. PhD thesis. Columbia
University, 1963 (cit. on p. 2).
Clones of pigmented words 40 / 41 S. GiraudoReferences — References
[Lod96 ] J.-L. Loday. “La renaissance des opérades”. In: Séminaire Bourbaki 37.792 (1996),
pp. 47–74 (cit. on p. 2).
[Lot02 ] M. Lothaire. Algebraic combinatorics on words . Vol. 90. Encyclopedia of Mathematics
and its Applications. Cambridge University Press, Cambrid ge, 2002 (cit. on pp. 15,
38).
[LS81 ] A. Lascoux and M.-P. Schützenberger. “Le monoïde plaxique ”. In: Noncommutative
Structures in Algebra and Geometric Combinatorics 109 (1981), pp. 129–156 (cit. on
p.38).
[LV12 ] J.-L. Loday and B. Vallette. Algebraic Operads . Vol. 346. Grundlehren der mathema-
tischen Wissenschaften. Pages xxiv+634. Heidelberg: Spri nger, 2012 (cit. on p. 2).
[May72 ] J. H. Mayne. “Flexible algebras of degree two”. In: T. Am. Math. Soc. 172 (1972),
pp. 69–81 (cit. on p. 2).
[Mén15 ] M. Méndez. Set Operads in Combinatorics and Computer Science . xv+129. Springer
International Publishing, 2015 (cit. on p. 2).
[Neu70 ] W. D. Neumann. “Representing varieties of algebras by alge bras”. In: J. Austral. Math.
Soc. 11 (1970), pp. 1–8 (cit. on pp. 4,7).
[NRT11 ] J.-C. Novelli, C. Reutenauer, and J.-Y. Thibon. “Generali zed descent patterns in
permutations and associated Hopf algebras”. In: Eur. J. Comb. 32.4 (2011), pp. 618–
627 (cit. on p. 38).
[NS00 ] O. Neto and H. Sezinando. “Band monoid languages revisited ”. In: Semigroup Forum
61.1 (2000), pp. 32–45 (cit. on pp. 3,24).
[PR14 ] V. Pilaud and J. Rué. “Analytic combinatorics of chord and h yperchord diagrams
with kcrossings”. In: Adv. Appli. Math. 57 (2014), pp. 60–100 (cit. on p. 37).
[Rey07 ] M. Rey. “Algebraic constructions on set partitions”. In: Formal Power Series and
Algebraic Combinatorics (2007) (cit. on p. 38).
[Slo] N. J. A. Sloane. The On-Line Encyclopedia of Integer Sequences .https://oeis.org/
(cit. on pp. 21,30).
[SS82 ] J. Siekmann and P. Szabó. “A Noetherian and conﬂuent rewrit e system for idempotent
semigroups”. In: Semigroup Forum 25.1-2 (1982), pp. 83–110 (cit. on pp. 3,24).
[SVV09 ] L. N. Shevrin, B. M. Vernikov, and M. V. Volkov. “Lattices of semigroup varieties”.
In:Russ. Math. 53.1 (2009) (cit. on p. 3).
[Tay93 ] W. Taylor. “Abstract clone theory”. In: Algebras and orders . Vol. 389. NATO Adv.
Sci. I. C-Mat. Kluwer Acad. Publ., Dordrecht, 1993, pp. 507– 530 (cit. on pp. 2,4).
Clones of pigmented words 41 / 41 S. Giraudo
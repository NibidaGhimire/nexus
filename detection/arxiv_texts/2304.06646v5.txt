arXiv:2304.06646v5  [cs.LO]  12 Feb 2024Characterising ModalFormulaswith Examples
BALDERTENCATE ,ILLC, University ofAmsterdam, TheNetherlands
RAOULKOUDIJS ,University ofBergen, Norway
We study the existence of ﬁnite characterisations for modal formulas. A ﬁnite characterisation of a modal
formula/u1D711is a ﬁnitecollectionof positiveand negative examples that distinguishes /u1D711from every other,non-
equivalent modal formula, where an example is a ﬁnite pointe d Kripke structure. This deﬁnition can be
restrictedtospeciﬁcframeclassesandtofragmentsofthem odallanguage:amodalfragment Ladmitsﬁnite
characterisations with respect to a frame class Fif every formula /u1D711∈ Lhas a ﬁnite characterisation with
respect to Lconsisting of examples that are based on frames in F. Finite characterisations are useful for
illustration,interactivespeciﬁcation,and debugging of formalspeciﬁcations,andtheir existence isaprecon-
dition for exact learnability with membership queries. We s how that the full modal language admits ﬁnite
characterisations withrespecttoa frameclass Fonlywhenthemodallogicof Fislocallytabular.Wethen
study which modal fragments, freely generated by some set of connectives, admit ﬁnite characterisations.
Our main result is that the positivemodallanguage withoutt he truth-constants ⊤and⊥admits ﬁnite char-
acterisationsw.r.t.theclassofallframes.Thisresultis essentiallyoptimal:ﬁnitecharacterizabilityfailswhen
thelanguage is extended with thetruthconstant ⊤or⊥orwith allbutvery limitedformsof negation.
CCS Concepts: • Theoryof computation →Modal andtemporallogics ;Descriptionlogics .
Additional Key Words and Phrases: Finite Characterisation s, Unique Characterisations, Dualities, Splittings,
ModalLogic, Positive Logics
ACM Reference Format:
BaldertenCateandRaoulKoudijs.2022.CharacterisingMod alFormulaswithExamples. 1,1(February2022),
27pages.https://doi.org/XXXXXXX.XXXXXXX
1 INTRODUCTION
By the standard Kripke semantics of modal logic, we can associa te to every modal formula /u1D711
the (possibly inﬁnite) class of pointed models that satisfy it, and, by complementation, the set of
pointed models that do not satisfy it. We will call the former positive examples of/u1D711, and we will
callthelatter negativeexamples of/u1D711.Westudythequestionwhetheritispossibleto characterise a
modalformula /u1D711, byaﬁnite set ofpositive andnegative examples.Thatis, we stu dy thequestion
whether there is a ﬁnite collection of positive and negative exa mples, such that /u1D711is the only
formula (up to logical equivalence), that ﬁts these examples . Furthermore, ideally, we would like
theseexamplestobeﬁnitestructures.Ifsuchauniquelychara cterizingﬁnitesetofﬁniteexamples
exists, we callit a ﬁnitecharacterisation of/u1D711.
Generating a uniquely characterizing set of examples for a given logical speciﬁcation can be
useful for illustration, interactive speciﬁcation, and debugg ing purposes (e.g., [ 13] for relational
databasequeries,[ 1]forschemamappings,and[ 17]forXMLqueries).Theexhaustivenatureofthe
Authors’ addresses: BaldertenCate , ILLC, University of Amsterdam, Science Park 107, Amsterdam, The Netherlands, b.
d.tencate@uva.nl; Raoul Koudijs , University of Bergen, Thormøhlens Gate 55, 5008 Bergen, Norway, B ergen, Norway,
raoulxluoar@gmail.com.
Permission to make digital or hard copies of all or part of this work f or personal or classroom use is granted without fee
provided that copies are not made or distributed for proﬁt or comme rcial advantage and that copies bear this notice and
the full citation on the ﬁrst page. Copyrights for components of th is work owned by others than ACM must be honored.
Abstractingwithcreditispermitted.Tocopy otherwise,orrepublis h,topost onserversortoredistributetolists,requires
prior speciﬁc permission and/or afee.Request permissions fromperm issions@acm.org.
© 2022Association for Computing Machinery.
XXXX-XXXX/2022/2-ART$15.00
https://doi.org/XXXXXXX.XXXXXXX
,Vol. 1,No. 1,Article. Publication date: February 2022.2 BaldertenCateand RaoulKoudijs
examplesisusefulinthesesettings, as,intuitively, theyes sentially displayallthe‘ways’inwhich
thespeciﬁcationcanbesatisﬁedorfalsiﬁed.Theexistenceo fﬁnitecharacterisationsisalsoimpor-
tant as a precondition for learnability in the model of exact learning with membership queries [2]:
(eﬃcient) exact learnability with membership queries is only p ossible when the concept class in
questionadmitsaﬁnite(polynomial-size)uniquecharacteriz ations.Conversely,aneﬀectiveproce-
dureforconstructingﬁnitecharacterizationsgivesrisetoane ﬀective(butnotnecessarilyeﬃcient)
exactlearningalgorithmwithmembershipqueries.Exactlear nabilityisanactivetopicofresearch
in knowledge representation, where, in particular, the learnab ility of concept expressions in vari-
ousdescription logicsis studied, correspondingto fragments ofmodallogic[ 6–8,16,18].
Webeginbyobservingthat nomodalformulahasaﬁnitecharacterization withrespectt othefull
modal language , if we consider the modal logic K(i.e., the modal logic of the class of all frames).
Thisinitial negative result leadsusto explore two questions:
(1) For which frame classes /u1D43Edoes it hold that the modal logic of /u1D43Eadmits ﬁnite characteriza-
tions?
(2) Whichfragmentsofthe modallanguageadmit ﬁnite character izations(w.r.t.all frames)?
We answer the ﬁrst question, by showing that the modal logics tha t admit ﬁnite characteriza-
tionsarepreciselythe locallytabular modallogics.Sincelocaltabularityisquiterare,wecanvie w
thisas anegative result, whichprovides additional motivati on forstudying the secondquestion.
In order to study the second question, we consider all modal frag mentsL/u1D436that are generated
byasetofoperators /u1D436⊆ {∧,∨,/Diamond,/square,⊤,⊥,¬/u1D44E/u1D461},where¬/u1D44E/u1D461denotesatomicnegation(i.e.,negation
applied to propositional variables). We almost completely c lassify these fragments as to whether
theyadmitﬁnitecharacterizations.Inparticular,ourmainr esultstatesthat L/square,/Diamond,∧,∨(i.e.,theposi-
tivefragmentwithout ⊤and⊥)isamaximalfragmentadmittingﬁnitecharacterizations,andth at
ﬁnite characterizationscanbe computedeﬀectively forformu lasin thisfragment.
Asigniﬁcantpartofthepaperisdevotedtothestudyofthefrag mentL/square,/Diamond,∧,∨.Buildingon[ 12],
wegiveasemanticcharacterizationofthisfragmentintermso finvariancefor“weaksimulations”.
WethenproceedtostudythecategoryofﬁnitepointedKripkest ructuresunderweaksimulations.
In particular, we establish a method for constructing ﬁnite dua lities (a.k.a., splittings) in this cat-
egory.Finally, we show that these ﬁnite dualities give rise to ﬁnite characterisations for L/square,/Diamond,∧,∨-
formulas.Wealsostudysizeboundsforﬁnitecharacterizatio ns,andthecomputationalcomplexity
ofcomputingthese.
Outline.InSection 2,wereview basicconceptsandnotation frommodallogic.InSect ion3,we
introduce the notion of ﬁnite characterizations, and we present ou r main results regarding ﬁnite
characterizationsformodalformulas.Section 4isdedicatedtotheproofofourresultfor L/square,/Diamond,∧,∨,
and also develops the general theory of this speciﬁc fragment. F inally, in Section 5, we discuss
complexityaspects,and size bounds,and we discuss furtherext ensions ofour framework.
RelatedWork. MostoftheresultspresentedherewereobtainedintheMScthes is[11].Wedraw
on earlier results in [ 1,18] regarding ﬁnite characterizations for database schema mappi ngs and
conjunctivequeries(equivalently,positive-existentialFOf ormulas).Speciﬁcally,aswewillexplain
inSection 3,itfollowsfromresultsin[ 1,18]thatL/Diamond,∧,∨,⊤admitsﬁnitecharacterizations.Recently,
in [8,19] the results from [ 1,18] were further extended to obtain ﬁnite characterizations in th e
presence of certain background theories such as lightweight o ntologies. In [ 6,16], the authors
studied the existence of ﬁnite characterisations for fragments of the linear temporal logic LTL.
Finally, [17] studied ﬁnite characterizations for XPath twig-queries, wh ich can also be viewed as
a fragmentof modallogic(with childand descendant modalities) interpreted on ﬁnite trees.
,Vol. 1,No. 1, Article. Publication date: February2022.Characterising Modal FormulaswithExamples 3
2 PRELIMINARIES (MODAL LOGIC)
In this preliminary section, we will review the basics of modal logic. We refer to [ 3] for more
details.
Deﬁnition 2.1. (Full Modal Language, Modal Fragments) The full modal language Lfull[Prop]
over aset Prop ofpropositional variablesis recursively gene rated by
/u1D711::=⊤ | ⊥ |/u1D45D| ¬at/u1D45D| (/u1D711∧/u1D711) | (/u1D711∨/u1D711) |/Diamond/u1D711|/square/u1D711
where/u1D45D∈Prop and ¬/u1D44E/u1D461has the same semantics as ordinary negation ¬. Amodal language L
overthevariablesProp(notation: L[Prop])isanycollectionofmodalformulasoverProp,i.e.any
subsetof Lfull[Prop].Occasionallywemaywritejust Lfull,whenthesetofbasevariableswhenit
is clearfromcontext.
For/u1D446⊆ {∧,∨,/Diamond,/square,⊤,⊥,¬/u1D44E/u1D461}, we denote by L/u1D446[Prop]fragment of Lfull[Prop]consisting of
formulasgeneratedfrompropositional variables using onlythe operatorsin /u1D446.
We will refer to/squareand/Diamondasmodal operators . Thedualof a connective in {∧,∨,/Diamond,/square,⊤,⊥}is
deﬁned as follows: ∧,∨are each others dual, /square,/Diamondare each others dual, and ⊤,⊥are each others
dual.
Notethatweassumeformulastobein negationnormalform (i.e.weassumethatnegationscan
onlyappearinfrontofvariables,andthatdoublenegationsnevero ccur)andmakethisexplicitby
viewing¬/u1D44E/u1D461asa restricted connective that canonlybe applied to (unnegated) variables.
Deﬁnition2.2. (KripkeModels,PointedModels,Frames)A(Kripke) modelisatriple/u1D440=(/u1D451/u1D45C/u1D45A(/u1D440),/u1D445,/u1D463)
where/u1D451/u1D45C/u1D45A(/u1D440)is a set of ‘possible worlds’, /u1D445⊆/u1D451/u1D45C/u1D45A(/u1D440) ×/u1D451/u1D45C/u1D45A(/u1D440)a binary ‘accessibility’ rela-
tion and/u1D463:/u1D451/u1D45C/u1D45A(/u1D440) → P(Prop)is a colouring.1A (Kripke) frameis a Kripke model without a
colouring. For any model /u1D440=(/u1D451/u1D45C/u1D45A(/u1D440),/u1D445,/u1D463), let Fr(/u1D440)=(/u1D451/u1D45C/u1D45A(/u1D440),/u1D445)be its underlying frame.
Apointedmodel isa pair(/u1D440,/u1D460)ofa Kripkemodel /u1D440together with a state /u1D460∈/u1D451/u1D45C/u1D45A(/u1D440).2
Deﬁnition 2.3. (Semantics) Thesemantic clausesformodallogicare asfollow s:
/u1D440,/u1D460|=/u1D45Diﬀ/u1D45D∈/u1D463(/u1D460)
/u1D440,/u1D460|=¬/u1D44E/u1D461/u1D45Diﬀ not/u1D440,/u1D460|=/u1D45D
/u1D440,/u1D460|=⊤ always
/u1D440,/u1D460|=⊥ never
/u1D440,/u1D460|=/u1D711∧/u1D713iﬀ/u1D440,/u1D460|=/u1D711and/u1D440,/u1D460|=/u1D713
/u1D440,/u1D460|=/u1D711∨/u1D713iﬀ/u1D440,/u1D460|=/u1D711or/u1D440,/u1D460|=/u1D713
/u1D440,/u1D460|=/Diamond/u1D711iﬀ∃/u1D461∈/u1D445[/u1D460]with/u1D440,/u1D461|=/u1D711
/u1D440,/u1D460|=/square/u1D711iﬀ∀/u1D461∈/u1D445[/u1D460]it holdsthat /u1D440,/u1D461|=/u1D711
Finally,we set:
mod(/u1D711):={(/u1D440,/u1D460) |/u1D440,/u1D460|=/u1D711},ﬁnmod(/u1D711):={(/u1D440,/u1D460) |/u1D440,/u1D460|=/u1D711, /u1D451/u1D45C/u1D45A(/u1D440)is ﬁnite}
Foranytwomodalformulas /u1D711and/u1D713,wesaythat /u1D711entails/u1D713andwrite/u1D711|=/u1D713if/u1D45A/u1D45C/u1D451(/u1D711) ⊆/u1D45A/u1D45C/u1D451(/u1D713),
i.e. if every modelof /u1D711isalso a modelof /u1D713. Finally, foranyclassof frames Fwe deﬁne
modF(/u1D711):={(/u1D440,/u1D460) |/u1D440,/u1D460|=/u1D711& Fr(/u1D440) ∈ F}
1An ordinary valuation function /u1D449: Prop→ P(/u1D451/u1D45C/u1D45A(/u1D440))induces a ‘colouring’ /u1D450/u1D45C/u1D459(/u1D449):/u1D451/u1D45C/u1D45A(/u1D440) → P(Prop)as its
transpose /u1D450/u1D45C/u1D459(/u1D449)(/u1D464):={/u1D45D∈Prop|/u1D464∈/u1D449(/u1D45D)}.
2Sometimes we willbesloppy and write /u1D440,/u1D460instead of (/u1D440,/u1D460)forpointed models.
,Vol. 1,No. 1,Article. Publication date: February 2022.4 BaldertenCateand RaoulKoudijs
Deﬁnition2.4. (Bisimulation)Let (/u1D440,/u1D460),(/u1D440′,/u1D460′)betwopointedmodels.Arelation /u1D44D⊆/u1D451/u1D45C/u1D45A(/u1D440)×
/u1D451/u1D45C/u1D45A(/u1D440′)is abisimulation (notation:/u1D44D:/u1D440,/u1D460↔/u1D440′,/u1D460′), and we say that (/u1D440,/u1D460)and(/u1D440′,/u1D460′)are
bisimilar, if (/u1D460,/u1D460′) ∈/u1D44Dandfor all (/u1D461,/u1D461′) ∈/u1D44D,the followingclauses are satisﬁed:
(atom)/u1D463/u1D440(/u1D461)=/u1D463/u1D440′(/u1D461′)
(forth)For all/u1D462∈/u1D451/u1D45C/u1D45A(/u1D440),/u1D445/u1D440/u1D461/u1D462implies∃/u1D462′∈/u1D440′with/u1D445/u1D440′/u1D461′/u1D462′and(/u1D462,/u1D462′) ∈/u1D44D
(back)For all/u1D462′∈/u1D451/u1D45C/u1D45A(/u1D440′),/u1D445/u1D440′/u1D461′/u1D462′implies∃/u1D462∈/u1D440with/u1D445/u1D440/u1D461/u1D462and(/u1D462,/u1D462′) ∈/u1D44D
T/h.sc/e.sc/o.sc/r.sc/e.sc/m.sc2.5. Modalformulasareinvariantunderbisimulations,i.e.if /u1D440,/u1D460|=/u1D711and/u1D440,/u1D460↔/u1D440′,/u1D460′
then/u1D440′,/u1D460′|=/u1D711(and viceversa) for all modal formulas /u1D711.
Kripkemodelscanbeseenasaspecialtypeofﬁrstorderstruc tures,andthatthemodallanguage
canbeseenasa fragment ofﬁrst orderlogicover thesespecialtypesofstructuresth roughafully
compositional translation that is known as the standard translation that maps a modal formula /u1D711
toa ﬁrst orderformula /u1D446/u1D447/u1D465(/u1D711)with onefree variable, /u1D465.Infact,thereis awell-known converseto
bisimulation-invariance, known asthe VanBenthem Characterisation Theorem .
T/h.sc/e.sc/o.sc/r.sc/e.sc/m.sc2.6(V/a.sc/n.scB/e.sc/n.sc/t.sc/h.sc/e.sc/m.scC/h.sc/a.sc/r.sc/a.sc/c.sc/t.sc/e.sc/r.sc/i.sc/s.sc/a.sc/t.sc/i.sc/o.sc/n.sc[ 20]).Aﬁrst-orderformula /u1D6FC(/u1D465)(inthesigna-
turewithonebinaryrelationandﬁnitelymanyunaryrelatio ns)isinvariantunderbisimulationiﬀit
isequivalent to the standard translation of amodalformula .
For every pointed model (/u1D440,/u1D460), let(/u1D440↾/u1D460,/u1D460)be thepoint-generated submodel of/u1D440generated
by/u1D460,i.e.therestriction of /u1D440tothesubset ofallnodesreachablefrom /u1D460.Itiseasilyseenthatevery
pointedmodel (/u1D440,/u1D460)isbisimilartoitspoint-generatedsubmodel (/u1D440↾/u1D460,/u1D460).Wesaythatapointed
model(/u1D440,/u1D460)ispoint-generatedif /u1D440=/u1D440↾/u1D460.Wesaythatabisimulation /u1D44D:/u1D440,/u1D460↔/u1D440′,/u1D460′istotal
if/u1D451/u1D45C/u1D45A(/u1D44D)=/u1D451/u1D45C/u1D45A(/u1D440)and/u1D45F/u1D44E/u1D45B(/u1D44D)=/u1D451/u1D45C/u1D45A(/u1D440′).
L/e.sc/m.sc/m.sc/a.sc 2.7. If/u1D44D:/u1D440,/u1D460↔/u1D440′,/u1D460′and the pointed models (/u1D440,/u1D460)and(/u1D440′,/u1D460′)are point-generated,
then/u1D44Distotal.
P/r.sc/o.sc/o.sc/f.sc.Let/u1D44D:/u1D440,/u1D460↔/u1D440′,/u1D460′where/u1D440=/u1D440↾/u1D460and/u1D440′=/u1D440′↾/u1D460′. First, we show that for each
/u1D461∈/u1D451/u1D45C/u1D45A(/u1D440)there is some /u1D461′∈/u1D451/u1D45C/u1D45A(/u1D440′)with(/u1D461,/u1D461′) ∈/u1D44D.Since(/u1D440,/u1D460)is point-generated, there is
someﬁnitepath (/u1D4610,...,/u1D461/u1D45B)in/u1D440with/u1D4610=/u1D460and/u1D461/u1D45B=/u1D461.Applyingthe[forth]clause /u1D45Btimesweget
a path(/u1D461′
0,...,/u1D461′
/u1D45B)in/u1D440′with/u1D461′
0=/u1D460′and(/u1D461/u1D456,/u1D461′
/u1D456) ∈/u1D44Dfor all/u1D456≤/u1D45B.Then/u1D461′
/u1D45B∈/u1D451/u1D45C/u1D45A(/u1D440′)is as desired.
Theproofin the otherdirection is entirely symmetric. /square
Next,we deﬁne a numberofnotions that are concernedwith depth.
Deﬁnition 2.8. (ModalDepth) The modal depth /u1D451(/u1D711)of a formula /u1D711is the length of the longest
sequenceof nested modaloperatorsin /u1D711.
Deﬁnition2.9. (Path,Height)A ﬁnitepath throughamodel /u1D440isaﬁnite sequence (/u1D4610,...,/u1D461/u1D45B)of
statesin/u1D451/u1D45C/u1D45A(/u1D440)suchthat/u1D445(/u1D461/u1D456,/u1D461/u1D456+1)holdsforall /u1D456</u1D45B−1.We alsowrite /u1D4610/u1D445.../u1D445/u1D461 /u1D45Bforthispath.
The length of a path is the number of states visited, i.e. the leng th of(/u1D4610,...,/u1D461/u1D45B)is exactly/u1D45B−1.
The height of a pointed model (/u1D440,/u1D460)is the length of the longest ﬁnite path in /u1D440starting at/u1D460, or
∞if there isno ﬁnite upperbound.
Deﬁnition2.10. (/u1D45B-Bisimulations)Let (/u1D440,/u1D460),(/u1D440′,/u1D460′)betwopointedmodelsand /u1D45Banaturalnum-
ber.Wesaythat (/u1D440,/u1D460)and(/u1D440′,/u1D460′)are/u1D45B-bisimilar (notation:/u1D440,/u1D460↔/u1D45B/u1D440′,/u1D460′),ifthereisanindexed
collectionofbinary relations /u1D44D0,...,/u1D44D/u1D45B−1⊆/u1D451/u1D45C/u1D45A(/u1D440) ×/u1D451/u1D45C/u1D45A(/u1D440′)with(/u1D460,/u1D460′) ∈/u1D44D0suchthat
(atom)forall(/u1D461,/u1D461′) ∈/u1D44D0∪...∪/u1D44D/u1D45B−1we have/u1D463/u1D440(/u1D461)=/u1D463/u1D440′(/u1D461′)
and moreover forall /u1D456</u1D45B−1 andall (/u1D461,/u1D461′) ∈/u1D44D/u1D456,the followingclausesare satisﬁed:
(forth)For all/u1D462∈/u1D451/u1D45C/u1D45A(/u1D440),/u1D445/u1D440/u1D461/u1D462implies∃/u1D462′∈/u1D440′with/u1D445/u1D440′/u1D461′/u1D462′and(/u1D462,/u1D462′) ∈/u1D44D/u1D456+1
,Vol. 1,No. 1, Article. Publication date: February2022.Characterising Modal FormulaswithExamples 5
(back)For all/u1D462′∈/u1D451/u1D45C/u1D45A(/u1D440′),/u1D445/u1D440′/u1D461′/u1D462′implies∃/u1D462∈/u1D440with/u1D445/u1D440/u1D461/u1D462and(/u1D462,/u1D462′) ∈/u1D44D/u1D456+1
The collection /u1D44D0,...,/u1D44D/u1D45B−1is calleda/u1D45B-bisimulation .
P/r.sc/o.sc/p.sc/o.sc/s.sc/i.sc/t.sc/i.sc/o.sc/n.sc2.11. [3]Modalformulas of depth atmost /u1D45Bare preserved under /u1D45B-bisimulations.
P/r.sc/o.sc/p.sc/o.sc/s.sc/i.sc/t.sc/i.sc/o.sc/n.sc2.12. For all pointedmodels (/u1D440,/u1D460),ℎ/u1D452/u1D456/u1D454ℎ/u1D461(/u1D440,/u1D460) ≤ |/u1D451/u1D45C/u1D45A(/u1D440)|orℎ/u1D452/u1D456/u1D454ℎ/u1D461(/u1D440,/u1D460)=∞.
P/r.sc/o.sc/o.sc/f.sc.Supposethat ℎ/u1D452/u1D456/u1D454ℎ/u1D461(/u1D440,/u1D460)≠∞,i.e.ℎ/u1D452/u1D456/u1D454ℎ/u1D461(/u1D440,/u1D460)=/u1D45Bforsome/u1D45B.Thenthereissomepath
(/u1D460,/u1D4611...,/u1D461/u1D45B−1)oflength/u1D45Bthrough/u1D440startingat/u1D460.Allelementonthispathmustbedistinct,because,
otherwise, it is easy to see that there would be an inﬁnite path. It followsthat ℎ/u1D452/u1D456/u1D454ℎ/u1D461(/u1D440,/u1D460)=/u1D45B≤
|/u1D451/u1D45C/u1D45A(/u1D440)|. /square
P/r.sc/o.sc/p.sc/o.sc/s.sc/i.sc/t.sc/i.sc/o.sc/n.sc2.13. Let/u1D45Bbeanatural number. Every pointedmodel (/u1D440,/u1D460)withℎ/u1D452/u1D456/u1D454ℎ/u1D461(/u1D440,/u1D460) ≥/u1D45B
is/u1D45B-bisimilarto apointedmodel (/u1D440′,/u1D460′)withℎ/u1D452/u1D456/u1D454ℎ/u1D461(/u1D440′,/u1D460′)=/u1D45B.
P/r.sc/o.sc/o.sc/f.sc.We deﬁne the depth-/u1D45Btree unravelling of a pointed model (/u1D440,/u1D460), a well-known con-
struction in modal logic [ 3]. Given(/u1D440,/u1D460)we construct (/u1D440′,/u1D460′)as follows. Set /u1D451/u1D45C/u1D45A(/u1D440′)to be the
set of all paths (/u1D4600,...,/u1D460/u1D458)through/u1D440with/u1D4600=/u1D460and/u1D458≤/u1D45B−1, and let/u1D460′∈/u1D451/u1D45C/u1D45A(/u1D440′)denote
the singleton path (/u1D460). The accessibility relation is given by initial segment, i.e. if/u1D70C=(/u1D4600,...,/u1D460/u1D458)
and/u1D70C′=(/u1D460′
0,...,/u1D460′
/u1D458′)are two such paths, then /u1D445/u1D440′/u1D70C/u1D70C′holds if/u1D458′=/u1D458+1,/u1D460/u1D456=/u1D460/u1D456for all/u1D456≤/u1D458
and/u1D445/u1D440/u1D460/u1D458,/u1D460/u1D458+1holds. Finally, a proposition letter /u1D45D∈Prop is true at a path /u1D70C=(/u1D4600,/u1D460...,/u1D460 /u1D458)if
/u1D45D∈/u1D463/u1D440(/u1D460/u1D458). Clearly we have ℎ/u1D452/u1D456/u1D454ℎ/u1D461(/u1D440′,/u1D460′)=/u1D45B, since by assumption that ℎ/u1D452/u1D456/u1D454ℎ/u1D461(/u1D440,/u1D460) ≥/u1D45Bthere
exist at least one path oflength /u1D45B.For/u1D456≤/u1D45B−1deﬁne the followingrelations:
/u1D44D/u1D456:={(/u1D70C,/u1D460) ∈/u1D451/u1D45C/u1D45A(/u1D440′) ×/u1D451/u1D45C/u1D45A(/u1D440) |/u1D460isthe last state occurringin /u1D70Cand/u1D70Chaslength/u1D456}
We claim that /u1D44D0,.../u1D44D/u1D45B−1forms an/u1D45B-bisimulation between (/u1D440′,/u1D460′)and(/u1D440,/u1D460). Let/u1D456≤/u1D45B−1
and(/u1D70C,/u1D461) ∈/u1D44D/u1D456. The atomic clause is in each case obvious by deﬁnition of the t ruth of atomic
propositionsin /u1D440′.Forthe[forth]clause,justnotethatif /u1D445/u1D440′/u1D70C/u1D70C′thenbyconstructionthelaststate
of/u1D70C′is a successor of the last state of /u1D70C.Lastly, for the [back]clause, if /u1D445/u1D440/u1D461/u1D461′and/u1D70C=(/u1D4600,...,/u1D460/u1D456)
then there exists a successor /u1D70C′:=(/u1D4600,...,/u1D460/u1D456,/u1D460′)of/u1D70Cin/u1D440′such that/u1D445/u1D440′/u1D70C/u1D70C′. /square
3 FINITE CHARACTERIZATIONS FOR MODAL FORMULAS
Inthissection,weintroducethequestionofﬁnitecharacteriz abilityformodalformulas,andwelist
themainresults.Finitecharacterizationscanbedeﬁnedrelat ivetoanyconceptclass.Wetherefore
ﬁrstbrieﬂyreview thedeﬁnitionofaconceptclass,andwewille xplainhowmodalfragmentscan
be viewed asconceptclasses.
Deﬁnition 3.1. (Concept Classes) A concept class is a tripleC=(/u1D44B,/u1D436,/u1D706), where/u1D44Bis a class of
examples,/u1D436is a collectionof concepts3and/u1D706:/u1D436→2/u1D44B.
We interpret /u1D706(/u1D450)as the collection of positive examples for /u1D450, and the complement /u1D44B−/u1D706(/u1D450)
as the collection of negative examples for /u1D450. Note that we may have two distinct representations
/u1D450,/u1D450′∈/u1D436that represent the same concept,i.e., such that /u1D706(/u1D450)=/u1D706(/u1D450′). In this case, we call /u1D450and/u1D450′
equivalent . We will call a concept class C=(/u1D44B,/u1D436,/u1D706)essentially ﬁnite if the set {/u1D706(/u1D450) |/u1D450∈/u1D436}is
ﬁnite, or,in otherwords, if there are onlyﬁnitely manyconcepts, up to equivalence.
Deﬁnition 3.2. (Finite characterisations) Let C=(/u1D44B,/u1D436,/u1D706)be anyconceptclass.
3Although strictly speaking elements /u1D450∈/u1D436are syntactic representations of subsets /u1D706(/u1D450)of the example space /u1D44B, we opt
tocallthemconcepts instead.
,Vol. 1,No. 1,Article. Publication date: February 2022.6 BaldertenCateand RaoulKoudijs
•Acollectionoflabeledexamples isapair(/u1D438+,/u1D438−),where/u1D438+,/u1D438−⊆/u1D44Bareﬁnitesetsofexamples.
A concept/u1D450∈/u1D436ﬁts(/u1D438+,/u1D438−)if/u1D438+⊆/u1D706(/u1D450)and/u1D438−⊆/u1D44B\/u1D706(/u1D450), or, in other words, if each
/u1D452∈/u1D438+is apositive example for /u1D450and each/u1D452∈/u1D438−is a negative examplefor /u1D450.4
•Aﬁnitecharacterisation ofaconcept /u1D450∈/u1D436w.r.t.Cisacollectionoflabeledexamples (/u1D438+,/u1D438−)
such that (i) /u1D450ﬁts(/u1D438+,/u1D438−)and (ii)/u1D450is the only concept from C, up to equivalence, that ﬁts
(/u1D438+,/u1D438−)(i.e., forall/u1D450′that ﬁt(/u1D438+,/u1D438−)we have/u1D706(/u1D450′)=/u1D706(/u1D450)).
•We say that the concept class Cadmits ﬁnite characterisations if each concept /u1D450∈/u1D436has a
ﬁnite characterisation w.r.t. C.
Equivalently, a ﬁnite characterisation of a concept /u1D450∈/u1D436is a pair of ﬁnite sets of examples
(/u1D438+,/u1D438−)such that/u1D450ﬁts(/u1D438+,/u1D438−)and(/u1D438+,/u1D438−)separates/u1D450from every non-equivalent concept in
/u1D436in the sense that for every /u1D450′∈/u1D436with/u1D706(/u1D450)≠/u1D706(/u1D450′)there is a positive example /u1D465∈/u1D438+with
/u1D465∉/u1D706(/u1D450′)or a negative example /u1D465∈/u1D438−suchthat/u1D465∈/u1D706(/u1D450′).
Asanexample,imaginethe conceptclassbuilt ofclosedinterva lsontheset integers Z.Thatis,
letC=(Z,{[/u1D45B,/u1D45A] |/u1D45B,/u1D45A∈Z},/u1D706)where/u1D706([/u1D45B,/u1D45A])={/u1D467∈Z|/u1D45B≤/u1D467≤/u1D45A}. Then, for instance,
the interval [4,6]hasa ﬁnite characterisation w.r.t. Cconsisting of the positive examples 4and 6
togetherwith the negative examples3and 7.
We will lookat conceptscorrespondingto ﬁnite modelclassesﬁnmo d(/u1D711)ofmodalformulas /u1D711,
whichdeﬁnesaconceptover theexamplespaceofallﬁnite pointed models,possiblyrestricted to
some frameclass.
Deﬁnition 3.3. LetFbea classofframes,letProp be aﬁnite set ofpropositional var iables, and
letL[Prop] ⊆ Lfull[Prop]be amodalfragment.We deﬁne theconceptclass
C(F,L[Prop])=(/u1D44B,/u1D436,/u1D706)
where/u1D44Bis the set of all pointed modelsover Prop whose frame belongs to F,/u1D436=L[Prop], and
/u1D706(/u1D711)={(/u1D440,/u1D460) ∈/u1D44B|/u1D440,/u1D460|=/u1D711}.
LetFalldenotetheclassofallframesandlet Fﬁndenotetheclassofallﬁniteframes.Asnotedin
theintroduction,fromthepointofviewofpracticalapplicati ons,itisnaturaltorequireﬁnitechar-
acterizations to consist of ﬁnite examples. This amounts to rest ricting attention to ﬁnite frames.
However,we willbechieﬂyconcernedwithmodallogicsthathav etheﬁnite modelproperty,and
inthiscase,itiseasytoseethatevery ﬁnite characterizati onoverFﬁnisalsoaﬁnite characteriza-
tion over Fall. It is convenient for expository reasons to not enforce a restricti on to ﬁnite frames
in Deﬁnition 3.3.
3.1 The Full Modal Language
We ﬁrst show that the modal concept class C(Ffull,Lall), which corresponds to the basic modal
logicK, does not admit ﬁnite characterisations. We do this by showing th at there are modal for-
mulas that can force characterisations to contain examples of arbitrary height, thereby showing
that these characterizationscannotbe ﬁnite.
L/e.sc/m.sc/m.sc/a.sc 3.4. Letℎ/u1D452/u1D456/u1D454ℎ/u1D461/u1D45B:=/square/u1D45B+1⊥ ∧/Diamond/u1D45B⊤(where/u1D45B≥0). Then, for all pointed models (/u1D440,/u1D460), we
have that/u1D440,/u1D460|=ℎ/u1D452/u1D456/u1D454ℎ/u1D461/u1D45Biﬀℎ/u1D452/u1D456/u1D454ℎ/u1D461(/u1D440,/u1D460)=/u1D45B.
P/r.sc/o.sc/o.sc/f.sc.Let(/u1D440,/u1D460)beapointedmodel.Wehavethat ℎ/u1D452/u1D456/u1D454ℎ/u1D461(/u1D440,/u1D460)=/u1D45Biﬀthereisatleastonepath
of length/u1D45B, and no strictly longer path, emanating from /u1D460through/u1D440. In particular, there cannot
beanyinﬁnite pathsandhencenoloopsinthemodel /u1D440.Butclearlythisholdiﬀ /u1D440,/u1D460|=/Diamond/u1D45B⊤and
/u1D440,/u1D460|=/square/u1D45B+1⊥. /square
4Wewillsometimes besloppy in our notation and writethat a concept /u1D450∈/u1D436“ﬁts/u1D438+as positive examples”or “ﬁts /u1D438−as
negative examples”,by whichwewillmean that /u1D450ﬁts(/u1D438+,∅)or(∅,/u1D438−), respectively.
,Vol. 1,No. 1, Article. Publication date: February2022.Characterising Modal FormulaswithExamples 7
T/h.sc/e.sc/o.sc/r.sc/e.sc/m.sc3.5. LetPropbeanyﬁniteset. Then C(Fﬁn,Lfull[Prop])doesnotadmitﬁnitecharacter-
izations. In fact, no modal formula has a ﬁnite characterisa tion w.r.t.C(Fﬁn,Lfull[Prop]). The same
holdsforC(Fall,Lfull[Prop]).
P/r.sc/o.sc/o.sc/f.sc.Let/u1D711∈ Lfull[Prop]and suppose that /u1D711has a ﬁnite characterisation (/u1D438+,/u1D438−)w.r.t.
C(Fﬁn,Lfull[Prop]). Observe that either (i) /u1D711|=/square/u1D458⊥for some/u1D458or (ii)/u1D711∧/Diamond/u1D458⊤is satisﬁable
foreach/u1D458.
In case (i), by contraposition we get that /Diamond/u1D458⊤ |=¬/u1D711. Let/u1D45B>max({|/u1D451/u1D45C/u1D45A(/u1D438)| | (/u1D438,/u1D452) ∈/u1D438−} ∪
{/u1D458})and deﬁne the formula /u1D711′:=/u1D711∨ℎ/u1D452/u1D456/u1D454ℎ/u1D461/u1D45B. We claim that /u1D711′ﬁts(/u1D438+,/u1D438−)while/u1D711/nequivalence/u1D711′. It
is obvious that /u1D711′ﬁts/u1D438+as positive examples because /u1D711|=/u1D711′. By deﬁnition, /u1D711is false on every
example in/u1D438−. Moreover, by choice of /u1D45Band Lemma 3.4,ℎ/u1D452/u1D456/u1D454ℎ/u1D461/u1D45Bis false on every example in /u1D438−.
It follows that /u1D711′ﬁts(/u1D438+,/u1D438−). Moreover, let (/u1D443/u1D45B,/u1D460)be the pointed model consisting of a directed
path of length /u1D45B, where/u1D460is the initial state. Note that (/u1D443/u1D45B,/u1D460)has height/u1D45Band therefore satisﬁes
ℎ/u1D452/u1D456/u1D454ℎ/u1D461/u1D45Band hence/u1D711′. But/u1D458≤/u1D45Bwhich meansthat ℎ/u1D452/u1D456/u1D454ℎ/u1D461/u1D45B|=/Diamond/u1D458⊤. Using our assumption that (i)
/u1D711|=/square/u1D458⊥andcontraposition we getthat /u1D443/u1D45B,/u1D460|=¬/u1D711. Thus/u1D443/u1D45B,/u1D460|=/u1D711′∧¬/u1D711witnessing that /u1D711/nequivalence/u1D711′.
In case (ii), let /u1D45B>max({|/u1D451/u1D45C/u1D45A(/u1D438)| | (/u1D438,/u1D452) ∈/u1D438+} ∪ {/u1D451(/u1D711)}), and consider the formula /u1D711′:=
/u1D711∧¬ℎ/u1D452/u1D456/u1D454ℎ/u1D461/u1D45B.Weclaimthat /u1D711′ﬁts(/u1D438+,/u1D438−)butisnon-equivalentto /u1D711.Clearly/u1D711′ﬁts/u1D438−asnegative
examples,since /u1D711′|=/u1D711. Further,bychoiceof /u1D45Band Lemma 3.4,allpositive examplesin /u1D438+satisfy
¬ℎ/u1D452/u1D456/u1D454ℎ/u1D461/u1D45B(otherwise one ofthem would be of height /u1D45B).Henceit followsthat /u1D711′ﬁts(/u1D438+,/u1D438−).But
byhypothesisthereissomepointedmodel (/u1D440,/u1D460)satisfying/u1D711∧/Diamond/u1D45B⊤.ByProposition 2.13,thereisa
pointedmodel (/u1D440′,/u1D460′)suchthat/u1D440′,/u1D460′↔/u1D45B/u1D440,/u1D460andℎ/u1D452/u1D456/u1D454ℎ/u1D461(/u1D440′,/u1D460′)=/u1D45B.ItfollowsfromProposition
2.11that/u1D440′,/u1D460′|=/u1D711. Moreover, by Lemma 3.4we have/u1D440′,/u1D460′|=ℎ/u1D452/u1D456/u1D454ℎ/u1D461/u1D45Band as/u1D711′|=¬ℎ/u1D452/u1D456/u1D454ℎ/u1D461/u1D45Bwe
get that/u1D440′,/u1D460′|=¬/u1D711′.Hence/u1D440′,/u1D460′|=/u1D711∧¬/u1D711′witnessing that /u1D711/nequivalence/u1D711′.
The corresponding result for the concept class C(Fall,Lfull[Prop])follows by the ﬁnite model
property of the full modal logic over the class of all frames, because this implies that any two
modal formulas that can be separated on an inﬁnite model can alr eady be separated on a ﬁnite
model. /square
We goon to investigate whichconceptclassesofthe form C(F)admit ﬁnite characterisations.
R/e.sc/m.sc/a.sc/r.sc/k.sc 3.1. The proof of Theorem 3.5also works, with minor changes, when restricting to tran-
sitive frames (corresponding to the modal logic K4). It suﬃces to replace /u1D443/u1D45Bby its transitive closure
and observe that the height formulas preserve all their rele vant properties over this frame class. It
follows that no modal formula has a ﬁnite characterisation w .r.t.C(Ftrans)whereFtransis the class
of all transitive frames. However, the proof does not extend to the class of reﬂexive and transitive
frames (corresponding to the modal logic S4), or any other class of reﬂexive frames. This is because
the formula ℎ/u1D452/u1D456/u1D454ℎ/u1D461/u1D45Bisnotsatisﬁable on reﬂexive frames.
Note that Theorem 3.5establishes a strong failure of unique characterizability: no t only does
C(Fﬁn,Lfull[Prop])notadmit uniquecharacterization,in fact, noformulaisuniquely characteriz-
able in thisconceptclass.
T/h.sc/e.sc/o.sc/r.sc/e.sc/m.sc 3.6. LetFbe a class of frames and let Prop be a ﬁnite set. Then the concep t class
C(F,Lfull[Prop])admitsﬁnite characterisations iﬀ itisessentially ﬁnite.
P/r.sc/o.sc/o.sc/f.sc.The right to left is easy: if {modF(/u1D711) |/u1D711∈ Lfull}={/u1D4501,...,/u1D450/u1D45B}is ﬁnite then for every
1≤/u1D456,/u1D457≤/u1D45Bwith/u1D456≠/u1D457thesymmetricdiﬀerence /u1D450/u1D456⊕/u1D450/u1D457:=(/u1D450/u1D456−/u1D450/u1D457)∪(/u1D450/u1D457−/u1D450/u1D456)isnon-empty.Foreach
suchpair (/u1D456,/u1D457),picksomeexample /u1D452/u1D456,/u1D457∈/u1D450/u1D456⊕/u1D450/u1D457.Thenforeach /u1D450/u1D456,theset ofexamples {/u1D452/u1D456,/u1D457|/u1D457≠/u1D456}
uniquely characterises /u1D450/u1D456w.r.t.C(F).
,Vol. 1,No. 1,Article. Publication date: February 2022.8 BaldertenCateand RaoulKoudijs
For the left to right direction, suppose that C(F,Lfull[Prop])admits ﬁnite characterisations.
Then, in particular, the formula ⊥has a ﬁnite characterisation (/u1D438+,/u1D438−),based on F-frames. Nec-
essarily,/u1D438+=∅.It follows, by deﬁnition of ﬁnite characterisations, that, fo r every modalformula
/u1D711that issatisﬁable w.r.t. F,there must be some example (/u1D438,/u1D452) ∈/u1D438−suchthat/u1D438,/u1D452|=/u1D711. We claim
that there can only be 2|/u1D438−|formulas up to logical equivalence over F. To see this, note that if
there were more, then there would be two modal formulas /u1D711,/u1D713with mod F(/u1D711)≠modF(/u1D713)such
that/u1D438−∩ﬁnmod F(/u1D711)=/u1D438−∩ﬁnmod F(/u1D713).Butthentheformula (¬/u1D711∧/u1D713)∨(/u1D711∧¬/u1D713)issatisﬁable,
but not onany pointedmodelin /u1D438−, acontradiction. /square
This result can be equivalently stated in terms of local tabularity . For a class of frames F, we
say that “the modal logic of Fis locally tabular” if, for every ﬁnite Prop, there are only ﬁnit ely
manymodalformulasin Prop up to equivalenceover F[3].Thenwe have:
T/h.sc/e.sc/o.sc/r.sc/e.sc/m.sc3.7. LetFbeany class of frames. Then the following areequivalent:
(1)For every ﬁniteset Prop, C(F,Lfull[Prop])admitsﬁnite characterisations,
(2)The modallogicof Fislocally tabular.
Insummary,norestriction toasmallerclassofframescanmak ethefullmodallanguageadmit
ﬁnite characterisations, exceptby trivializing theproblem.
3.2 FragmentsofModal Logic
In this section, we investigate which modal concept classes of t he formC(F,L/u1D446[Prop])admit
ﬁnitecharacterisations,where /u1D446⊆ {/square,/Diamond,∧,∨,⊤,⊥,¬/u1D44E/u1D461}andwhere FiseitherFﬁnorFall.Infact,
sincethemodallogicof Fﬁncoincideswiththemodallogicof Fall(cf.[3]),wehavethat,whenevera
setofpositiveandnegativeexamplesuniquelycharacterizesa modalformulaw.r.t. C(Fﬁn,L/u1D446[Prop]),
it also uniquely characterizes the same formula w.r.t. C(Fall,L/u1D446[Prop]). In particular, this means
that, wheneverC(Fﬁn,L/u1D446[Prop])admits ﬁnite characterisations, so does C(Fall,L/u1D446[Prop]). We
will simply writeC(L/u1D446[Prop])in the remainder of this section, with the understanding that all
ourpositive results will be proved for Fﬁnand allour negative results will beproved for Fall.
For our ﬁrst positive result, we make use of known results rega rding ﬁnite characterizations
for positive-existential ﬁrst-order formulas. Speciﬁcall y, it was shown in [ 1,18] that the concept
class ofc-acyclic unions of conjunctive queries , which can be seen as a restricted class of positive-
existential ﬁrst-order formulas, admits ﬁnite characterisa tions, and that ﬁnite characterizations
forsuchformulascanbeconstructedeﬀectively.Asit turnsou t,the standardtranslation ofevery
L/Diamond,∧,∨,⊤-formula can be equivalently written as a c-acyclic union of co njunctive queries (cf. [ 11]
forfull details).From this, we obtain:
T/h.sc/e.sc/o.sc/r.sc/e.sc/m.sc3.8. ForeveryﬁnitesetProp, C(L/Diamond,∧,∨,⊤,⊥[Prop])admitsﬁnitecharacterisations. More-
over, these characterisations areeﬀectively computable.
P/r.sc/o.sc/o.sc/f.sc.Itfollowsimmediatelyfromtheaforementionedresultsin[ 1,18]thatC(L/Diamond,∧,∨,⊤[Prop])
admits unique characterizations. It is easy to see that every /u1D711∈ L/Diamond,∧,∨,⊤,⊥[Prop]is equivalent to
a formulain L/Diamond,∧,∨,⊤[Prop] ∪{⊥}. Therefore,to extend thisresult to L/Diamond,∧,∨,⊤,⊥,it suﬃcesto
(i) show that every ﬁnite characterization (/u1D438+,/u1D438−)for a formula /u1D711∈ L/Diamond,∧,∨,⊤[Prop]w.r.t. the
concept classC(L/Diamond,∧,∨,⊤[Prop])can be eﬀectively extended to ﬁnite characterisation of /u1D711
w.r.t.L/Diamond,∧,∨,⊤[Prop] ∪{⊥}, and
(ii) to provide a ﬁnite characterisation of ⊥w.r.t.C(L/Diamond,∧,∨,⊤,⊥[Prop]).
For the ﬁrst item, it is enough to ensure that /u1D438+is non-empty. This can be done, for instance, by
adding to/u1D438+the pointed model /clockwiseProp, i.e., single-element reﬂexive pointed model satisfying all
,Vol. 1,No. 1, Article. Publication date: February2022.Characterising Modal FormulaswithExamples 9
propositionalvariables.Notethatthispointedmodelsatisﬁ esallL/Diamond,∧,∨,⊤-formulas.Forthesecond,
it suﬃcesto use/clockwisePropasa negative example. /square
Next,we show that thedual fragment L/square,∧,∨,⊤,⊥also admits ﬁnite characterisations.
T/h.sc/e.sc/o.sc/r.sc/e.sc/m.sc3.9. Forevery ﬁnitesetProp, C(L/square,∧,∨,⊤,⊥[Prop])admitsﬁnitecharacterisations. More-
over, these characterisations areeﬀectively computable.
P/r.sc/o.sc/o.sc/f.sc.Consider any formula /u1D711∈ L/square,∧,∨,⊤,⊥[Prop]. Deﬁne the formula ⊳(/u1D711)to be the for-
mula obtained from /u1D711by replacing each connective by its dual (cf. also page 23). It follows that
⊳(/u1D711) ∈ L/Diamond,∧,∨,⊤,⊥[Prop], so by theorem 3.8⊳(/u1D711)has a ﬁnite characterisation (/u1D438+
⊳(/u1D711),/u1D438−
⊳(/u1D711))w.r.t.
L/Diamond,∧,∨,⊤,⊥[Prop].Now deﬁne
/u1D438+
/u1D711:={(/u1D440¬,/u1D460) | (/u1D440,/u1D460) ∈/u1D438−
⊳(/u1D711)}/u1D438−
/u1D711:={(/u1D440¬,/u1D460) | (/u1D440,/u1D460) ∈/u1D438+
⊳(/u1D711)}
where/u1D440¬=(/u1D44A,/u1D445,/u1D463′)is obtained from /u1D440=(/u1D44A,/u1D445,/u1D463)by ﬂipping the colouring of each state /u1D461in
/u1D440, i.e. setting /u1D463′(/u1D461)=Prop−/u1D463(/u1D461). Furthermore, for every modal formula /u1D711, if we let/u1D711¬be the
formulaobtainedfrom /u1D711bysubstitutingeverypositiveoccurrenceofapropositionalv ariablewith
its negation thenwe have that forevery model (/u1D440,/u1D460);
/u1D440,/u1D460|=/u1D711iﬀ/u1D440¬,/u1D460|=/u1D711¬
Weclaimthat (/u1D438+
/u1D711,/u1D438−
/u1D711)isaﬁnitecharacterizationfor /u1D711.Supposethatsome /u1D713∈ L/square,∧,∨,⊤,⊥[Prop]
ﬁts(/u1D438+
/u1D711,/u1D438−
/u1D711).Thismeansthat /u1D713istrueonall (/u1D440¬,/u1D460)for(/u1D440,/u1D460) ∈/u1D438−
⊳(/u1D711)and/u1D713isfalseonall (/u1D440¬,/u1D460)
for(/u1D440,/u1D460) ∈/u1D438+
⊳(/u1D711).It followsthat ¬/u1D713is false onall (/u1D440¬,/u1D460)for(/u1D440,/u1D460) ∈/u1D438−
⊳(/u1D711)and¬/u1D713is true onall
(/u1D440¬,/u1D460)for(/u1D440,/u1D460) ∈/u1D438+
⊳(/u1D711). Thus, by the above equivalence we get that ¬/u1D713¬∈ L/Diamond,∧,∨,⊤[Prop]ﬁts
(/u1D438+
⊳(/u1D711),/u1D438−
⊳(/u1D711)).Butobservethat ¬/u1D713¬≡⊳(/u1D713),soinfact ⊳(/u1D713)ﬁts(/u1D438+
⊳(/u1D711),/u1D438−
⊳(/u1D711))andthus⊳(/u1D711) ≡⊳(/u1D713)
because(/u1D438+
⊳(/u1D711),/u1D438−
⊳(/u1D711))is a ﬁnite characterisation. Finally, it rests to observe that /u1D712≡/u1D709iﬀ⊳(/u1D712) ≡
⊳(/u1D709)holdsforall modalformulas /u1D712,/u1D709,and we concludethat /u1D711≡/u1D713.
Wewillmakeuseoftheabovedualizationconstructionagainl aterinSection 4,wherewediscuss
it in detail (cf.Deﬁnitions 4.20and4.16and Proposition 4.21). /square
Thisisoneexampleofageneralphenomenon,foreverymodalfragme ntoftheform L/u1D446,C(L/u1D446)
admitsﬁnitecharacterisationsiﬀ C(L/u1D446dual)admitsﬁnite characterisations,where /u1D446dualisobtained
from/u1D446byreplacing connectivesbytheir dual.
Next,we consider whathappensforfragmentscontaining both /Diamondand/square.
T/h.sc/e.sc/o.sc/r.sc/e.sc/m.sc3.10. Forevery ﬁnite set Prop, C(L/square,/Diamond,∧,∨[Prop])admitsﬁnite characterisations. More-
over, these characterisations areeﬀectively computable.
The proof of Theorem 3.10is quite diﬀerent, and more involved. It will be given in the next
section.We will discuss computational complexityaspectsin Section5.1.
The following result shows that Theorem 3.10is optimal, in the sense that L/square,/Diamond,∧,∨cannot be
extended to alargerfragmentadmitting ﬁnite characterisations .
T/h.sc/e.sc/o.sc/r.sc/e.sc/m.sc3.11. LetPropbeanyﬁniteset. Then neither C(L/square,/Diamond,∧,⊥[Prop])norC(L/square,/Diamond,∨,⊤[Prop])
admitsﬁnite characterisations.
P/r.sc/o.sc/o.sc/f.sc.Observe that ℎ/u1D452/u1D456/u1D454ℎ/u1D461/u1D45Bcan be equivalently written as /square/u1D45B+1⊥ ∧/Diamond/u1D45B/square⊥, which belongs
toL/square,/Diamond,∧,⊥[∅], and that its negation ¬ℎ/u1D452/u1D456/u1D454ℎ/u1D461/u1D45Bcan be equivalently written as /Diamond/u1D45B+1⊤ ∨/square/u1D45B/Diamond⊤,
whichbelongsto L/square,/Diamond,∨,⊤[∅].IntheproofofTheorem 3.5,inordertoshowthatnomodalformula
admits a ﬁnite characterisations, we used both ℎ/u1D452/u1D456/u1D454ℎ/u1D461/u1D45Band its negation ¬ℎ/u1D452/u1D456/u1D454ℎ/u1D461/u1D45B. However, here,
weareonlyclaimingthattheconceptclassesinquestiondonotad mitﬁnitecharacterisations,and
therefore,we onlyhave to give one example ofa non-ﬁnitely-chara cterisable formula.
,Vol. 1,No. 1,Article. Publication date: February 2022.10 BaldertenCateand RaoulKoudijs
First,weshowthat ⊥ ∈ L/square,/Diamond,∧,⊥[∅]doesnothaveaﬁnitecharacterisationw.r.t. C(L/square,/Diamond,∧,⊥[∅]).
Itfollowsthatit also doesnothavea ﬁnite characterisationw .r.t.C(L/square,/Diamond,∧,⊥[Prop])forProp≠∅.
Supposeforcontradictionthat ⊥didhavesuchacharacterisation (/u1D438+,/u1D438−).Since⊥hasnopositive
examples, it must be that /u1D438+=∅and/u1D438−is a ﬁnite set of examples with the property that every
satisﬁable L/square,/Diamond,∧,⊥[∅]formula is satisﬁed on some example in /u1D438−. Choose/u1D458to be any number
strictly greater than the size of any example in /u1D438−. Then by Proposition 2.12and choice of /u1D458we
have thatℎ/u1D452/u1D456/u1D454ℎ/u1D461(/u1D438,/u1D452)</u1D458for all(/u1D438,/u1D452) ∈/u1D438−. It follows that the formula ℎ/u1D452/u1D456/u1D454ℎ/u1D461/u1D458is false on every
example in/u1D438−.But thenℎ/u1D452/u1D456/u1D454ℎ/u1D461/u1D458∈ L/square,/Diamond,∧,⊥[∅]ﬁts(/u1D438+,/u1D438−)whereasclearly ⊥/nequivalenceℎ/u1D452/u1D456/u1D454ℎ/u1D461/u1D458.
Similarly,weshowthat ⊤ ∈ L/square,/Diamond,∨,⊤[∅])cannothaveaﬁnitecharacterisationw.r.t. C(L/square,/Diamond,∨,⊤[∅]),
fromwhichthemoregeneralresultforarbitraryPropfollows .Notethat,inprinciple,thisalready
follows from the duality principle alluded to above. Suppose for contradiction that ⊤has such a
ﬁnitecharacterisation (/u1D438+,/u1D438−).Since⊤isunfalsiﬁable,itfollowsthat /u1D438−=∅and/u1D438+isaﬁniteset
of examples with the property that every falsiﬁable formula inL/square,/Diamond,∨,⊤[∅])is falsiﬁed on some
examplein/u1D438+.Choose/u1D458tobeanynumberstrictlygreaterthanthesizeofanyexamplein /u1D438+.Then
byProposition 2.12andchoiceof /u1D458wehavethat ℎ/u1D452/u1D456/u1D454ℎ/u1D461(/u1D438,/u1D452)</u1D458forall(/u1D438,/u1D452) ∈/u1D438+.Itfollowsthat
the formula ¬ℎ/u1D452/u1D456/u1D454ℎ/u1D461/u1D458is true on all examples in /u1D438+, because it can only be falsiﬁed on models of
exactlyheight /u1D458.Butthen ¬ℎ/u1D452/u1D456/u1D454ℎ/u1D461/u1D458∈ L/square,/Diamond,∨,⊤[∅])ﬁts(/u1D438+,/u1D438−)whereasclearly ⊤/nequivalence¬ℎ/u1D452/u1D456/u1D454ℎ/u1D461/u1D458./square
Observethat“admittingﬁnitecharacterisations”isamonotonep ropertyofmodalfragments:if
L ⊆ L′and(F,L′[Prop])admitsﬁnite characterizations,thensodoes (F,L[Prop]).Therefore,
Theorem 3.11implies that Theorem 3.10cannot be improved (because L/square,/Diamond,∨,⊤⊆ L/square,/Diamond,∧,∨,⊤and
L/square,/Diamond,∧,⊥⊆ L/square,/Diamond,∧,∨,⊥, whileL/square,/Diamond,∧,∨,¬atis expressively equivalent to Lfull). The results above al-
mostcompletelydeterminewhichconceptclassesoftheform C(L/u1D446)admitﬁnitecharacterisations
(where/u1D446⊆ {/square,/Diamond,∧,∨,⊤,⊥,¬at}. In essence, the remaining open cases are L/square,/Diamond,∧,⊤,L/Diamond,∧,∨,⊤,⊥,¬at
andL/square,/Diamond,⊤,⊥,¬at.We hopeto settle these openproblemsin future work.
R/e.sc/m.sc/a.sc/r.sc/k.sc 3.2. Note that thefragments for which we proved above that they ad mitﬁnitecharacter-
izations, are not locally tabular. The fragments without an y modal operators are locally tabular, but
once a fragment contains even a single modal operator, say /Diamond, there are inﬁnitely many pairwise-
inequivalent formulasof the form /Diamond/u1D45B/u1D45D.
4 FINITE CHARACTERISATIONS FOR L/square,/Diamond,∧,∨VIA WEAK-SIMULATION DUALITIES
Inthissection,westudythefragment L/square,/Diamond,∧,∨indepth.Weintroduce weaksimulations andshow
thatL/square,/Diamond,∧,∨is characterized by its preservation under weak simulations. We study the category
wSim[Prop]ofpointed modelsandweak simulations, andwe show how toconstruc t ﬁnite duali-
ties in this category.Finally,we use these results to prove T heorem3.10.
4.1 WeakSimulations
Kurtonina and de Rijke [ 12] studied the positive modal fragment L/square,/Diamond,∧,∨,⊤,⊥(which includes ⊤
and⊥).Inordertocharacterizetheexpressive powerofthisfrag ment,theyintroducedthenotion
of adirected simulation (which we will simply call simulation here, for brevity). We brieﬂy recall
notion and the mainresult from[ 12].
Deﬁnition 4.1. (Simulation) Given two pointed models (/u1D440,/u1D460),(/u1D440′,/u1D460′),asimulation from(/u1D440,/u1D460)
to(/u1D440′,/u1D460′)isa relation /u1D44D⊆/u1D440×/u1D440′suchthat forall (/u1D461,/u1D461′) ∈/u1D44D,the followingconditions hold.
(atom)/u1D463/u1D440(/u1D461) ⊆/u1D463/u1D440′(/u1D461′)
(forth)If/u1D445/u1D440/u1D461/u1D462, then there isa /u1D462′with/u1D445/u1D440′/u1D461′/u1D462′and(/u1D462,/u1D462′) ∈/u1D44D
(back)If/u1D445/u1D440′/u1D461′/u1D462′,thenthere isa /u1D462with/u1D445/u1D440/u1D461/u1D462and(/u1D462,/u1D462′) ∈/u1D44D
,Vol. 1,No. 1, Article. Publication date: February2022.Characterising Modal FormulaswithExamples 11
Thediﬀerencebetweensimulationsandbisimulationsliesinthe “atom”clause:simulationsonly
require propositional variables to be preserved from left to right, while bisimulations require the
propositional variablesto be preserved in bothdirections.
We say that a modal formula /u1D711ispreserved under simulations if, whenever /u1D44Dis a simulation
from(/u1D440,/u1D460)to(/u1D440′,/u1D460′)and(/u1D440,/u1D460) |=/u1D711, then(/u1D440′,/u1D460′) |=/u1D711.
T/h.sc/e.sc/o.sc/r.sc/e.sc/m.sc 4.2. ([12]) A ﬁrst order formula /u1D711(/u1D465)(in the signature with one binary relation and
ﬁnitelymanyunaryrelations)ispreservedundersimulatio nsiﬀitisequivalenttothestandardtrans-
lation of an L/square,/Diamond,∧,∨,⊤,⊥formula.
Wecanthinkofsimulationsasaweakformofbisimulations, andwe canview theaboveresult
as an analogue of the classic Van Benthem characterization (Th eorem2.6), which characterizes
the full modal language in terms of invariance under bisimulatio ns. In order to characterize the
expressive powerof L/square,/Diamond,∧,∨(whichdiﬀersfrom L/square,/Diamond,∧,∨,⊤,⊥inthatitlacks ⊤and⊥)wewillnow
introduce amodiﬁed version ofsimulations, whichwe call weak simulations .
Deﬁnition 4.3. (Empty andFull Loopstates) The emptyloopstate , denoted by/clockwise∅,isthe pointed
model consisting of a single reﬂexive point with an empty valuati on. Similarly, the full loopstate ,
denoted by/clockwiseProp,is the pointed modelconsisting of a single reﬂexive point with a f ullvaluation
(i.e.,where every /u1D45D∈Prop istrue).
Deﬁnition 4.4. (Weak Simulation) Given two pointed models (/u1D440,/u1D460),(/u1D440′,/u1D460′),aweak simulation
betweenthem(notation: /u1D440,/u1D460→/u1D440′,/u1D460′,andwe saythat (/u1D440′,/u1D460′)weaklysimulates (/u1D440,/u1D460)or(/u1D440,/u1D460)
is weaklysimulated by (/u1D440′,/u1D460′))is a relation /u1D44D⊆/u1D440×/u1D440′such that forall (/u1D461,/u1D461′) ∈/u1D44D;
(atom)/u1D463/u1D440(/u1D461) ⊆/u1D463/u1D440′(/u1D461′)
(forth’)If/u1D445/u1D440/u1D461/u1D462, either/u1D440,/u1D462↔/clockwise∅orthere is a /u1D462′with/u1D445/u1D440′/u1D461′/u1D462′and(/u1D462,/u1D462′) ∈/u1D44D
(back’)If/u1D445/u1D440′/u1D461′/u1D462′,either/u1D440′,/u1D462′↔/clockwiseProporthere is a /u1D462with/u1D445/u1D440/u1D461/u1D462and(/u1D462,/u1D462′) ∈/u1D44D
We refer to the extra ‘loopstate-conditions’ as the escape clauses , because, intuitively, they ex-
clude/clockwise∅and/clockwisePropfromtheforthandbackrequirements,respectively.Thefollo wingtwolemmas
explicate some consequencesofhaving these escape clauses.
L/e.sc/m.sc/m.sc/a.sc 4.5. Every pointedmodel weakly simulates /clockwise∅andisweakly simulated by /clockwiseProp.
P/r.sc/o.sc/o.sc/f.sc.Let(/u1D440,/u1D460)beapointedmodel.Weclaimthat /u1D44D:=/u1D451/u1D45C/u1D45A(/clockwise∅)×/u1D451/u1D45C/u1D45A(/u1D440)isaweaksimula-
tion/u1D44D:/clockwise∅→/u1D440,/u1D460.Let(/u1D45F,/u1D461) ∈/u1D44Dbearbitrary.[atom]trivialsince /u1D463(/u1D45F)=∅.[forth’]trivialsincewe
canalwaysusetheescapeclause.[back’]Whenever /u1D445/u1D461′/u1D462′we canalwayschoose /u1D45Fitself asmatch-
ing successoras /u1D445/u1D45F/u1D45Fholdsand (/u1D45F,/u1D462′) ∈/u1D44D.A dualargumentshows that /u1D451/u1D45C/u1D45A(/u1D440) ×/u1D451/u1D45C/u1D45A(/clockwiseProp)is
the unique weak simulation /u1D440,/u1D460→/clockwiseProp. /square
In particular, the deadlock model (i.e. the single point model with no successors) weaklysimu-
lates/clockwise∅and isweaklysimulated by/clockwiseProp, whereas it does not simulate /clockwise∅nor is simulated by
/clockwiseProp.
L/e.sc/m.sc/m.sc/a.sc4.6. Theemptyloopstate /clockwise∅satisﬁesnoformulain L/square,/Diamond,∧,∨,whilethefullloopstate /clockwiseProp
satisﬁes every formula in L/square,/Diamond,∧,∨.
P/r.sc/o.sc/o.sc/f.sc.Clearly/clockwise∅/\e}a⊔io\slash|=/u1D45Dand/clockwiseProp|=/u1D45Dfor every atomic formula /u1D45D. Now suppose that /clockwise∅/\e}a⊔io\slash|=/u1D711
and/clockwiseProp|=/u1D711. It follows that/clockwise∅/\e}a⊔io\slash|=/Diamond/u1D711and that/clockwise∅/\e}a⊔io\slash|=/square/u1D711. This is because there is exactly one
successor that is bisimilar to /clockwise∅again,which by inductive hypothesis and Theorem 2.5doesnot
satisfy/u1D711. Dually,/clockwiseProp|=/Diamond/u1D711and/clockwiseProp/\e}a⊔io\slash|=/square/u1D711because there is exactly one successor which by
inductive hypothesisand Theorem 2.5satisﬁes/u1D711. /square
,Vol. 1,No. 1,Article. Publication date: February 2022.12 BaldertenCateand RaoulKoudijs
We say that a modal formula /u1D711ispreserved under weak simulations , if, whenever /u1D440,/u1D460→/u1D440′,/u1D460′
and/u1D440,/u1D460|=/u1D711, then/u1D440′,/u1D460′|=/u1D711. Lemma4.6playsanimportant role in the next proof.
T/h.sc/e.sc/o.sc/r.sc/e.sc/m.sc4.7. Every formula /u1D711∈ L/square,/Diamond,∧,∨ispreserved underweak simulations.
P/r.sc/o.sc/o.sc/f.sc.Let/u1D44D:/u1D440,/u1D460→/u1D440′,/u1D460′beaweaksimulation.Weproceedbyformulainductionon /u1D711.The
base case is where /u1D711=/u1D45Dfor some/u1D45D∈Prop. Then /u1D440,/u1D460|=/u1D45Dimplies/u1D440′,/u1D460′|=/u1D45Das/u1D463(/u1D460) ⊆/u1D463(/u1D460′).
The induction argument for conjunction and disjunction is straigh tforward. This leaves us with
the modaloperators.
(/Diamond) Suppose that /u1D440,/u1D460|=/Diamond/u1D711where/u1D711∈ L/square,/Diamond,∧,∨, i.e. there is some /u1D461∈/u1D445/u1D440[/u1D460]with/u1D440,/u1D461|=/u1D711. By
lemma4.6,/u1D440,/u1D461/notarrowboth/clockwise∅and hence by [forth’] there must be some /u1D461′∈/u1D445/u1D440′[/u1D460′]such that
(/u1D461,/u1D461′) ∈/u1D44Dand hence/u1D440′,/u1D461′|=/u1D711by inductive hypothesis. It follows by the semantics that
/u1D440′,/u1D460′|=/Diamond/u1D711.
(/square) Suppose that /u1D440,/u1D460|=/square/u1D711with/u1D711∈ L/square,/Diamond,∧,∨. We show that /u1D440′,/u1D460′|=/square/u1D711. If/u1D445/u1D440′[/u1D460′]=∅this
holds vacuously. For an arbitrary /u1D461′∈/u1D445/u1D440′[/u1D460′], by the [back’]clause either /u1D440′,/u1D461′↔/clockwiseProp
orthereisasuccessor /u1D461∈/u1D445/u1D440[/u1D460]with(/u1D461,/u1D461′) ∈/u1D44D.Intheformercase,byLemma 4.6/u1D440′,/u1D461′|=/u1D711.
Else, as/u1D440,/u1D460|=/square/u1D711we have/u1D440,/u1D461|=/u1D711and henceby inductive hypothesis /u1D440′,/u1D461′|=/u1D711.
/square
There exist modal formulas that are preserved under weak simu lations but that cannot be ex-
pressed in L/square,/Diamond,∧,∨. Indeed, ⊤and⊥are preserved under weak simulations (actually, they are
preserved by every relation) but it follows from Lemma 4.6that they are not equivalent to any
formulain L/square,/Diamond,∧,∨.However,wewillshowthatthelanguage L/square,/Diamond,∧,∨∪{⊤,⊥}doessatisfyavan
Benthem-stylecharacterisation intermsofpreservation und erweaksimulations. Tothatend,we
will needthe followinglemma.Recallthat ↔denotesbisimulation.
L/e.sc/m.sc/m.sc/a.sc 4.8. For any pointedmodel (/u1D440,/u1D460),
•/u1D440,/u1D460↔/clockwise∅iﬀ, forall/u1D711∈ L/square,/Diamond,∧,∨,/u1D440,/u1D460/\e}a⊔io\slash|=/u1D711
•/u1D440,/u1D460↔/clockwisePropiﬀ, for all/u1D711∈ L/square,/Diamond,∧,∨,/u1D440,/u1D460|=/u1D711.
P/r.sc/o.sc/o.sc/f.sc.Theleft to rightdirection isimmediate fromLemma 4.6and Theorem 2.5.
From right to left, suppose that /u1D440,/u1D460/\e}a⊔io\slash|=/u1D711for all/u1D711∈ L/square,/Diamond,∧,∨. Now let/u1D440′be the submodel of
/u1D440generated by /u1D460, and set/u1D44D:=/u1D451/u1D45C/u1D45A(/u1D440′) ×/u1D451/u1D45C/u1D45A(/clockwise∅), where/u1D451/u1D45C/u1D45A(/clockwise∅)={/u1D45F}consists of a single
point.Weshowthisisabisimulation /u1D44D:/u1D440′,/u1D460↔/clockwise∅.Takeany (/u1D461,/u1D45F) ∈/u1D44D.Byconstruction,there
is apath/u1D460=/u1D4610/u1D445.../u1D445/u1D461 /u1D45B=/u1D461in/u1D440′from/u1D460to/u1D461of length/u1D45Bforsome/u1D45B.
[atom] Note that /u1D463(/u1D45F)=∅has empty colour so we want to show that /u1D463(/u1D461)is empty as well.
Suppose otherwise, i.e. there is some /u1D45D∈/u1D463(/u1D461), then it follows that /u1D440,/u1D460|=/Diamond/u1D45B/u1D45D, contradicting our
assumption that (/u1D440,/u1D460)refutes every formulain L/square,/Diamond,∧,∨.
[forth]If/u1D445/u1D440/u1D461/u1D461′,then/u1D461′∈/u1D451/u1D45C/u1D45A(/u1D440′)so(/u1D461′,/u1D45F) ∈/u1D44Dby deﬁnition of /u1D44Dand/u1D45Fseesitself.
[back]If/u1D445/u1D45F/u1D45F′then/u1D45F′=/u1D45Fas/u1D45Fonlyseesitself. We know that /u1D440,/u1D461/\e}a⊔io\slash|=/square/u1D45Dotherwise/u1D440,/u1D460|=/Diamond/u1D45B/square/u1D45D
while we know that (/u1D440,/u1D460)refutes every formula in L/square,/Diamond,∧,∨. Hence/u1D440,/u1D461|=/Diamond¬/u1D45Dand thus has
some successor /u1D461′∈/u1D451/u1D45C/u1D45A(/u1D440′)forwhich (/u1D461′,/u1D45F)automaticallyholds.
For the other equivalence, suppose that /u1D440,/u1D460|=/u1D711for all/u1D711∈ L/square,/Diamond,∧,∨. Again, let /u1D440′be the
submodelof /u1D440generatedby /u1D460in/u1D440,andset/u1D44D:=/u1D451/u1D45C/u1D45A(/u1D440′)×/u1D451/u1D45C/u1D45A(/clockwiseProp),where/u1D451/u1D45C/u1D45A(/clockwiseProp)={/u1D45F}
consists of a single point. We show this is a bisimulation /u1D44D:/u1D440′,/u1D460↔/clockwiseProp. Take any (/u1D461,/u1D45F) ∈/u1D44D.
Byconstruction,there is a path /u1D460=/u1D4610/u1D445.../u1D445/u1D461 /u1D45B=/u1D461in/u1D440′from/u1D460to/u1D461oflength/u1D45Bforsome/u1D45B.
[atom]Notethat /u1D463(/u1D45F)=Prophasfullcoloursowewanttoshowthat /u1D463(/u1D461)isfullaswell.Suppose
otherwise,i.e.thereissome /u1D45D∉/u1D463(/u1D461),thenitfollowsthat /u1D440,/u1D460/\e}a⊔io\slash|=/square/u1D45B/u1D45D,contradictingourassumption
that(/u1D440,/u1D460)satisﬁes every formulain L/square,/Diamond,∧,∨.
[forth]If/u1D445/u1D440/u1D461/u1D461′,then/u1D461′∈/u1D451/u1D45C/u1D45A(/u1D440′)so(/u1D461′,/u1D45F) ∈/u1D44Dby deﬁnition and /u1D45Fseesitself.
,Vol. 1,No. 1, Article. Publication date: February2022.Characterising Modal FormulaswithExamples 13
[back]/u1D45Fonlysees itself so if /u1D445/u1D45F/u1D45F′then/u1D45F′=/u1D45F. Now we know that /u1D440,/u1D461|=/Diamond/u1D45Dotherwise
/u1D440,/u1D460/\e}a⊔io\slash|=/square/u1D45B/Diamond/u1D45Dwhile we know that (/u1D440,/u1D460)satisﬁes every formula in L/square,/Diamond,∧,∨. Thus/u1D461must have
some successor /u1D461′∈/u1D451/u1D45C/u1D45A(/u1D440′)forwhich (/u1D461′,/u1D45F)automaticallyholds. /square
As is usual in semantic characterisations, we make an appeal to the existence of /u1D714-saturated
elementary extension for every ﬁrst order structure. In parti cular, for our proof we need modally
saturated Kripkemodels.AKripkemodel /u1D440issaidtobemodallysaturatedifforevery /u1D461∈/u1D451/u1D45C/u1D45A(/u1D440)
and inﬁnite set of modal formulas Φ, if every ﬁnite subset of Φis satisﬁed at some successor of /u1D461,
then there exists a successor of /u1D461′of/u1D461in/u1D440such that/u1D440∗,/u1D461|=/u1D711forall/u1D711∈Φ.
L/e.sc/m.sc/m.sc/a.sc4.9. ForeverypointedKripkemodel (/u1D440,/u1D460),thereexistsamodallysaturatedpointedKripke
model(/u1D440∗,/u1D460∗)such that (/u1D440,/u1D460)and(/u1D440∗,/u1D460∗)satisfy thesame ﬁrstorderformulaswith onefreevari-
able.
P/r.sc/o.sc/o.sc/f.sc.Thisiswellknown,andfollowsfromclassicresultsinmodelthe ory,since/u1D714-saturation
implies modalsaturation. For the sake ofcompleteness,we spe llout the details.
LetapointedKripkemodel (/u1D440,/u1D460)begiven.IdentifyingKripkemodelswithﬁrstorderstructure
overtheappropriatesignature,weuseawell-knownresultfro mmodeltheorythatsaysthatevery
ﬁrstorderstructurehasan /u1D714-saturatedelementaryextension(see[ 4]).Itfollowsthatweobtainan
/u1D714-saturated ﬁrst order structure, which corresponds to a Krip ke model/u1D440∗, together with a map
/u1D453:/u1D451/u1D45C/u1D45A(/u1D440) →/u1D451/u1D45C/u1D45A(/u1D440∗)such that/u1D440|=/u1D6FD(/u1D461)iﬀ/u1D440∗|=/u1D6FD(/u1D453(/u1D461))for all/u1D461∈/u1D451/u1D45C/u1D45A(/u1D440)and for all
ﬁrst-order formulas /u1D6FD(/u1D465)in one free variable.We set /u1D460∗:=/u1D453(/u1D460).
Tosee that/u1D440∗is modallysaturated,let Φbean inﬁnite set ofmodalformulasandconsider the
inﬁnite set of ﬁrst order formulas Φ′:={/u1D446/u1D447/u1D465(/u1D711) |/u1D711∈Φ} ∪ {/u1D445/u1D450/u1D465}over the corresponding ﬁrst
ordersignatureextendedwithaconstant /u1D450whichisinterpreted asthestate /u1D460∗.Usingthefactthat
theﬁrstorderstructurecorrespondingto /u1D440∗is/u1D714-saturated,itfollowsthat Φ′(allwhoseformulas
contain a single free variable /u1D465) is satisﬁed at some state /u1D462∈/u1D451/u1D45C/u1D45A(/u1D440∗), so/u1D440∗,/u1D462|=/u1D711(/u1D465)for all
/u1D711∈Φ. But as/u1D450is interpreted as /u1D460∗, it follows that /u1D462is a successor of /u1D460∗. This shows that /u1D440∗is
modallysaturated. /square
T/h.sc/e.sc/o.sc/r.sc/e.sc/m.sc4.10. A ﬁrst order formula /u1D6FC(/u1D465)(in the signature with one binary relation and ﬁnitely
many unary relations) is preserved under weak simulations i ﬀ it is equivalent to the standard trans-
lation of aformulain L/square,/Diamond,∧,∨∪{⊤,⊥}.
P/r.sc/o.sc/o.sc/f.sc.Wealreadyestablishedtheright-to-leftdirection(Theor em4.7).Fortheleft-to-rightdi-
rection, let/u1D6FC(/u1D465)be some weak simulation-preserved ﬁrst order formula, and set mon-con(/u1D6FC):=
{/u1D446/u1D447/u1D465(/u1D713) |/u1D713∈ L/square,/Diamond,∧,∨∪ {⊤,⊥}&/u1D6FC|=/u1D446/u1D447/u1D465(/u1D713)}(where “mon-con” stands for monotone conse-
quences).Theargumentfollowsessentiallythesamelineasinth echaracterisationfor L/square,/Diamond,∧,∨,⊤,⊥
in [12]. Clearly/u1D6FCimplies every formula in mon-con (/u1D6FC)by deﬁnition. We will show that also
mon-con(/u1D6FC) |=/u1D6FC. From this, it follows from a compactness argument that there a re/u1D7131,...,/u1D713/u1D45B∈
L/square,/Diamond,∧,∨∪{⊤,⊥}suchthat/u1D446/u1D447/u1D465(/u1D7131∧...∧/u1D713/u1D45B) ≡/u1D6FC.Note thatin case /u1D6FC=⊤,/u1D45B=0but in thatcase
/u1D7131∧...∧/u1D713/u1D45Bis the empty conjunctionwhich is ⊤and/u1D446/u1D447/u1D465(⊤):=⊤ ∈ L/square,/Diamond,∧,∨∪{⊤,⊥}. Toshow
this entailment, let /u1D440,/u1D460|=mon-con(/u1D6FC), in other words, let /u1D440be any structure satisfying the set
ofﬁrst-order formulasmon-con (/u1D6FC)under the assignment that sends /u1D465to/u1D460.
Deﬁne the set of ﬁrst orderformulas Φ:={¬/u1D446/u1D447/u1D465(/u1D713) |/u1D713∈ L/square,/Diamond,∧,∨and/u1D440,/u1D460|=¬/u1D713} ∪{/u1D6FC}. Bya
standard model-theoreticargument, Φis satisﬁable. For suppose otherwise, then by compactness
thereare/u1D7111,...,/u1D711/u1D45B∈ L/square,/Diamond,∧,∨suchthat/u1D440,/u1D460/\e}a⊔io\slash|=/u1D711/u1D456(forall/u1D456=1.../u1D45B)andsuchthat {/u1D6FC,¬/u1D446/u1D447/u1D465(/u1D7111),...
,¬/u1D446/u1D447/u1D465(/u1D711/u1D45B)}is inconsistent. Since /u1D446/u1D447/u1D465(·)commutes with the Boolean connectives, it follows that
/u1D6FC|=/u1D446/u1D447/u1D465(/u1D7111∨...∨/u1D711/u1D45B),wherethus (/u1D7111∨...∨/u1D711/u1D45B) ∈mon-con(/u1D6FC).Notethatitmightbethat /u1D45B=0
in which case /u1D7111∨...∨/u1D711/u1D45Bis the empty disjunction which is ⊥and we set/u1D446/u1D447/u1D465(⊥)to be⊥. But
then/u1D6FC|=⊥so/u1D6FC≡ ⊥.
,Vol. 1,No. 1,Article. Publication date: February 2022.14 BaldertenCateand RaoulKoudijs
Since/u1D440,/u1D460|=mon-con(/u1D6FC)so/u1D440,/u1D460|=/u1D446/u1D447/u1D465(/u1D711/u1D456)for some 1 ≤/u1D456≤/u1D45B. On the other hand, we had
/u1D440,/u1D460/\e}a⊔io\slash|=/u1D446/u1D447/u1D465(/u1D711/u1D456)since we supposed that /u1D446/u1D447/u1D465(/u1D711/u1D456)∉mon-tp/u1D440(/u1D460); a contradiction. We have shown
thatΦis a satisﬁable ﬁrst order theory in a single free variable /u1D465, so there exists a ﬁrst order
structure/u1D441andanelement /u1D462∈/u1D451/u1D45C/u1D45A(/u1D441)suchthat/u1D441|=/u1D6FD(/u1D462)forall/u1D6FD∈Φ.Thisinducesapointed
Kripke modelthat we also denote by (/u1D441,/u1D462).
Let mon-tp/u1D440(/u1D460):={/u1D446/u1D447/u1D465(/u1D713) |/u1D713∈ L/square,/Diamond,∧,∨&/u1D440,/u1D460|=/u1D713}(where “mon-tp” stands for monotone
type). We show that mon-tp/u1D441(/u1D462) ⊆mon-tp/u1D440(/u1D460). We argue via contraposition, so consider some
/u1D712∈ L/square,/Diamond,∧,∨such that/u1D446/u1D447/u1D465(/u1D712)∉mon-tp/u1D440(/u1D460). This means that /u1D440,/u1D460|=¬/u1D446/u1D447/u1D465(/u1D712), so by deﬁnition
¬/u1D446/u1D447/u1D465(/u1D712) ∈Φ.Butweknowthat /u1D441,/u1D462satisﬁes thewholetheory Φsoin particular /u1D441,/u1D462|=¬/u1D446/u1D447/u1D465(/u1D712)
whence/u1D712∉mon-tp/u1D441(/u1D462). By Lemma 4.9there exists modally saturated pointed Kripke models
(/u1D440∗,/u1D460∗)and(/u1D441∗,/u1D462∗)satisfyingthesamemodalformulasas (/u1D440,/u1D460)and(/u1D441,/u1D462)respectively.Deﬁne
the relation:
/u1D44D:={(/u1D463,/u1D461) ∈/u1D451/u1D45C/u1D45A(/u1D441∗) ×/u1D451/u1D45C/u1D45A(/u1D440∗) |mon-tp/u1D441∗(/u1D463) ⊆mon-tp/u1D440∗(/u1D461)}
We show that /u1D44D:/u1D441∗,/u1D462∗→/u1D440∗,/u1D460∗. First of all, observe that mon-tp/u1D441∗(/u1D462∗)=mon-tp/u1D441(/u1D462) ⊆
mon-tp/u1D440(/u1D460)=mon-tp/u1D440∗(/u1D460∗)andthus (/u1D462∗,/u1D460∗) ∈/u1D44D.
[atom]Thisholdstriviallysince /u1D441∗,/u1D463|=/u1D45Dmeans/u1D446/u1D447/u1D465(/u1D45D) ∈mon-tp/u1D441∗(/u1D463) ⊆mon-tp/u1D440∗(/u1D461)sothat
/u1D440∗,/u1D461|=/u1D45Daswell.
[forth’] Let /u1D445/u1D441∗/u1D463/u1D463′. We consider two cases: (i) mon-tp/u1D441∗(/u1D463′)=∅or (ii) mon-tp/u1D441∗(/u1D463′)≠∅. In
the latter case (ii), it is easy to see that every ﬁnite subset o f mon-tp/u1D441∗(/u1D463′)is satisﬁable at some
successorof /u1D461in/u1D440∗.Forlet/u1D446/u1D447/u1D465(/u1D7111),.../u1D446/u1D447/u1D465(/u1D711/u1D45B) ∈mon-tp/u1D441∗(/u1D463′).Then/u1D441,/u1D463|=/u1D446/u1D447/u1D465(/Diamond(/u1D7111∧...∧/u1D711/u1D45B))
andthus/u1D440∗,/u1D461|=/u1D446/u1D447/u1D465(/Diamond(/u1D7111∧...∧/u1D711/u1D45B))since(/u1D463,/u1D461) ∈/u1D44Dandthusmon-tp/u1D441∗(/u1D463) ⊆mon-tp/u1D440∗(/u1D461).Since
/u1D440∗ismodallysaturated,theremustbesomesuccessor /u1D461′∈/u1D445/u1D440∗[/u1D461]thatsatisﬁes mon-tp/u1D441∗(/u1D463′),so
mon-tp/u1D441∗(/u1D463′) ⊆mon-tp/u1D440∗(/u1D461′)and therefore (/u1D463′,/u1D461′) ∈/u1D44D. If (i) then by Lemma 4.8we know that
/u1D441∗,/u1D463′↔/clockwise∅.
[back’] Let /u1D445/u1D440∗/u1D461/u1D461′. Deﬁne ant-tp/u1D440(/u1D460):={¬/u1D446/u1D447/u1D465(/u1D713) |/u1D713∈ L/square,/Diamond,∧,∨, /u1D440,/u1D460|=¬/u1D713}. We will
consider again two cases: (i) ant-tp/u1D440∗(/u1D461′)=∅or (ii) ant-tp/u1D440∗(/u1D461′)≠∅. In the latter case (ii), it
is easy to see that every ﬁnite subset of ant-tp/u1D440∗(/u1D461′)is satisﬁed at some successor of /u1D463in/u1D441∗.
For let¬/u1D446/u1D447/u1D465(/u1D7111),...,¬/u1D446/u1D447/u1D465(/u1D711/u1D45B) ∈ant-tp/u1D440∗(/u1D461′). It follows that /u1D440∗,/u1D461|=/u1D446/u1D447/u1D465(/Diamond(¬/u1D7111∧...∧ ¬/u1D711/u1D45B))
so as¬/u1D446/u1D447/u1D465(/Diamond(¬/u1D7111∧...∧ ¬/u1D711/u1D45B)) ≡/square(/u1D7111∨...∨/u1D711/u1D45B)and the latter formula is in L/square,/Diamond,∧,∨we
have that/u1D446/u1D447/u1D465(/square(/u1D7111∨...∨/u1D711/u1D45B))∉mon-tp/u1D440∗(/u1D461). But as(/u1D463,/u1D461) ∈/u1D44Dwe have mon-tp/u1D441∗(/u1D463) ⊆
mon-tp/u1D440∗(/u1D461)so also/u1D446/u1D447/u1D465(/square(/u1D7111∨...∨/u1D711/u1D45B))∉mon-tp/u1D440∗(/u1D463). By the same reasoning again we
get/u1D441∗,/u1D463|=/u1D446/u1D447/u1D465(/Diamond(¬/u1D7111∧...∧ ¬/u1D711/u1D45B))which means that {¬/u1D446/u1D447/u1D465(/u1D7111),...,¬/u1D446/u1D447/u1D465(/u1D711/u1D45B)}is satisﬁ-
able at some successor of /u1D463in/u1D441∗. Hence, by modal saturation of /u1D441∗there exists some succes-
sor/u1D463′∈/u1D445/u1D441∗[/u1D463]that satisﬁes ant-tp/u1D440∗(/u1D461′). Finally, we show that mon-tp/u1D441∗(/u1D463′) ⊆mon-tp/u1D440∗(/u1D461′),
which shows that (/u1D463′,/u1D461′) ∈/u1D44D. We argue by contraposition, so let /u1D446/u1D447/u1D465(/u1D711)∉mon-tp/u1D440∗(/u1D461′). By
deﬁnition of ant-tp we get ¬/u1D446/u1D447/u1D465(/u1D711) ∈ant-tp/u1D440∗(/u1D461′), and since/u1D441∗,/u1D463′satisﬁes ant-tp/u1D440∗(/u1D461′)it fol-
lows that ¬/u1D446/u1D447/u1D465(/u1D711) ∈ant-tp/u1D441∗(/u1D463′)as well. But then by deﬁnition of ant-tp again we have that
/u1D446/u1D447/u1D465(/u1D711) ∈mon-tp/u1D441∗(/u1D463′).
Weconcludebychasingthediagram:byconstruction, /u1D441,/u1D462|=/u1D6FC.Hence,since (/u1D441,/u1D462)and(/u1D441∗,/u1D462∗)
agreeonallﬁrst-orderformulasinonefreevariable, /u1D441∗,/u1D462∗|=/u1D6FC.Therefore,bypreservationunder
weak simulations, /u1D440∗,/u1D460∗|=/u1D6FC, and therefore, since (/u1D440,/u1D460)and(/u1D440∗,/u1D460∗)agree on all ﬁrst-order
formulasin one free variable, /u1D440,/u1D460|=/u1D6FC. /square
R/e.sc/m.sc/a.sc/r.sc/k.sc 4.1. Rosen [15] showed that the classic Van Benthem characterization of mo dal logic in
termsofbisimulation-preservation holdsalsointheﬁnite ,i.e., whenrestrictedtoﬁnitestructures. We
leave itas an openproblem whether Theorem 4.10holdsin the ﬁnite.
,Vol. 1,No. 1, Article. Publication date: February2022.Characterising Modal FormulaswithExamples 15
R/e.sc/m.sc/a.sc/r.sc/k.sc 4.2. An immediate corollary of Lemma 4.6is that the syntactic restriction to L/square,/Diamond,∧,∨
thus trivialises the problems of determining satisﬁabilit y and validity. That is, all L/square,/Diamond,∧,∨formulas
aresatisﬁable, and noneofthem isvalid. Although thismake s thesatisﬁability problemfor L/square,/Diamond,∧,∨
trivial, checking entailment for L/square,/Diamond,∧,∨is still PSPACE-complete like the corresponding problem fo r
thefullmodallanguage.Thiscanbeshownbyadaptinganargu mentfrom[ 10,Theorem2.2.6onp.38]
tothemodalcase,whichinvolvessubstitutingfreshpositi vepropositionalvariablesfornegatedatoms
(afterbringingtheformulainnegationnormalform),andre writingtheresultingformulaaccordingly
so as not to contain negation. This is one instance of the more general phenomenon that more ﬁne-
grainedstructure of traditional reasoning problemsemerg esfrom the study of language-fragments.
4.2 The CategoryofPointed Models andWeakSimulations
In this section, we study weak simulations from a category-the oretic perspective. We start by
showingthatpointedmodelswithweaksimulationsindeedformac ategory.Recallthatacategory
consists of a collection of objectsand a collection of morphisms , together a composition operation
on morphisms that satisﬁes suitable axioms (namely, associa tivity and the existence of “identity”
morphisms).Inourcase,theobjectsarepointedmodelsandthe morphismsareweaksimulations.
Furthermore,ourcompositionoperationwillbeordinary relational composition .Thus,weneedto
show that the relational composition oftwo weak simulations i s a weak simulation, and we need
toshowthateverypointedmodelhasaweaksimulationtoitsel fthatactsasanidentitymorphism.
Thefollowinglemmawill help usto prove closure under relatio nal composition.
L/e.sc/m.sc/m.sc/a.sc 4.11.
•If/u1D440,/u1D460→/u1D440′,/u1D460′and/u1D440′,/u1D460′↔/clockwise∅, then/u1D440,/u1D460↔/clockwise∅.
•If/u1D440,/u1D460↔/clockwisePropand/u1D440,/u1D460→/u1D440′,/u1D460′then/u1D440′,/u1D460′↔/clockwiseProp.
P/r.sc/o.sc/o.sc/f.sc.Let/u1D44D:/u1D440,/u1D460→/u1D440′,/u1D460′and/u1D44D′:/u1D440′,/u1D460′↔/clockwise∅. Without loss of generality (i.e. up to
bisimilarity), assume that /u1D440=/u1D440↾/u1D460and/u1D440′=/u1D440′↾/u1D460′. By Lemma 2.7it must be that /u1D44D′is total,
i.e./u1D44D′=/u1D451/u1D45C/u1D45A(/u1D440′)×/u1D451/u1D45C/u1D45A(/clockwise∅).Let/u1D44D∗:=/u1D451/u1D45C/u1D45A(/u1D440)×/u1D451/u1D45C/u1D45A(/clockwise∅);weshowthatthisisabisimulation
between(/u1D440,/u1D460)and/clockwise∅.Solet(/u1D461,/u1D45F) ∈/u1D44D∗be arbitrary.
[atom]Since /u1D440=/u1D440↾/u1D460,thereisapath (/u1D4610,/u1D460...,/u1D461 /u1D45B)in/u1D440with/u1D4610=/u1D460and/u1D461/u1D45B=/u1D461.Usingthe[forth]
clause of/u1D44Drepeatedly, it follows that there is a path (/u1D461′
0,...,/u1D461′
/u1D45B)in/u1D440′with/u1D4610=/u1D461and(/u1D461/u1D456,/u1D461′
/u1D456) ∈/u1D44D
forall/u1D456≤/u1D45B.Also,thefactthat /u1D44D′isabisimulationitfollowsthat /u1D463/u1D440′(/u1D461′)=∅forall/u1D461′∈/u1D451/u1D45C/u1D45A(/u1D440′),
so in particular /u1D463/u1D440′(/u1D461′
/u1D45B)=∅.But as/u1D44Disa weak simulation /u1D463/u1D440(/u1D461) ⊆/u1D463/u1D440′(/u1D461′
/u1D45B)so/u1D463/u1D440=∅aswell.
[forth]If/u1D445/u1D440/u1D461/u1D461′then clearly (/u1D461′,/u1D45F) ∈/u1D44D∗by deﬁnition and /u1D45Fseesitself.
[back]Note that /u1D45Fonly sees itself so /u1D445/u1D45F/u1D45F′implies/u1D45F′=/u1D45F.We show that there is some successor
/u1D461′of/u1D461such that (/u1D461′,/u1D45F) ∈/u1D44D∗. By deﬁnition of /u1D44D∗, any successor would suﬃce. But note that /u1D440↾
/u1D461,/u1D461↔/u1D440,/u1D461↔/clockwise∅hence/u1D461must have somesuccessor.
The proofofthe seconditem is omitted asit is analogous. /square
T/h.sc/e.sc/o.sc/r.sc/e.sc/m.sc4.12. Weak simulations are closed under relational composition: if/u1D44D1:/u1D4400,/u1D4600→/u1D4401,/u1D4601
and/u1D44D2:/u1D4401,/u1D4601→/u1D4402,/u1D4602, then/u1D44D1◦/u1D44D2:/u1D4400,/u1D4600→/u1D4402,/u1D4602.
P/r.sc/o.sc/o.sc/f.sc.Let(/u1D4610,/u1D4612) ∈/u1D44D1◦/u1D44D2.Then there issome /u1D4611with(/u1D4610,/u1D4611) ∈/u1D44D1and(/u1D4611,/u1D4612) ∈/u1D44D2.
[atom]Clearly /u1D463(/u1D4610) ⊆/u1D463(/u1D4611) ⊆/u1D463(/u1D4612)bythe [atom]clausesof /u1D44D1and/u1D44D2.
[forth’] If/u1D445/u1D4610/u1D4620, by [forth’] of /u1D44D1either/u1D4400,/u1D4620↔/clockwise∅or there is a matching successor /u1D4621of
/u1D4611with(/u1D4620,/u1D4621) ∈/u1D44D1. In the former case, we can use the escape clause for the pair (/u1D4610,/u1D4612)and we
are done. Else, we apply the [forth’] clause on /u1D4621and get that either /u1D4401,/u1D4621↔/clockwise∅or there is a
successor/u1D4622of/u1D4612with(/u1D4621,/u1D4622) ∈/u1D44D2and hence (/u1D4620,/u1D4622) ∈/u1D44D1◦/u1D44D2. In the latter case, we would be
done.Intheformercasewehave /u1D4400,/u1D4620→/u1D4401,/u1D4621↔/clockwise∅sobylemma 4.11/u1D4400,/u1D4620↔/clockwise∅andwe
canuse the escape clauseon (/u1D4610,/u1D4612) ∈/u1D44D1◦/u1D44D2.
,Vol. 1,No. 1,Article. Publication date: February 2022.16 BaldertenCateand RaoulKoudijs
[back’] If/u1D445/u1D4612/u1D4622by [back’] of /u1D44D2either/u1D4402,/u1D4622↔/clockwisePropor there is a matching successor /u1D4621of
/u1D4611with(/u1D4621,/u1D4622) ∈/u1D44D2. In the former case, we can use the escape clause for the pair (/u1D4610,/u1D4612)and we
are done.Else, we apply the [back’]clause on /u1D4621and get that either /u1D4401,/u1D4621↔/clockwisePropor there is a
successor/u1D4620of/u1D4610with(/u1D4620,/u1D4621) ∈/u1D44D1and hence (/u1D4620,/u1D4622) ∈/u1D44D1◦/u1D44D2. In the latter case, we would be
done. In the former case we have /clockwiseProp↔/u1D4401,/u1D4621→/u1D4402,/u1D4622so by lemma 4.11/u1D4402,/u1D4622↔/clockwiseProp
and we canuse the escape clauseon (/u1D4610,/u1D4612) ∈/u1D44D1◦/u1D44D2. /square
Since our composition operation is ordinary relational compos ition, it is clearly an associative
operation. It rests therefore only to observe that the “diagona l” relation 1 (/u1D440,/u1D460)={(/u1D461,/u1D461) |/u1D461∈
/u1D451/u1D45C/u1D45A(/u1D440)}is indeed a weak simulation that acts as an identity morphism, f or each pointed model
(/u1D440,/u1D460).
C/o.sc/r.sc/o.sc/l.sc/l.sc/a.sc/r.sc/y.sc4.13. Theclass ofpointedmodels, with weaksimulations asmorphi sms,formsacate-
gorywSim[Prop].
Next, we will study the basic category-theoretic propertie s of the category wSim[Prop]. A
weakly initial object in a category is a not necessarily unique (u p to isomorphism) object that
hasa morphism into every objectin that category.Dually, a we aklyﬁnal objectis a not necessar-
ilyunique (uptoisomorphism)objectsuchthatevery objecti n thecategoryhasamorphisminto
thisobject.
T/h.sc/e.sc/o.sc/r.sc/e.sc/m.sc 4.14. The category wSim[Prop]has a weakly initial object, namely /clockwise∅and a weakly
ﬁnal object, namely /clockwiseProp.
P/r.sc/o.sc/o.sc/f.sc.Follows immediately from Lemma 4.5. Note that there is not a uniqueweak simulation
from/clockwise∅tootherpointedmodels (/u1D440,/u1D460),notevenwhen /u1D440ispoint-generated.Acounterexampleis
when/u1D440=({/u1D460,/u1D461},{(/u1D460,/u1D461),(/u1D461,/u1D461)},/u1D463)where/u1D463(/u1D460)=/u1D463(/u1D461)=Prop}.Thenboth {(/u1D45F,/u1D460)}and{(/u1D45F,/u1D460),(/u1D45F,/u1D461)}
areweaksimulations /clockwise∅→/u1D440,/u1D460(where/u1D451/u1D45C/u1D45A(/clockwise∅)={/u1D45F}istherootoftheemptyloopmodel). /square
The next natural question that arises is whether our category h as products and coproducts. A
category has products if for every two objects /u1D434and/u1D435there is an object /u1D434×/u1D435with morphisms
/u1D70B0:/u1D434×/u1D435→/u1D434,/u1D70B1:/u1D434×/u1D435→/u1D435(the projectionsonto the left- and right coordinate, respectiv ely)
such that for every object /u1D436and pairs of morphisms ℎ:/u1D436→/u1D434,/u1D453:/u1D436→/u1D435there is a unique
morphism/u1D454:/u1D436→/u1D434×/u1D435such that/u1D70B0◦/u1D454=ℎand/u1D70B1◦/u1D454=/u1D453.Equivalently, there is a unique /u1D454for
whichthe followingdiagramcommutes:
/u1D434 /u1D435
/u1D434×/u1D435
/u1D436/u1D70B0 /u1D70B1
ℎ /u1D453
∃!/u1D454
Dually,acategoryhascoproductsifforevery twoobjects /u1D434and/u1D435thereisanobject /u1D434⊔/u1D435with
morphisms /u1D70C0:/u1D434→/u1D434⊔/u1D435,/u1D70C1:/u1D435→/u1D434⊔/u1D435(the co-projections)such that for every object /u1D436and
pairs of morphisms ℎ:/u1D434→/u1D436,/u1D453:/u1D435→/u1D436there is a unique morphism /u1D454:/u1D434⊔/u1D435→/u1D436such that
/u1D454◦/u1D70C0=ℎand/u1D454◦/u1D70C1=/u1D453.Equivalently, /u1D454must makethe followingdiagramcommute:
,Vol. 1,No. 1, Article. Publication date: February2022.Characterising Modal FormulaswithExamples 17
/u1D436
/u1D434⊔/u1D435
/u1D434 /u1D435∃!/u1D454
/u1D70C0ℎ
/u1D70C1/u1D453
T/h.sc/e.sc/o.sc/r.sc/e.sc/m.sc4.15. Thecategory wSim[Prop]doesnothave coproducts.
P/r.sc/o.sc/o.sc/f.sc.It suﬃces to show that there are two pointed models (/u1D438,/u1D452),(/u1D438′,/u1D452′)such that their co-
product(/u1D438,/u1D452) ⊔ (/u1D438′,/u1D452′)doesnot exist. Consider the followingtwo modelsdepicted belo w;
(/u1D434,/u1D44E)/u1D45D /u1D45E/u1D45F
(/u1D435,/u1D44F)
Note that/u1D434,/u1D44E|=/square(/u1D45D∨/u1D45E)and/u1D435,/u1D44F|=/Diamond/u1D45F.We will show that (/u1D434,/u1D44E) ⊔ (/u1D435,/u1D44F)doesnot exist.
Suppose for contradiction that (/u1D434,/u1D44E) ⊔ (/u1D435,/u1D44F)does exist. Then by the properties of coproducts
it must be that (/u1D434,/u1D44E) →(/u1D434,/u1D44E) ⊔ (/u1D435,/u1D44F)and(/u1D435,/u1D44F) →(/u1D434,/u1D44E) ⊔ (/u1D435,/u1D44F)and that for any (/u1D436,/u1D450)for
which(/u1D434,/u1D44E) →(/u1D436,/u1D450)and(/u1D435,/u1D44F) →(/u1D436,/u1D450)we have(/u1D434,/u1D44E) ⊔ (/u1D435,/u1D44F) →(/u1D436,/u1D450)(universal property).
By preservation, it immediately follows that (/u1D434,/u1D44E) ⊔ (/u1D435,/u1D44F) |=/square(/u1D45D∨/u1D45E) ∧/Diamond/u1D45F. However, observe
that/square(/u1D45D∨/u1D45E) ∧/Diamond/u1D45F|=/Diamond(/u1D45D∧/u1D45F) ∨/Diamond(/u1D45E∧/u1D45F). Hence either (i) (/u1D434,/u1D44E) ⊔ (/u1D435,/u1D44F) |=/Diamond(/u1D45D∧/u1D45F)or (ii)
(/u1D434,/u1D44E) ⊔ (/u1D435,/u1D44F) |=/Diamond(/u1D45E∧/u1D45F). Now consider the following two models (/u1D436,/u1D450)and(/u1D436′,/u1D450′), both of
whichare ‘above’ both (/u1D434,/u1D44E)and(/u1D435,/u1D44F)in theweak simulation order.
(/u1D436,/u1D450)/u1D45D,/u1D45F /u1D45E/u1D45D /u1D45E,/u1D45F
(/u1D436′,/u1D450′)
Itiseasilyveriﬁedthatindeed (/u1D434,/u1D44E) →(/u1D436,/u1D450),(/u1D435,/u1D44F) →(/u1D436,/u1D450)and(/u1D434,/u1D44E) →(/u1D436′,/u1D450′),(/u1D435,/u1D44F) →(/u1D436′,/u1D450′).
Wewillnotspellouttheseweaksimulationsindetail.Moreove r,observethat /u1D436,/u1D450/\e}a⊔io\slash|=/Diamond(/u1D45E∧/u1D45F)and
that/u1D436′,/u1D450′/\e}a⊔io\slash|=/Diamond(/u1D45D∧/u1D45F). However, it follows from the universal property of (/u1D434,/u1D44E) ⊔ (/u1D435,/u1D44F)that
(/u1D434,/u1D44E) ⊔ (/u1D435,/u1D44F) →(/u1D436,/u1D450)and(/u1D434,/u1D44E) ⊔ (/u1D435,/u1D44F) →(/u1D436′,/u1D450′), i.e. the coproduct (/u1D434,/u1D44E) ⊔ (/u1D435,/u1D44F)must be
‘below’ both (/u1D436,/u1D450)and(/u1D436′,/u1D450′)in the weak simulation order. This is a contradiction, since if ( i)
holdsthen/u1D436′,/u1D450′|=/Diamond(/u1D45D∧/u1D45F)bypreservation andif(ii)then /u1D436,/u1D450|=/Diamond(/u1D45E∧/u1D45F)bypreservation.Thus
the coproduct (/u1D434,/u1D44E) ⊔ (/u1D435,/u1D44F)of/u1D434,/u1D44Eand/u1D435,/u1D44Fcannotexist. /square
As we will see soon, wSim[Prop]does not have productseither. Rather than giving a concrete
counterexample,wewillshowthat wSim[Prop]isinfactisomorphictoitsownoppositecategory,
andwewillrelyonthefactthatproductsinacategorycorresp ondtoco-productsin theopposite
category.More precisely,consider the following‘ﬂipping’ op eration onmodels.
Deﬁnition 4.16. Given amodel /u1D440=(/u1D451/u1D45C/u1D45A(/u1D440),/u1D445,/u1D463),let/u1D440¬=(/u1D451/u1D45C/u1D45A(/u1D440),/u1D445,/u1D463¬)beobtainedfrom
/u1D440by ‘ﬂipping’all the valuations, i.e. /u1D463¬(/u1D461)=Prop−/u1D463(/u1D461)forall/u1D461∈/u1D451/u1D45C/u1D45A(/u1D440).
,Vol. 1,No. 1,Article. Publication date: February 2022.18 BaldertenCateand RaoulKoudijs
Inwhatfollowsweuse /u1D44D−1todenotetherelationalconverseof /u1D44D,i.e.,/u1D44D−1={(/u1D44F,/u1D44E) | (/u1D44E,/u1D44F) ∈/u1D44D}.
P/r.sc/o.sc/p.sc/o.sc/s.sc/i.sc/t.sc/i.sc/o.sc/n.sc4.17. Whenever/u1D44D:/u1D438,/u1D452→/u1D440,/u1D460then/u1D44D−1:/u1D440¬,/u1D460→/u1D438¬,/u1D452
P/r.sc/o.sc/o.sc/f.sc.Let(/u1D461,/u1D453) ∈/u1D44D−1be arbitrary, then (/u1D453,/u1D461) ∈/u1D44D. [atom] By the [atom] clause of /u1D44Dwe get
/u1D463(/u1D453) ⊆/u1D463(/u1D461)and hence/u1D463¬(/u1D461) ⊆/u1D463¬(/u1D453). [forth’] If/u1D445/u1D461/u1D462and/u1D440¬,/u1D462/notarrowboth/clockwise∅then/u1D440,/u1D462/notarrowboth/clockwisePropand
hence by the [back’] clause of /u1D44Dthere must be some successor /u1D454of/u1D453with(/u1D454,/u1D462) ∈/u1D44Dand hence
(/u1D462,/u1D454) ∈/u1D44D−1.[back’]Similarly,if /u1D445/u1D453/u1D454and/u1D438¬,/u1D454/notarrowboth/clockwisePropthen/u1D438,/u1D454/notarrowboth/clockwise∅soby[forth’]of /u1D44Dthere
must be somesuccessor /u1D462of/u1D461with(/u1D454,/u1D462) ∈/u1D44Dand hence (/u1D462,/u1D454) ∈/u1D44D−1. /square
In light of Proposition 4.17, we can naturally view the operation (·)¬as a “contravariant endo-
functor”on wSim[Prop].Formally,let wSim[Prop]/u1D45C/u1D45Dbethecategorythatisidenticalto wSim[Prop],
exceptthatthedirectionofthemorphismsisreversed.Wede ﬁne(·)¬:wSim[Prop] →wSim[Prop]/u1D45C/u1D45D
asthefunctorobtainedbysetting (/u1D440,/u1D460)¬:=(/u1D440¬,/u1D460)onobjectsand /u1D44D¬:=/u1D44D−1onmorphisms.Itis
easytoseethatthisisindeedafunctorasitcommuteswithcomp ositionandidentity morphisms.
P/r.sc/o.sc/p.sc/o.sc/s.sc/i.sc/t.sc/i.sc/o.sc/n.sc4.18. Thefunctor (·)¬:wSim[Prop] →wSim[Prop]/u1D45C/u1D45Disan isomorphism.
P/r.sc/o.sc/o.sc/f.sc.Observe that the functor (·)¬:wSim[Prop] →wSim[Prop]/u1D45C/u1D45Dinduces an inverse,
namelythe oppositefunctor (·)¬/u1D45C/u1D45D:wSim[Prop]/u1D45C/u1D45D→wSim[Prop]deﬁnedby (/u1D440,/u1D460)¬/u1D45C/u1D45D:=(/u1D440¬,/u1D460)
and/u1D44D¬/u1D45C/u1D45D:=/u1D44D−1. That is, (·)¬/u1D45C/u1D45Dis deﬁned just like (·)¬except that the domain and codomain
have switched. We have to show that the composition of functor s(·)¬◦ (·)¬/u1D45C/u1D45Dis the same as the
identity functor on wSim. But we know that ((/u1D440,/u1D460)¬)¬/u1D45C/u1D45D=(/u1D440¬¬,/u1D460)=(/u1D440,/u1D460)and clearly also
(/u1D44D¬)¬/u1D45C/u1D45D=(/u1D44D−1)−1=/u1D44D. /square
Sinceproductsin wSim[Prop]correspondtoco-productsin wSim[Prop]/u1D45C/u1D45D,itfollowsthat wSim
hasproductsiﬀ it hascoproducts.Therefore,we obtain:
C/o.sc/r.sc/o.sc/l.sc/l.sc/a.sc/r.sc/y.sc4.19. Thecategory wSim[Prop]doesnot have products.
Finally, we show that our isomorphism also coheres nicely with the following syntactic opera-
tiononformulas.Wewillmakecrucialuseofthisobservatio nintheproofofthemaintheoremin
the following section. We have already dealt with these operat ions more informally in the proof
ofTheorem 3.9,here we makethese observations moreexplicit.
Deﬁnition 4.20. Given a modal formula /u1D711with variables among Prop ={/u1D45D1,...,/u1D45D/u1D45B}, let/u1D711¬:=
/u1D711[¬/u1D45D1//u1D45D1]...[¬/u1D45D/u1D45B//u1D45D/u1D45B]. Note that/u1D711¬¬≡/u1D711, i.e. our operation is idempotent up to logical equiv-
alence(byremoving doublenegations).
P/r.sc/o.sc/p.sc/o.sc/s.sc/i.sc/t.sc/i.sc/o.sc/n.sc4.21. For all formulas /u1D711and pointedmodels (/u1D440,/u1D460)
/u1D440,/u1D460|=/u1D711iﬀ/u1D440¬,/u1D460|=/u1D711¬
P/r.sc/o.sc/o.sc/f.sc.By induction on the complexity of /u1D711. The Boolean case are immediate by inductive
hypothesis.Thecasesforthemodaloperators /squareand/Diamondarealsoimmediatebyinductivehypothesis
since(/square/u1D713)¬=/square(/u1D713¬)and(/Diamond/u1D713)¬=/Diamond(/u1D713¬).Theatomiccase followseasily fromthe deﬁnitions as
/u1D440,/u1D460|=/u1D45Diﬀ/u1D45D∈/u1D463(/u1D460)iﬀ/u1D45D∉/u1D463¬(/u1D460)iﬀ/u1D440¬,/u1D460|=¬/u1D45D. /square
4.3 ConstructionofWeak-Simulation Dualities
We ﬁrst deﬁne what weak simulations dualities are in the context ofwSim[Prop], and show that
they correspondto ﬁnite characterisationsof L/square,/Diamond,∧,∨-formulas.
Deﬁnition4.22. Aweaksimulationduality isapair(D/u1D45D/u1D45C/u1D460,D/u1D45B/u1D452/u1D454)ofﬁnitesetsofpointedmodels
suchthateverypointedmodeleitherweaklysimulatessomepo intedmodelfrom D/u1D45D/u1D45C/u1D460,orisweakly
,Vol. 1,No. 1, Article. Publication date: February2022.Characterising Modal FormulaswithExamples 19
simulatedbysomepointedmodelfrom D/u1D45B/u1D452/u1D454,wherethe“or”ismeantexclusively.Thatis,for ↑D=
{(/u1D438,/u1D452) | (/u1D438′,/u1D452′) →/u1D464(/u1D438,/u1D452)forsome(/u1D438′,/u1D452′) ∈ D}and↓D={(/u1D438,/u1D452) | (/u1D438,/u1D452) →/u1D464(/u1D438′,/u1D452′)forsome(/u1D438′,/u1D452′) ∈
D}we have that ↑D/u1D45D/u1D45C/u1D460and↓D/u1D45B/u1D452/u1D454partition wSim[Prop].
T/h.sc/e.sc/o.sc/r.sc/e.sc/m.sc 4.23. LetE=(D/u1D45D/u1D45C/u1D460,D/u1D45B/u1D452/u1D454)be a weak simulation duality where the examples in D/u1D45D/u1D45C/u1D460
havebeenlabelledpositivelyandtheexamplesin D/u1D45B/u1D452/u1D454negatively. Ifsome /u1D711∈ L/square,/Diamond,∧,∨ﬁtsEthenE
isaﬁnitecharacterisation of /u1D711w.r.t.L/square,/Diamond,∧,∨.
P/r.sc/o.sc/o.sc/f.sc.Let/u1D711,/u1D713∈ L/square,/Diamond,∧,∨andE=(/u1D438+,/u1D438−)be a weak-simulation duality such that /u1D711and
/u1D713both ﬁt these labelled examples. To see that /u1D711|=/u1D713, let/u1D440,/u1D460|=/u1D711. By preservation (Theorem
4.7),it cannotbe that (/u1D440,/u1D460) ∈ ↓/u1D438−otherwise/u1D711would be satisﬁed on,and therefore fail to ﬁt asa
negativeexample,someexamplein /u1D438−.Hence,since ↑/u1D438+and↓/u1D438−partition wSim[Prop],itfollows
that(/u1D440,/u1D460) ∈ ↑/u1D438+but then/u1D440,/u1D460|=/u1D713as well by preservation and the fact that /u1D713ﬁts/u1D438+as positive
examples.Theargumentthat /u1D713|=/u1D711is completelysymmetric. /square
By the above theorem,it suﬃcesto construct on input /u1D711∈ L/square,/Diamond,∧,∨, a weak simulation duality
(/u1D438+
/u1D711,/u1D438−
/u1D711)that/u1D711ﬁts. We will now give a direct construction of /u1D438+
/u1D711from/u1D711, going through a sort of
modalversion ofthe disjunctive normalformdeveloped by Kit F ine [5];computingthe examples
compositionally fromarbitrary formulaswould be hard given the complex role of conjunction as
a sort of ‘merging’ or ‘gluing’ operation on models. Then, we cont inue to show how this deﬁni-
tion of/u1D438+
/u1D711already implicitly deﬁnes also the negative examples /u1D438−
/u1D711via the automorphism (·)¬of
wSim[Prop].
Deﬁnition 4.24. (Fine Normal Form) A basic normal form of level 0 is a non-empty conjunction
ofpositiveliterals. Abasic normalformoflevel /u1D45B+1 isa non-emptyconjunctionof formulas
/u1D70B∧/Diamond/u1D7110∧...∧/Diamond/u1D711/u1D45B∧/square(/u1D7130∨...∨/u1D713/u1D45A)
where/u1D70Bis a (possibly empty) conjunction of positive (i.e. unnegated) p ropositional variables /u1D45D,
andeach/u1D711/u1D456,/u1D713/u1D457isabasicnormalformoflevelatmost /u1D45B(thisensuresthatanormalformoflevel /u1D45B
isalsoanormalformoflevel /u1D45B′forall/u1D45B′>/u1D45B).Anormalform oflevel/u1D45Aisanon-emptydisjunction
ofbasic normalformsof level /u1D45A.
Notethatweexplicitlyrequiretheconjunctionsanddisjunctions tobenon-emptyintheabove
deﬁnition, in order to exclude ⊤and⊥. Intuitively, basic normal forms are modal formulas in
negation normal form that may have disjunctions under the scope of boxes but no disjunctions
under the scopeofany diamonds.
T/h.sc/e.sc/o.sc/r.sc/e.sc/m.sc 4.25. For every formula /u1D709∈ L/square,/Diamond,∧,∨, there is a normal form /u1D45B/u1D453(/u1D709)of level/u1D451(/u1D709)such
that/u1D709≡/u1D45B/u1D453(/u1D709).
P/r.sc/o.sc/o.sc/f.sc.Byinductionon /u1D451(/u1D709).If/u1D451(/u1D709)=0wecanjustusethedisjunctivenormalformforpropo-
sitional logic,i.e. wesimply distribute ∧’sover∨’svia thevalidity /u1D45D∧(/u1D45E∨/u1D45F) ≡ (/u1D45D∧/u1D45E) ∨ (/u1D45D∧/u1D45F).
If/u1D451(/u1D709)=/u1D45B+1, observe that /u1D709is a Boolean combination of formulas /Diamond/u1D711,/square/u1D713and propositional
variables/u1D45D, where each /u1D451(/u1D711),/u1D451(/u1D713) ≤/u1D45B. By the inductive hypothesis, we may assume that each
such/u1D711and/u1D713are normal forms of level /u1D45B. This means that /u1D711≡/logicalortext.1Φand/u1D713≡/logicalortext.1Ψfor some
nonempty ﬁnite sets Φ,Ψof basic normal forms of level /u1D45B. By Kripke normality we transform
/Diamond/u1D711=/Diamond/logicalortext.1Φ≡/logicalortext.1
/u1D711∈Φ/Diamond/u1D711, after which /u1D709is equivalent to a Boolean combination of formulas of
theform/Diamond/u1D711, formulasoftheform /square(/u1D7130∨...∨/u1D713/u1D45A)andpositive propositional variables /u1D45D,where
/u1D711,/u1D7130,...,/u1D713/u1D45Aare all basic normalformsoflevel /u1D45B.
Applying the propositional distributive law again we obtain t he disjunctive normal form of
this Boolean combination, which is a big disjunction over conjunc tions of formulas of the form
/Diamond/u1D711,/square(/u1D7130∨...∨/u1D713/u1D45A)andpositivepropositionalvariables /u1D45D,where/u1D711,/u1D7130,...,/u1D713/u1D45Aareallbasicnormal
,Vol. 1,No. 1,Article. Publication date: February 2022.20 BaldertenCateand RaoulKoudijs
formsoflevel /u1D45B).WeapplyKripkenormalityinthe formoftheequivalence/logicalandtext.1
/u1D456/square/u1D711/u1D456≡/square(/logicalandtext.1
/u1D456/u1D711/u1D456)to
conjunctionsofformulasoftheform /square(/u1D7130∨...∨/u1D713/u1D45A),torewritethenintooneformulastartingwith
a/squareand under its scope a conjunction of disjunctions of basic normal for ms of level/u1D45B. Applying
thedistributive lawagainwerewritethisintoadisjunctiono fconjunctionsofbasicnormalforms
oflevel/u1D45B.Finallythen,thewholeformulaisrewrittentoadisjunctiono fconjunctionsoftheform
/u1D70B∧/Diamond0∧...∧/Diamond/u1D711/u1D45B∧/square(/u1D7130∨.../u1D713/u1D45A)where/u1D711,/u1D7130,...,/u1D713/u1D45Aareallbasicnormalformsoflevel /u1D45B.That
is, the whole formula is equivalently rewritten into a disjunct ion of basic normal forms of level
/u1D45B+1. /square
The following corollary is thus immediate from the fact that e very formula in L/square,/Diamond,∧,∨can be
broughtinto the above Fine normalform.
C/o.sc/r.sc/o.sc/l.sc/l.sc/a.sc/r.sc/y.sc4.26. Every basicnormal form oflevel /u1D458isof oneof the following forms:
(/u1D456)/u1D45D1∧...∧/u1D45D/u1D45B if/u1D45B=0
(/u1D456/u1D456)/u1D70B∧/Diamond/u1D7110∧...∧/Diamond/u1D711/u1D45B if/u1D45B>0
(/u1D456/u1D456/u1D456)/u1D70B∧/square(/u1D7130∨...∨/u1D713/u1D45A) if/u1D45B>0
(/u1D456/u1D463)/u1D70B∧/Diamond/u1D7110∧...∧/Diamond/u1D711/u1D45B∧/square(/u1D7130∨...∨/u1D713/u1D45A) if/u1D45B>0
where each/u1D711/u1D456,/u1D713/u1D457is a basic normal form of level /u1D458−1and/u1D70Bis a (possibly empty conjunction) of
positiveatoms.
Now comes the direct construction of /u1D438+
/u1D711given/u1D711∈ L/square,/Diamond,∧,∨in Fine normal form. Deﬁne the
following ‘ gluing’ operator (which we denote by /triangledownsldto suggest the connection with the syntactic
∇-operator[ 14])forbuilding the positive examples.
Deﬁnition 4.27. Given a set of pointed models Eand a set of propositional variables /u1D443⊆Prop
let/triangledownsld/u1D443(E)be the model obtained by gluing all the examples in Eto a new root /u1D45Fwith/u1D463(/u1D45F)=/u1D443.
Thatis:
•Domain/u1D451/u1D45C/u1D45A(/triangledownsld/u1D443(E))=/unionmultitext.1
(/u1D438,/u1D452)∈E/u1D451/u1D45C/u1D45A(/u1D438) ⊎{/u1D45F}
•Relation/u1D445/triangledownsld[/u1D45F]={/u1D452| (/u1D438,/u1D452) ∈E}and/u1D445/triangledownsld↾/u1D451/u1D45C/u1D45A(/u1D438)=/u1D445/u1D438forall(/u1D438,/u1D452) ∈E
•Colouring/u1D463/triangledownsld↾/u1D451/u1D45C/u1D45A(/u1D438)=/u1D463/u1D438forall(/u1D438,/u1D452) ∈Eand/u1D463/triangledownsld(/u1D45F)=/u1D443
Wewrite/triangledownsld/u1D443(/u1D438,/u1D452)ratherthan/triangledownsld/u1D443({(/u1D438,/u1D452)})forsingletons.ByTheorem 4.25,every/u1D711∈ L/square,/Diamond,∧,∨
is equivalent to a normal form /u1D45B/u1D453(/u1D711)of level/u1D451(/u1D711). In fact, we observed there (Corollary 4.26)
that every basic normal form is of one of the forms (i)-(iv). Henc e, we will deﬁne the positive
examples for these four cases separately. Note that for a conj unction of literals /u1D70B, ˆ/u1D70Bdenotes the
set of propositional variables occurring in /u1D70B. Further, we suppress the distinguished element for
readability, writing /u1D438instead of (/u1D438,/u1D452).
Deﬁnition 4.28. For every formula /u1D711inL/square,/Diamond,∧,∨in Fine normal form, we deﬁne the positive
examples of /u1D711to be the positive examples for /u1D45B/u1D453(/u1D711), in symbols /u1D438+
/u1D711:=/u1D438+
/u1D45B/u1D453(/u1D711), where the latter is
,Vol. 1,No. 1, Article. Publication date: February2022.Characterising Modal FormulaswithExamples 21
deﬁned asfollows:
/u1D438+
/u1D70B:={/triangledownsldˆ/u1D70B(/clockwise∅)}
/u1D438+
/u1D70B∧/Diamond/u1D7110∧...∧/Diamond/u1D711/u1D45B:={/triangledownsldˆ/u1D70B({/u1D4381,...,/u1D438/u1D45B} ∪{/clockwise∅}) |/u1D438/u1D456∈/u1D438+
/u1D711/u1D456forall/u1D456≤/u1D45B}
/u1D438+
/u1D70B∧/square(/u1D7130∨...∨/u1D713/u1D45A):={/triangledownsldˆ/u1D70B(E) |E⊆/uniondisplay.1
/u1D457≤/u1D45A/u1D438+
/u1D713/u1D457}
/u1D438+
/u1D70B∧/Diamond/u1D7110∧...∧/Diamond/u1D711/u1D45B∧/square(/u1D7130∨...∨/u1D713/u1D45A):={/triangledownsldˆ/u1D70B({/u1D4381,...,/u1D438/u1D45B} ∪E) |/u1D438/u1D456∈/uniondisplay.1
/u1D457≤/u1D45A/u1D438+
/u1D711/u1D456∧/u1D713/u1D457∀/u1D456≤/u1D45B,∅≠E⊆/uniondisplay.1
/u1D457≤/u1D45A/u1D438+
/u1D713/u1D457}
/u1D438+/logicalortext.1
/u1D456≤/u1D45B/u1D711/u1D456:=/uniondisplay.1
/u1D456≤/u1D45B/u1D438+
/u1D711/u1D456
where ˆ/u1D70Bistheset ofallatomsoccurringin theconjunctionofliterals/ term/u1D70B,and importantly,in
the onebut last line, /u1D438+
/u1D711/u1D456∧/u1D713/u1D457isalready deﬁned byinductive hypothesis.5
P/r.sc/o.sc/p.sc/o.sc/s.sc/i.sc/t.sc/i.sc/o.sc/n.sc4.29. Every/u1D711∈ L/square,/Diamond,∧,∨ﬁts/u1D438+
/u1D711aspositive examples.
P/r.sc/o.sc/o.sc/f.sc.By induction on the complexity of normal forms. We show that for each basic normal
form/u1D709,/u1D709ﬁts/u1D438+
/u1D709as positive examples. From this it follows that every normal f orm ﬁts its set
of positive examples by the properties of union and disjunction. By corollary 4.26, it suﬃces to
considerthecases(i)-(iv).Startingwith(i) /u1D709=/u1D45D1∧...∧/u1D45D/u1D45B,clearly/triangledownsld{/u1D45D1,...,/u1D45D/u1D45B}(/clockwise∅) |=/u1D45D1∧...∧/u1D45D/u1D45B.
For case (ii) /u1D709=/u1D70B∧/Diamond/u1D7111∧...∧/Diamond/u1D711/u1D45A, let/u1D4381,.../u1D438/u1D45Apositive examples for /u1D7111,...,/u1D711/u1D45Arespectively.
Then/triangledownsld/u1D70B(/u1D4381,...,/u1D438/u1D45A,/clockwise∅) |=/u1D709because/u1D70Bissatisﬁed attherootandeachconjunctoftheform /Diamond/u1D711/u1D456
is witnessed by some successor whose generated model is precis ely some example in /u1D438+
/u1D711/u1D456, which
are allmodelsof /u1D711/u1D456by inductive hypothesis.
Forcase(iii) /u1D709=/u1D70B∧/square(/u1D7130∨...∨/u1D713/u1D45A),letE⊆/uniontext.1
/u1D456≤/u1D45A/u1D438+
/u1D713/u1D456=/u1D438+
/u1D7130∨...∨/u1D713/u1D45A.Thusbyinductivehypothesis
allexamplesinEsatisfy/u1D7130∨...∨/u1D713/u1D45A(note thatEmaybe empty).Butthen clearly /triangledownsld/u1D70B(E) |=/u1D709as
the generated model of every successor of the root of this mode l is inE⊆/u1D438+
/u1D7130∨...∨/u1D713/u1D45A. Lastly, for
case(iv)/u1D709=/u1D70B∧/square(/u1D7130∨...∨/u1D713/u1D45A)∧/Diamond/u1D7110∧...∧/Diamond/u1D711/u1D45B,let/u1D4381,.../u1D438/u1D45Abepositiveexamplesfor /u1D7111∧(/u1D7130∨
...∨/u1D713/u1D45A), ..., /u1D711 /u1D45A∧(/u1D7130∨...∨/u1D713/u1D45A)respectivelyandE⊆/u1D438+
/u1D7130∨...∨/u1D713/u1D45A.Then/triangledownsldˆ/u1D70B({/u1D4381,...,/u1D438/u1D45B}∪E) |=/u1D709
because/u1D70Bis satisﬁed at the root, each conjunct /Diamond/u1D711/u1D456is witnessed by some /u1D438/u1D456∈ {/u1D4381,...,/u1D438/u1D45B}and
eachsuccessoroftherootisin {/u1D4381,...,/u1D438/u1D45B}∪E⊆mod(/u1D7130∨...∨/u1D713/u1D45A)byinductivehypothesis. /square
P/r.sc/o.sc/p.sc/o.sc/s.sc/i.sc/t.sc/i.sc/o.sc/n.sc 4.30. For every/u1D711∈ L/square,/Diamond,∧,∨, every positive example for /u1D711weakly simulates some
example from /u1D438+
/u1D711.
P/r.sc/o.sc/o.sc/f.sc.By induction on formula complexity. Consider /u1D711∈ L/square,/Diamond,∧,∨in normal form, i.e. /u1D711is a
disjunctionofbasicnormalformsoflevel /u1D451(/u1D711).Itsuﬃcestoshowthattheclaimholdsforallbasic
normal form disjuncts of /u1D711, for if/u1D440,/u1D460|=/u1D711then(/u1D440,/u1D460)satisﬁes some disjunct, and the positive
examplesfor /u1D711are the union ofall the positive examplesforits disjuncts.
(i) Let/u1D711=/u1D70Bbeaconjunctionofpositiveatomsandobservethat /u1D438+
ˆ/u1D70B={/triangledownsldˆ/u1D70B(/clockwise∅)}.Welookat2
cases:(a)/u1D445/u1D440[/u1D460]=∅or(b)/u1D445/u1D440[/u1D460]≠∅.(a)Weclaimthattherelationwithasinglepair {(/u1D45F,/u1D460)},
where/u1D45Fistherootof/triangledownsldˆ/u1D70B(/clockwise∅),isaweaksimulation /triangledownsldˆ/u1D70B(/clockwise∅) →/u1D440,/u1D460.[atom]/u1D463(/u1D45F)=ˆ/u1D70Bandas
/u1D440,/u1D460|=/u1D70Bclearly/u1D463(/u1D45F) ⊆/u1D463(/u1D460).[forth’]trivialsincewecanusetheescapeclause.[back’] trivial
since/u1D445/u1D440[/u1D460]=∅.(b)Nowweclaimthat /u1D44D:={(/u1D45F,/u1D460)}∪({/u1D45F′}×/u1D451/u1D45C/u1D45A(/u1D440))isaweaksimulation,
where/u1D45F′is the root of/clockwise∅. It follows straight from the deﬁnition of weak simulation th at
eachpairoftheform (/u1D45F′,/u1D461)satisﬁes alltheclauses.Henceitsuﬃcestoshowthatallclau ses
holdoftheroot-pair (/u1D45F,/u1D460) ∈/u1D44D.[atom]/u1D463(/u1D45F)=ˆ/u1D70Bandas/u1D440,/u1D460|=/u1D70Bclearly/u1D463(/u1D45F) ⊆/u1D463(/u1D460).[forth’]
5Notethat /u1D711/u1D456∧/u1D713/u1D457isnotnecessarilyinFinenormalform,butmayberewrittentoonewithout increasingitsmodaldepth.
,Vol. 1,No. 1,Article. Publication date: February 2022.22 BaldertenCateand RaoulKoudijs
the only successor of /u1D45Fis/clockwise∅so we can just use the escape clause. [back’] If /u1D445/u1D440/u1D460/u1D461then we
clearlyhave the emptyloopstate successor of /u1D45Fwith is/u1D44D-relatedto/u1D461∈/u1D451/u1D45C/u1D45A(/u1D440).
(ii) Let/u1D440,/u1D460|=/u1D70B∧/Diamond/u1D7110∧...∧/Diamond/u1D711/u1D45B.Thismeansthatforeach /u1D456≤/u1D45Bthereisasuccessor /u1D461/u1D456∈/u1D445/u1D440[/u1D460]
such that/u1D440,/u1D461/u1D456|=/u1D711/u1D456. Therefore, by the inductive hypothesis, for each /u1D456≤/u1D45Bthere is an
example (/u1D438/u1D456,/u1D452/u1D456) ∈/u1D438+
/u1D711/u1D456and a weak simulation /u1D44D/u1D456:/u1D438/u1D456,/u1D452/u1D456→/u1D440,/u1D461/u1D456, as well as a simulation
/u1D44D/u1D70B:/triangledownsldˆ/u1D70B(/clockwise∅) →/u1D440,/u1D460.Itfollowsthat/triangledownsldˆ/u1D70B({(/u1D4380,/u1D4520),...,(/u1D438/u1D45B,/u1D452/u1D45B)}) ∈/u1D438+
/u1D70B∧/Diamond/u1D7110∧...∧/Diamond/u1D711/u1D45B.Theclaim
is that
/u1D44D:=/uniondisplay.1
1≤/u1D456≤/u1D45B/u1D44D/u1D456∪ ({/clockwise∅} ×/u1D451/u1D45C/u1D45A(/u1D440)) ∪{(/u1D45F,/u1D460)}
isaweaksimulation /triangledownsldˆ/u1D70B({(/u1D4381,/u1D4521),...,(/u1D438/u1D45B,/u1D452/u1D45B)}) →/u1D440,/u1D460.Wealreadyknowthatallthe /u1D44D/u1D456are
weak simulations. Moreover, every pair of the form (/u1D45F′,/u1D461)where/u1D451/u1D45C/u1D45A(/clockwise∅)={/u1D45F′}satisﬁes
alltheclauses(cf.Lemma 4.5).Henceweonlyhavetoshowthattheroot-pair (/u1D45F,/u1D460)satisﬁes
alltheclauses.[atom]Followsfromthe[atom]clauseof /u1D44D/u1D70B(notethat ˆ/u1D70Bmaybeemptyhere).
[forth’]For the empty loopstate successor /u1D45F′we can use the escape clause, and every other
successor of /u1D45Fisofthe form /u1D452/u1D456forsome/u1D456≤/u1D45B.But thenthere isa matchingsuccessor /u1D461/u1D456of/u1D460
with(/u1D452/u1D456,/u1D462/u1D456) ∈/u1D44D/u1D456⊆/u1D44D.[back’]We can matchevery successor /u1D462of/u1D461with/u1D45F′since(/u1D45F′,/u1D462) ∈/u1D44D
for all/u1D462∈/u1D451/u1D45C/u1D45A(/u1D440).
(iii) Let/u1D440,/u1D460|=/u1D70B∧/square(/u1D7130∨...∨/u1D713/u1D45A).Byinductivehypothesis,thismeansthatforeach /u1D461∈/u1D445/u1D440[/u1D460]
there is some example (/u1D438/u1D461,/u1D452/u1D461) ∈/uniontext.1
/u1D457≤/u1D45A/u1D438+
/u1D713/u1D457with a weak simulation /u1D44D/u1D461:/u1D438/u1D461,/u1D452/u1D461→/u1D440,/u1D461, as
well as simulation /u1D44D/u1D70B:/triangledownsldˆ/u1D70B(/clockwise∅) →/u1D440,/u1D460. LetE:={(/u1D438/u1D461,/u1D452/u1D461) |/u1D461∈/u1D445/u1D440[/u1D460]}, then/triangledownsldˆ/u1D70B(E) ∈
/u1D438+
/u1D70B∧/square(/u1D7130∨...∨/u1D713/u1D45A).Theclaimis that
/u1D44D:=/uniondisplay.1
/u1D461∈/u1D445/u1D440[/u1D460]/u1D44D/u1D461∪{(/u1D45F,/u1D460)}
is a weak simulation /u1D44D:/triangledownsldˆ/u1D70B(E) →/u1D440,/u1D460. We already know each /u1D44D/u1D461is a weak simulation, so
itsuﬃcestoshowthat (/u1D45F,/u1D460)satisﬁesalltheclauses.[atom]Bythe[atom]clauseof /u1D44D/u1D70B(note
that ˆ/u1D70Bmay be empty here). [forth’] Every successor of /u1D45Fis of the form /u1D452/u1D461and hence there
is some successor /u1D461of/u1D460with(/u1D452/u1D461,/u1D461) ∈/u1D44D/u1D461⊆/u1D44D.[back’]For every successor /u1D461of/u1D460we have by
construction a successor /u1D452/u1D461of/u1D45Fwith(/u1D452/u1D461,/u1D461) ∈/u1D44D/u1D461⊆/u1D44D.
(iv) Let/u1D440,/u1D460|=/u1D70B∧/Diamond/u1D7110∧...∧/Diamond/u1D711/u1D45B∧/square(/u1D7130∨...∨/u1D713/u1D45A). By inductive hypothesis, this means
that for each /u1D461∈/u1D445/u1D440[/u1D460]there is some example (/u1D438/u1D461,/u1D452/u1D461) ∈/uniontext.1
/u1D457≤/u1D45A/u1D438+
/u1D713/u1D457with a weak simulation
/u1D44D/u1D461:/u1D438/u1D461,/u1D452/u1D461→/u1D440,/u1D461. Moreover, /u1D445/u1D440[/u1D460]≠∅as e.g./u1D440,/u1D460|=/Diamond/u1D7110and/u1D7110/nequivalence⊥. SetE:={(/u1D438/u1D461,/u1D452/u1D461) |
/u1D461∈/u1D445/u1D440[/u1D460]}and note thatE≠∅as/u1D445/u1D440[/u1D460]≠∅. Moreover, by inductive hypothesis there is
alsoaweaksimulation /u1D44D/u1D70B:/triangledownsldˆ/u1D70B(/clockwise∅) →/u1D440,/u1D460andforeach /u1D456≤/u1D45Bthereareexamples (/u1D438/u1D456,/u1D452/u1D456) ∈/uniontext.1
/u1D457≤/u1D45A/u1D438+
/u1D711/u1D456∧/u1D713/u1D457such that there is a simulation /u1D44D/u1D456:/u1D438/u1D456,/u1D452/u1D456→/u1D440,/u1D461/u1D456where/u1D461/u1D456is some successor of
/u1D460. SetE′:={(/u1D438/u1D456,/u1D452/u1D456) |0</u1D456≤/u1D45B}. It follows that/triangledownsldˆ/u1D70B(E∪E′) ∈/u1D438+
/u1D70B∧/Diamond/u1D7110∧...∧/Diamond/u1D711/u1D45B∧/square(/u1D7130∨...∨/u1D713/u1D45A).
We claim that therelation
/u1D44D:=/uniondisplay.1
/u1D456≤/u1D45B/u1D44D/u1D456∪/uniondisplay.1
/u1D461∈/u1D445/u1D440[/u1D460]/u1D44D/u1D461∪{(/u1D45F,/u1D460)}
is a weak simulation /u1D44D:/triangledownsldˆ/u1D70B(E∪E′) →/u1D440,/u1D460. Again, since we already know each /u1D44D/u1D456and/u1D44D/u1D461
to be weak simulations, it suﬃces to show that the root-pair (/u1D45F,/u1D460)satisﬁes all the clauses.
[atom]Bythe[atom]clauseof /u1D44D/u1D70B(notethat ˆ/u1D70Bmaybeemptyhere).[forth’]Everysuccessor
oftherootiseitheroftheform /u1D452/u1D461or(ii)oftheform /u1D452/u1D456.Intheformercasewegetamatching
successor/u1D461of/u1D460with(/u1D452/u1D461,/u1D461) ∈/u1D44D/u1D461⊆/u1D44D,andinthelattercasewegetamatchingsuccessor /u1D461/u1D456of
/u1D460with(/u1D452/u1D456,/u1D461/u1D456) ∈/u1D44D/u1D456⊆/u1D44D.[back’]every successor /u1D461of/u1D460hasa matchingsuccessor /u1D452/u1D461of/u1D45Fwith
(/u1D452/u1D461,/u1D461) ∈/u1D44D/u1D461⊆/u1D44Dby construction.
,Vol. 1,No. 1, Article. Publication date: February2022.Characterising Modal FormulaswithExamples 23
/square
Asitturnsout,wecandeﬁnethenegativeexamplesforformulasi nL/square,/Diamond,∧,∨intermsofthepos-
itiveonesviathesubstitution operator (·)¬wesawinSections 4.2andSection 3.2whendualizing
the positive result for L/Diamond,∧,∨,⊤,⊥from [18] toL/square,∧,∨,⊤,⊥. We will do this in terms of the syntactic
operator⊳deﬁned below.Intuitively, ⊳(/u1D711)istheformula /u1D711with alllogicalsymbolsinit ’dualized’
while it doesnothingon propositional variables. Thatis;
⊳(/square/u1D711)=/Diamond⊳(/u1D711)
⊳(/Diamond/u1D711)=/square⊳(/u1D711)
⊳(/u1D711∧/u1D713)=⊳(/u1D711) ∨⊳(/u1D713)
⊳(/u1D711∨/u1D713)=⊳(/u1D711) ∧⊳(/u1D713)
⊳(/u1D45D)=/u1D45D
First of all, note that /u1D711∈ L/square,/Diamond,∧,∨implies that ⊳(/u1D711) ∈ L/square,/Diamond,∧,∨because⊳(/u1D45D)=/u1D45D. Moreover,
observethat ¬/u1D711≡⊳(/u1D711)¬.Toseethis,notethatrewriting ¬/u1D711intonegationnormalformisprecisely
the same procedure asﬁrst dualizing all operatorswith ⊳and then substituting [¬/u1D45D//u1D45D]wherever
possible with (·)¬,moduloelimination of doublenegations in front ofatoms.
Deﬁnition 4.31. For each/u1D711∈ L/square,/Diamond,∧,∨setE/u1D711=(/u1D438+
/u1D711,/u1D438−
/u1D711)where
/u1D438+
/u1D711:=/u1D438+
/u1D45B/u1D453(/u1D711)/u1D438−
/u1D711:={(/u1D438¬,/u1D452) | (/u1D438,/u1D452) ∈/u1D438+
/u1D45B/u1D453(⊳(/u1D711))}
P/r.sc/o.sc/p.sc/o.sc/s.sc/i.sc/t.sc/i.sc/o.sc/n.sc4.32. For each/u1D711∈ L/square,/Diamond,∧,∨,(/u1D438+
/u1D711,/u1D438−
/u1D711)isa weak simulation duality that /u1D711ﬁts.
P/r.sc/o.sc/o.sc/f.sc.It remains to show that /u1D711ﬁts/u1D438−
/u1D711as negative examples and that every negative exam-
ple for/u1D711is weakly simulated by some negative example for /u1D711in/u1D438−
/u1D711. Let(/u1D438′,/u1D452′) ∈/u1D438−
/u1D711. Then
(/u1D438′,/u1D452′)=(/u1D438,/u1D452)¬=(/u1D438¬,/u1D452)for some (/u1D438¬,/u1D452) ∈/u1D438+
/u1D45B/u1D453(⊳(/u1D711)). So by Proposition 4.29/u1D438¬,/u1D452|=⊳(/u1D711)
and by Proposition 4.21/u1D438,/u1D452|=⊳(/u1D711)¬. But we have seen that that just means that /u1D438,/u1D452/\e}a⊔io\slash|=/u1D711since
¬/u1D711≡⊳(/u1D711)¬.Itfollowsthat /u1D711ﬁts/u1D438−
/u1D711asnegative examples.
Finally, let/u1D438,/u1D452/\e}a⊔io\slash|=/u1D711be any negative example for /u1D711. Since¬/u1D711≡⊳(/u1D711)¬, it follows that /u1D438,/u1D452|=
⊳(/u1D711)¬. By Proposition 4.21we have/u1D438¬,/u1D452|=⊳(/u1D711), and then by Proposition 4.30there is some
(/u1D438′,/u1D452′) ∈/u1D438+
⊳(/u1D711)such that/u1D438′,/u1D452′→/u1D438¬,/u1D452, whence by Proposition 4.17and idempotence of (·)¬
also/u1D438,/u1D452→(/u1D438′)¬,/u1D452′. But if(/u1D438′,/u1D452′) ∈/u1D438+
⊳(/u1D711)then(/u1D438′,/u1D452′)¬=((/u1D438′)¬,/u1D452)is in/u1D438−
/u1D711. It follows that
(/u1D438,/u1D452) ∈ ↓/u1D438−
/u1D711, so we have shown that ↓/u1D438−
/u1D711=ﬁnmod(¬/u1D711). Together with Proposition 4.30, which
showsthat ↑/u1D438+
/u1D711=ﬁnmod(/u1D711), we concludethat (/u1D438+
/u1D711,/u1D438−
/u1D711)isa weak simulation duality. /square
We are now ready to prove Theorem 3.10,restated here forconvenience:
T/h.sc/e.sc/o.sc/r.sc/e.sc/m.sc3.10. Forevery ﬁnite set Prop, C(L/square,/Diamond,∧,∨[Prop])admitsﬁnite characterisations. More-
over, these characterisations areeﬀectively computable.
P/r.sc/o.sc/o.sc/f.sc.ImmediatefromProposition 4.32andTheorem 4.23.Theprocedurecomputesﬁrst /u1D45B/u1D453(/u1D711),
/u1D45B/u1D453(⊳(/u1D711))anduses Deﬁnition 4.28and the ﬂipping operation (·)¬to generate /u1D438+
/u1D711and/u1D438−
/u1D711./square
R/e.sc/m.sc/a.sc/r.sc/k.sc4.3. Theorem4.10showedthattheweak-simulation-preservedfragmentofﬁrs t-orderlogic
isthefragment L/square,/Diamond,∧,∨extendedwith ⊤and⊥.ThisraisesthequestionwhetherTheorem 3.10holds
also forL/square,/Diamond,∧,∨extended with ⊤and⊥. This is indeed the case: it follows from Lemma 4.6that a
singlepointedmodelsuﬃcestocharacterise ⊤and⊥asindividualformulas.Wecanusethefactthat
⊤doesnothavenegativeexamplesand ⊥doesnothavepositiveexamples,andwecanset /u1D438+
⊤:={/clockwise∅}
and/u1D438−
⊥:={/clockwiseProp}.
,Vol. 1,No. 1,Article. Publication date: February 2022.24 BaldertenCateand RaoulKoudijs
5 FURTHER RESULTS
In this section, we discuss complexity issues and additional ex tensions of the modal languages
considered that admit ﬁnite characterisations. We will begin w ith discussing the complexity of
computingﬁnite characterisations.
5.1 Size boundsandcomputational complexity ofcomputingfi nite characterizations
Recall Theorem 3.8, which states that C(L/Diamond,∧,∨,⊤,⊥[Prop])admits ﬁnite characterizations, and
whose proof relies on results from [ 1,18] concerningﬁnite characterizationsfor c-acyclicunions
of conjunctive queries. In fact, the latter results imply that C(L/Diamond,∧,⊤[Prop])admits polynomial-
timecomputableﬁnitecharacterisationsandthat C(L/Diamond,∧,∨,⊤[Prop])admitsexponential-timecom-
putableﬁnitecharacterisations.InspectingourproofofTheor em3.8,weseethatthisextendsalso
to the correspondingfragmentsthat include ⊥.Therefore,C(L/Diamond,∧,⊤,⊥[Prop])admitspolynomial-
time computable ﬁnite characterisations and that C(L/Diamond,∧,∨,⊤,⊥[Prop])admits exponential-time
computablecharacterisations.
Our construction of ﬁnite characterizations for L/square,/Diamond,∧,∨-formulas, on the other hand, is non-
elementary. Indeed, we will now give a non-elementary lower bound on the size of characterisa-
tionsw.r.t. L/square,/Diamond,∧,∨,byshowingthatanycharacterisationof /square/u1D45B/u1D45Dw.r.t.L/square,/Diamond,∧,∨[{/u1D45D}]mustcontain
at least non-elementarily many positive examples. We will use th e following notation for non-
elementary functions:
tower(1,/u1D45A):=/u1D45A
tower(/u1D45B+1,/u1D45A):=2tower(/u1D45B,/u1D45A)
Thus,anon-elementaryfunction /u1D453(/u1D45B)isonethatcannotbeboundedbyanytower (/u1D458,poly(/u1D45B))for
anyﬁxed/u1D458and polynomialfunction poly (/u1D45B).
We will use thefollowinggeneralstrategyforproving thelower bound.Namely,we show that
our characterisations are ‘minimal’ in the sense that no proper s ubset forms a characterisation.
Using the fact that our characterisations actually form weak s imulation dualities in wSim[{/u1D45D}],
it then follows that the size of the characterisations for indi vidual formulas are actually lower
boundsonthe size on anysuch characterisation.
L/e.sc/m.sc/m.sc/a.sc 5.1. For each/u1D45B,/u1D438+
/square/u1D45B/u1D45Dis ‘minimal’ in the sense that for all proper subsets /u1D438′⊂/u1D438+
/square/u1D45B/u1D45Dwe
have↑/u1D438′≠ﬁnmod(/square/u1D45B/u1D45D).
P/r.sc/o.sc/o.sc/f.sc.Weshowthisbyinductionon /u1D45B.Thebasecase /u1D45B=0istrivialsince/square/u1D45C/u1D45D=/u1D45Dand|/u1D438+
/u1D45D|=1
has only a single example and clearly ↑∅is empty so is not exactly ﬁnmod (/square/u1D45B/u1D45D). Now suppose
the claim holdsfor /u1D438+
/square/u1D45B/u1D45Dand consider any/triangledownsld∅(E) ∈/u1D438+
/square/u1D45B+1/u1D45DwhereE⊆/u1D438+
/square/u1D45B/u1D45D.We want to construct
a formula in L/square,/Diamond,∧,∨which is only refuted on this particular positive example in /u1D438+
/square/u1D45B+1/u1D45D, but not
on other examples in /u1D438+
/square/u1D45B+1/u1D45D. It follows from the fact that /u1D438+
/square/u1D45B/u1D45Dis minimal that for every positive
example(/u1D438,/u1D452) ∈E⊆/u1D438+
/square/u1D45B/u1D45Dthere is some formula /u1D713(/u1D438,/u1D452)∈ L/square,/Diamond,∧,∨such that/u1D713(/u1D438,/u1D452)is only refuted
on(/u1D438,/u1D452), but true onall otherexamplesin /u1D438+
/square/u1D45B/u1D45D.Deﬁne:6
/u1D713/triangledownsld∅(E):=(/logicalordisplay.1
(/u1D438,/u1D452)∈E/square/u1D713(/u1D438,/u1D452)) ∨/Diamond(/logicalanddisplay.1
(/u1D438,/u1D452)∈E/u1D713(/u1D438,/u1D452))
We claim that/triangledownsld∅(E)is the only example from /u1D438+
/square/u1D45B+1/u1D45Dthat refutes /u1D713/triangledownsld∅(E). For take any other
∇∅(E′) ∈/u1D438+
/square/u1D45B+1/u1D45DwithE≠E′. Then either (a)E/notsubseteql E′or (b)E′/notsubseteql E. If (a) then there is some
(/u1D438,/u1D452) ∈Esuchthat (/u1D438,/u1D452)∉E′.Butthenbytheinductivehypothesisthereissome /u1D713(/u1D438,/u1D452)∈ L/square,/Diamond,∧,∨
6Interestingly,this isprecisely thedual ofthemodal nablaoperato r (a.k.a. the‘cover modality’) ∇[9,14].
,Vol. 1,No. 1, Article. Publication date: February2022.Characterising Modal FormulaswithExamples 25
that is refuted at (/u1D438,/u1D452)but satisﬁed at all other examples in /u1D438+
/square/u1D45B/u1D45D, including all examples in E′. It
follows that ∇∅(E′) |=/square/u1D713(/u1D438,/u1D452), which is a disjunct of /u1D713/triangledownsld∅(E). Moreover, if (b) then there is some
(/u1D438′,/u1D452′) ∈E′such that (/u1D438′,/u1D452′)∉E. By the inductive hypothesis, for each (/u1D438,/u1D452) ∈Ethere is a for-
mula/u1D713(/u1D438,/u1D452)∈ L/square,/Diamond,∧,∨that is only refuted on (/u1D438,/u1D452)but not on other examples in /u1D438+
/square/u1D45B/u1D45D. It follows
that/u1D438′,/u1D452′|=/logicalandtext.1
(/u1D438,/u1D452)∈E/u1D713(/u1D438,/u1D452)and so since (/u1D438′,/u1D452′) ∈E′we get∇∅(E′) |=/Diamond(/logicalandtext.1
(/u1D438,/u1D452)∈E/u1D713(/u1D438,/u1D452)), which
is adisjunct of /u1D713/triangledownsld∅(E). /square
T/h.sc/e.sc/o.sc/r.sc/e.sc/m.sc5.2. Everyﬁnitecharacterisation of /square/u1D45B/u1D45Dw.r.t.C(L/square,/Diamond,∧,∨[{/u1D45D}])hasatleasttower (/u1D45B,2)
many positive examples. Dually, every ﬁnite characterisat ion of/Diamond/u1D45B/u1D45Dw.r.t.C(L/square,/Diamond,∧,∨[{/u1D45D}])has at
least tower (/u1D45B,2)many negative examples.
P/r.sc/o.sc/o.sc/f.sc.Suppose for contradiction that E=(/u1D438+,/u1D438−)is a characterisation of /square/u1D45B/u1D45Dw.r.t.L/square,/Diamond,∧,∨
with/u1D45A=|/u1D438+|<|/u1D438+
/square/u1D45B/u1D45D|=tower(/u1D45B,2)and let us we write /u1D438+={(/u1D4381,/u1D4521),...,(/u1D438/u1D45A,/u1D452/u1D45A)}. We
haveshownthatE/square/u1D45B/u1D45Dcharacterises/square/u1D45B/u1D45Dw.r.t.L/square,/Diamond,∧,∨andismoreoveraweaksimulationduality.
Hence, it follows that for each (/u1D438/u1D456,/u1D452/u1D456) ∈/u1D438+with 1≤/u1D456≤/u1D45Athere is some (/u1D438′
/u1D456,/u1D452′
/u1D456) ∈/u1D438+
/square/u1D45B/u1D45Dsuch
that(/u1D438′
/u1D456,/u1D452′
/u1D456) →(/u1D438/u1D456,/u1D452/u1D456). But as/u1D45A<tower(/u1D45B,2)=|/u1D438+
/square/u1D45B/u1D45D|, there is some propersubsetE⊂/u1D438+
/square/u1D45B/u1D45D
of size/u1D45A, i.e.E={(/u1D438′
1,/u1D452′
1),...,(/u1D438′
/u1D45A,/u1D452′
/u1D45A)}) such that/u1D438+⊆ ↑E. But by Lemma 5.1we know that
E/square/u1D45B/u1D45Dis minimal so for any (/u1D438,/u1D452) ∈/u1D438+
/square/u1D45B/u1D45D−E(which is non-empty by assumption), there must
be some/u1D713(/u1D438,/u1D452)such that/u1D438,/u1D452/\e}a⊔io\slash|=/u1D713(/u1D438,/u1D452)but all other examples in /u1D438+
/square/u1D45B/u1D45Dsatisfy/u1D713(/u1D438,/u1D452). In particular,
each example inEsatisﬁes/u1D713(/u1D438,/u1D452)and hence by preservation each example in /u1D438+does as well as
/u1D438+⊆ ↑E.Butthen/square/u1D45B/u1D45D∧/u1D713(/u1D438,/u1D452)ﬁtsEyet/square/u1D45B/u1D45D/nequivalence/square/u1D45B/u1D45D∧/u1D713(/u1D438,/u1D452)aswitnessed by /u1D438,/u1D452|=/square/u1D45B/u1D45D∧¬/u1D713(/u1D438,/u1D452),
contradictingour assumption that Echaracterises/square/u1D45B/u1D45Dw.r.t.L/square,/Diamond,∧,∨. /square
5.2 UniformFormulas
InSection 3.2,weshowedthatC(L/square,/Diamond,∧,⊥[Prop])andC(L/square,/Diamond,∨,⊤[Prop])donotadmitﬁnitechar-
acterisations, even forProp =∅.Speciﬁcally, ⊥isnot ﬁnitely characterisable in the formerand ⊤
isnot ﬁnitely characterisablein the latter.It followsthat C(L/square,/Diamond,∧,¬at[Prop]),fornonemptyProp,
does not admit ﬁnite characterisations either, because ⊥is deﬁnable as /u1D45D∧ ¬at/u1D45D, and likewise
forthedualclassC(L/square,/Diamond,∨,¬at[Prop]).Inotherwords,ourpositive result for C(L/square,/Diamond,∧,∨)crucially
relies onthe absence ofnegation.
We will now show that our positive result for C(L/square,/Diamond,∧,∨[Prop])extends to a larger class of
uniformL/Diamond,/square,∧,∨,¬at-formulas,whichallowatomicnegationonlyina veryrestrict ed way.For any
/u1D443,/u1D444disjoint ﬁnite sets of propositional variables, and a modal frag mentL/u1D446, letL/u1D446[/u1D443;/u1D444]denote
the set of L-formulas that only use unnegated occurrences of variables /u1D45D∈/u1D443and only negated
occurrences ¬/u1D44E/u1D461/u1D45Eforvariables /u1D45E∈/u1D444.
We will show that C(L/square,/Diamond,∧,∨,¬at[/u1D443;/u1D444])admits ﬁnite characterisations, through a suitable re-
duction toC(L/square,/Diamond,∧,∨[Prop])The idea is that we can treat negated variables from /u1D444as if they
were positive . For each/u1D45E∈/u1D444we create fresh variable /u1D45E¬that stands for the negation ¬/u1D45Eof/u1D45E. Let
/u1D444¬:={/u1D45E¬|/u1D45E∈/u1D444}.
Deﬁnition5.3. Givenapointedmodel (/u1D440,/u1D460),let(/u1D440,/u1D460)¬/u1D444:=(/u1D440¬,/u1D460)where/u1D440¬/u1D444:=(/u1D451/u1D45C/u1D45A(/u1D440),/u1D445,/u1D463¬/u1D444)
isobtainedfrom /u1D440bydeﬁning/u1D463¬/u1D444:/u1D451/u1D45C/u1D45A(/u1D440) → P(/u1D443∪/u1D444¬)as/u1D463¬/u1D444(/u1D461):=/u1D463(/u1D461)∪{/u1D45E¬|/u1D45E∈/u1D444and/u1D45E∉
/u1D463(/u1D461)}forall/u1D461∈/u1D451/u1D45C/u1D45A(/u1D440).Next, given a modalformula /u1D711∈ Lfull[/u1D443;/u1D444]where/u1D444={/u1D45E1,...,/u1D45E/u1D45B}, let
/u1D711¬/u1D444:=/u1D711[/u1D45E¬
1/¬/u1D45E1]...[/u1D45E¬
/u1D45B/¬/u1D45E/u1D45B]
Note that if /u1D711∈ Lfull[/u1D443;/u1D444]then/u1D711¬/u1D444∈ Lfull[/u1D443∪/u1D444¬].
L/e.sc/m.sc/m.sc/a.sc 5.4. For all modalformulas /u1D711,/u1D713∈ Lfull[/u1D443;/u1D444]and pointedmodels (/u1D440,/u1D460);
/u1D440,/u1D460|=/u1D711iﬀ/u1D440¬/u1D444,/u1D460|=/u1D711¬/u1D444and/u1D711≡/u1D713iﬀ/u1D711¬/u1D444≡/u1D713¬/u1D444
,Vol. 1,No. 1,Article. Publication date: February 2022.26 BaldertenCateand RaoulKoudijs
P/r.sc/o.sc/o.sc/f.sc.Only the atomic case diﬀers from Proposition 4.21and for any state /u1D460and/u1D45E∈/u1D444we
have/u1D460|=¬at/u1D45Eiﬀ/u1D45E∉/u1D463(/u1D460)iﬀ/u1D45E¬∈/u1D463¬/u1D444(/u1D460)iﬀ/u1D460|=/u1D45E¬. Next, observe that /u1D711≡/u1D713iﬀ/u1D711↔/u1D713is valid.
Furthermore, /u1D711↔/u1D713isvalidiﬀ (/u1D711↔/u1D713)¬/u1D444=/u1D711¬/u1D444↔/u1D713¬/u1D444isvalidbecausevalidityisclosedunder
uniformsubstitution [ 3],whichof courseholdsiﬀ /u1D711¬/u1D444≡/u1D713¬/u1D444. /square
T/h.sc/e.sc/o.sc/r.sc/e.sc/m.sc5.5. Foralldisjointﬁnitesets /u1D443,/u1D444⊆Prop,theconceptclass C(L/square,/Diamond,∧,∨,¬at[/u1D443;/u1D444])admits
ﬁnitecharacterisations.
P/r.sc/o.sc/o.sc/f.sc.Takeany/u1D711∈ L/square,/Diamond,∧,∨,¬at[/u1D443;/u1D444]andconsider /u1D711¬/u1D444∈ L/square,/Diamond,∧,∨[/u1D443∪/u1D444¬].ByTheorem 3.10,
/u1D711¬/u1D444hasa ﬁnite characterisation (/u1D438+,/u1D438−)with respect to L/square,/Diamond,∧,∨[/u1D443∪/u1D444¬].Deﬁne
/u1D438+
/u1D711:={(/u1D438,/u1D452)¬/u1D444| (/u1D438,/u1D452) ∈/u1D438+
/u1D711¬/u1D444}/u1D438−
/u1D711:={(/u1D438,/u1D452)¬/u1D444| (/u1D438,/u1D452) ∈/u1D438−
/u1D711¬/u1D444}
and consider any /u1D713∈ L/square,/Diamond,∧,∨[/u1D443;/u1D444]that ﬁts(/u1D438+
/u1D711,/u1D438−
/u1D711). By Theorem 5.4it follows that /u1D713¬/u1D444ﬁts
(/u1D438+
/u1D711¬/u1D444,/u1D438−
/u1D711¬/u1D444)and hence/u1D711¬/u1D444≡/u1D713¬/u1D444by the fact that this is a characterisation of /u1D711¬/u1D444. But then by
lemma5.4we get that /u1D711≡/u1D713. /square
5.3 Poly-modalformulas
So far we have only looked at modal languages with a single modali ty/Diamondor with both the/Diamond
modalityanditsdual /square,andthecorrespondingKripkemodelswithonly oneaccessibility relation.
However, our results generalise straightforwardly to their respective poly-modalgeneralisations.
This is relevant from the point of view of potential applications in description logic. Our proofs
extend “pointwise” to the poly-modal setting. In particular, o ne obtains generalised versions of
Fine normalform,wherebasic normalformsare ofthe form
/u1D70B∧/logicalanddisplay.1
/u1D456/square/u1D456/u1D711/u1D456∧/Diamond/u1D456/u1D711/u1D456,0∧...∧/Diamond/u1D711/u1D456,/u1D45B/u1D456
Further,thedeﬁnition ofweaksimulationsandourcategory-th eoreticanalysisof wSim[Prop]ex-
tend straightforwardly to the poly-modalsetting. The releva nt construction of positive examples
for poly-modalformulas in basic normal form proceeds by recu rsively computing the characteri-
sations for individual component basic normal forms with one modal ity and merging their roots.
Again,negative examplescan beobtained fromthe positive onesv ia the endo-functor (·)¬.
6 CONCLUSION
In this paper, we investigated under what conditions modal formu las admit ﬁnite characterisa-
tions. First, we focused on the full modal language and showed th at even over restricted classes
offramesit doesnotadmitﬁnite characterisations,except int rivial cases.Thismotivated ourfur-
ther investigation into modal fragments, where we ﬁxed the fram e class parameter to the class
of all (ﬁnite) frames, but we restrict the set of connectives. He re, we obtain a number of positive
and negative results. In particular, in section 4we proved our main result that L/square,/Diamond,∧,∨admits
ﬁnite characterisations. Finally, in section 5we proved tight non-elementary bounds on the size
ofcharacterisationsfor L/square,/Diamond,∧,∨,andextendedourmainresulttoclassesofuniformformulasand
indicated how poly-modalgeneralisations couldbeobtained.
In future work, we would like to close the question on whether C(L/square,/Diamond,∧,⊤)andC(L/Diamond,∧,∨,¬at)
admit ﬁnite characterisations. Furthermore, we conjecture th atC(L/square,/Diamond,∧)and evenC(L/square,/Diamond,∧,⊤)
admitspolynomial-sizedcharacterisations,andmightevensu pportapolynomial-timeexactlearn-
ing algorithmwith membershipqueries.
Finally,weleavethequestionoftheexistenceofcharacteris ationsforfragmentsw.r.t.restricted
frameclasseswide open.Recentresults in [ 19]mayprovide an initial starting point here.
,Vol. 1,No. 1, Article. Publication date: February2022.Characterising Modal FormulaswithExamples 27
ACKNOWLEDGMENTS
Koudijs is supported by the NFR project “Learning Description Logic Ontologies”, grant number
316022. Ten Cate is supported by the European Union’s Horizon 2 020 research and innovation
programmeundergrantMSCA-101031081.WearegratefultoNick Bezhanishvili,MalvinGattinger
andFrankWolterforcommentsonearlierversionsofthismateria l.Wealsothanktheanonymous
reviewers for their detailed and helpfulfeedback.
REFERENCES
[1] Bogdan Alexe, Balder ten Cate, Phokion G. Kolaitis, and Wang-C hiew Tan. 2011. Characterizing Schema
Mappings via Data Examples. ACM Trans. Database Syst. 36, 4, Article 23 (Dec. 2011), 48 pages.
https://doi.org/10.1145/2043652.2043656
[2] Dana Angluin. 1988. Queries and Concept Learning. Mach. Learn. 2, 4 (1988), 319–342.
https://doi.org/10.1023/A:1022821128753
[3] PatrickBlackburn,MaartendeRijke,andYdeVenema.2001. ModalLogic .CambridgeTractsinTheoreticalComputer
Science, Vol.53. CambridgeUniversityPress,Cambridge.
[4] ChenChungChangandH.JeromeKeisler.1973. Modeltheory .North-HollandPub.Co.;AmericanElsevierAmsterdam,
NewYork.
[5] Kit Fine. 1975. Normal Forms in Modal Logic. Notre Dame Journal of Formal Logic 16, 2 (1975), 229–237.
https://doi.org/10.1305/ndjﬂ/1093891703
[6] MarieFortin,BorisKonev,VladislavRyzhikov,YurySavateev,F rankWolter,andMichaelZakharyaschev.2022.Unique
Characterisabilityand Learnabilityof Temporal Instance Queries.In Proceedings ofKR 2022 . 163–173.
[7] Maurice Funk, Jean Christoph Jung, and Carsten Lutz. 2021. Act ively Learning Concepts and Conjunctive Queries
underELr-Ontologies.In Proceedings ofIJCAI 2021 . 1887–1893.
[8] Maurice Funk, Jean Christoph Jung, and Carsten Lutz. 2022. Fro ntiers and Exact Learning of ELI Queriesunder DL-
Lite Ontologies. In Proceedings of the Thirty-First International Joint Confe rence on Artiﬁcial Intelligence, IJCAI 2022,
Vienna, Austria, 23-29 July2022 , LucDeRaedt (Ed.).ijcai.org, 2627–2633. https://doi.org/10.24963/ijcai.2022/364
[9] D.JaninandI.Walukiewicz.1995. Automata fortheModal /u1D707-calculusandRelatedResults.In ProceedingsoftheTwen-
tieth International Symposium onMathematical Foundation s of Computer Science, MFCS’95 (LNCS) , Vol. 969. Springer,
552–562.
[10] GwenKerdiles.2001. SayingitwithPictures:aLogicalLandscapeofConceptualG raphs. ILLCDissertationSeries(DS).
[11] RaoulKoudijs.2022.LearningModalFormulasviaDualities. https://eprints.illc.uva.nl/id/eprint/1957/1/MoL-2022-07.t ext.pdf
ILLC MoLSeries(MScThesis).
[12] Natasha Kurtonina andMaartenDeRijke.1997. Simulating without Negation. JournalofLogicand Computation 7,4
(081997),501–522.
[13] Heikki Mannila andKari-Jouko Räihä. 1986. TestData for Relatio nalQueries.In PODS. 217–223.
[14] Lawrence S. Moss. 1999. Coalgebraic logic. Annals of Pure and Applied Logic 96, 1 (1999), 277–317.
https://doi.org/10.1016/S0168-0072(98)00042-6
[15] EricRosen.1997. ModalLogicoverFiniteStructures. JournalofLogic,Language,andInformation 6,4(1997),427–439.
http://www.jstor.org/stable/40181601
[16] Patrik Sestic.2023. Unique Characterisabilityof LinearTempor al Logic. ILLCMoL Series(MScThesis),toappear.
[17] Slawek Staworko and Piotr Wieczorek. 2015. Characterizing XM L Twig Queries with Examples. In 18th In-
ternational Conference on Database Theory, ICDT 2015, Marc h 23-27, 2015, Brussels, Belgium (LIPIcs) , Marcelo
Arenas and Martín Ugarte (Eds.), Vol. 31. Schloss Dagstuhl - Leib niz-Zentrum für Informatik, 144–160.
https://doi.org/10.4230/LIPIcs.ICDT.2015.144
[18] Balder ten Cate and Victor Dalmau. 2022. Conjunctive Queries: Unique Characterizations and Exact Learnability.
ACMTrans. Database Syst. 47,4 (2022),14:1–14:41. https://doi.org/10.1145/3559756
[19] Balder ten Cate, Víctor Dalmau, and Jakub Opršal. 2023. Rig ht-Adjoints for Datalog Programs, and Homomorphism
Dualitiesover RestrictedClasses. arXiv: 2302.06366 [cs.LO]
[20] J. van Benthem.1976. Modal Correspondence Theory . Ph.D.Dissertation.University ofAmsterdam.
,Vol. 1,No. 1,Article. Publication date: February 2022.
arXiv:2401.08041v1  [math.OC]  16 Jan 20241
Two-Stage Distributionally Robust Edge Node
Placement Under Endogenous Demand Uncertainty
Jiaming Cheng†,Duong Thuy Anh Nguyen‡, Duong Tung Nguyen†
†Arizona State University, Tempe, AZ 85281, USA, {dtnguy52, duongnt }@asu.edu
‡University of British Columbia, Vancouver, BC V6T1Z4, Cana da, jiaming@ece.ubc.ca
Abstract —Edge computing (EC) promises to deliver low-latency
and ubiquitous computation to numerous devices at the netwo rk
edge. This paper aims to jointly optimize edge node (EN) plac e-
ment and resource allocation for an EC platform, considerin g
demand uncertainty. Diverging from existing approaches tr eating
uncertainties as exogenous, we propose a novel two-stage de cision-
dependent distributionally robust optimization (DRO) fra mework
to effectively capture the interdependence between EN plac ement
decisions and uncertain demands. The ﬁrst stage involves ma king
EN placement decisions, while the second stage optimizes re source
allocation after uncertainty revelation. We present an exa ct mixed-
integer linear program reformulation for solving the under lying
“min-max-min” two-stage model. We further introduce a vali d
inequality method to enhance computational efﬁciency, esp ecially
for large-scale networks. Extensive numerical experiment s demon-
strate the beneﬁts of considering endogenous uncertaintie s and the
advantages of the proposed model and approach.
Index Terms —Edge computing, edge node placement, distribu-
tionally robust optimization, decision-dependent uncert ainty.
I. I NTRODUCTION
The widespread adoption of mobile devices and applications
has caused an unprecedented surge in mobile data trafﬁc. Mor e-
over, with the advent of new services such as augmented/virt ual
reality, manufacturing automation, and autonomous drivin g, the
demand for innovative solutions that can meet their challen ging
requirements has become imperative. In response, edge com-
puting (EC) has emerged as a vital computing paradigm, com-
plementing traditional cloud computing to provide enhance d
user experiences and support a wide array of low-latency and
highly reliable Internet of Things (IoT) applications [1], [2].
However, as the utilization of edge resources continues to g row,
it poses signiﬁcant challenges to existing network operati ons.
The intermittent nature and stringent service requirement s of
EC, combined with system uncertainties, create substantia l
obstacles to network management and optimization.
The performance and reliability of EC systems are suscepti-
ble to various uncertainties arising from multiple sources , such
as extreme weather conditions, ﬂuctuating resource demand s,
trafﬁc spikes, user mobility, and changes in application pe rfor-
mance and user behavior. Moreover, the increasing complexi ty
and diversity of man-made attacks and cyber threats, includ ing
insider attacks, cyberattacks, and malware attacks, intro duce
additional uncertainties and risks to EC systems [3]. Indee d,
various aspects of edge network operations under uncertain ties
have been studied, including computational resource alloc ation
under demand uncertainty [4]–[7], resilience network desi gns
against EN failures [8]–[10], network softwarization agai nst
risks [11]–[14], economic analysis under price uncertaint y[15]–[18], and market interaction under time-varying comm u-
nication network [19]–[21].
Incorporating demand uncertainty is of utmost importance i n
the long-term investment and operation plan of an EC platfor m
when selecting potential locations for edge resource insta llation.
The platform must make edge node (EN) placement decisions
based on incomplete information about future demand. Ignor ing
uncertain demand may lead to frequent over-provisioning or
under-provisioning of resources. Over-provisioning can r esult
in the wastage of resources and unnecessary high provisioni ng
costs while under-provisioning may lead to degraded servic e
quality and unmet demand.
To address this challenge, we propose a distributionally ro -
bust model designed to address the EN placement and resource
allocation problem for a budget-constrained EC platform. T he
strategic placement of ENs plays a crucial role in determini ng
their proximity to users and their ability to serve speciﬁc a reas.
Thus, user demand patterns, data trafﬁc, and service reques ts
are signiﬁcantly inﬂuenced by the chosen EN deployment
locations. As a result, the EN placement decision directly
impacts the actual demand realization. Our proposed model
aims to optimize the EN placement decision under decision-
dependent demand uncertainty, with the goal of minimizing
costs while enhancing the quality of service (QoS) in terms o f
latency and unmet demand. Effectively managing uncertaint ies
is a key enabler in achieving consistent performance, relia bility,
and a superior user experience in EC.
Many efforts within the realm of optimization under uncer-
tainty have been developed for EC, with stochastic optimiza tion
(SO) and robust optimization (RO) being the two main ap-
proaches. SO typically assumes complete knowledge of the un -
derlying uncertainty distribution and requires access to a large
number of samples drawn from this true distribution. Howeve r,
this assumption may be demanding in practice, and limited
information can lead to misspeciﬁcation of the distributio n [22].
On the other hand, RO adopts uncertainty sets, deterministi c
representations of uncertain parameters, simplifying the model
and improving computational tractability [23], [24]. Neve rthe-
less, RO can be overly conservative at times, potentially le ading
to suboptimal system performance. The distributionally ro bust
optimization (DRO) approach strikes a balance between SO
and RO [25], [26]. It optimizes decisions with respect to wor st-
case distribution within a predeﬁned ambiguity set, achiev ing
a favorable trade-off between optimality and robustness.
While DRO has been effectively applied in planning and
operation problems in cloud/EC [11], [27]–[29], one aspect
often neglected in the literature is the interdependence be tween2
decisions and uncertainties. Speciﬁcally, the placement o f ENs
in an area’s neighborhood has a positive impact on demand. It
boosts user conﬁdence, especially when they request servic es
with stringent delay requirements. Thus, the platform may
expect an increased mean of demand. Moreover, with the
increasing number of ENs in an area’s neighborhood, higher
user conﬁdence also leads to decreased demand variance. As
users become more conﬁdent in the reliability and availabil ity
of edge resources, their demand patterns tend to become more
consistent and predictable. This reduced variability indi cates
that users exhibit a more stable and reliable demand, enabli ng
better resource planning and management. Thus, it is crucia l for
the platform to consider the inﬂuence of its decisions on fut ure
demands. Consequently, the platform can proactively optim ize
its decisions to control the uncertainty set. Surprisingly , this
critical problem has been largely overlooked in the existin g
literature. It presents a fundamental and unresolved chall enge in
optimizing EN placement decisions. Unfortunately, the exi sting
research in computer networking lacks the necessary tools a nd
techniques to tackle this problem effectively.
Contribution: This paper seeks to bridge the gap by proposing
a novel two-stage DRO framework with a decision-dependent
moment-based ambiguity set for optimal EN placement. Unlik e
conventional DRO approaches that use exogenous ambiguity
sets, our proposed model incorporates an endogenous ambigu ity
set, which captures the interdependence between the ﬁrst an d
second moments of demand and the placement decisions. To
the best of our knowledge, we are the ﬁrst to consider this two -
stage distributionally robust EN placement model that expl icitly
accounts for this decision-dependent demand uncertainty. How-
ever, incorporating the interdependence between uncertai nties
and decisions increases complexity, resulting in a large-s cale
non-linear optimization problem with numerous bilinear an d
trilinear terms. To tackle the challenging problem, we ﬁrst
develop an efﬁcient and exact reformulation, termed Exact
OPT-Placement . This reformulation is achieved through 3-step
transformations that convert the problem into a Mixed Integ er
Linear Programming (MILP) form, which can be solved efﬁ-
ciently using widely available solvers (e.g., Gurobi and Mo sek).
We further introduce an improved algorithm that generates
feasibility cuts to strengthen the proposed algorithm and s peed
up the computation. To substantiate the effectiveness of ou r
approach, extensive simulations have been conducted, demo n-
strating the efﬁciency of the proposed scheme in comparison
to several baseline models. Additionally, we have performe d
sensitivity analyses to evaluate the impact of crucial syst em
parameters on the overall system performance.
II. S YSTEM MODEL AND PROBLEM FORMULATION
In this section, we present the DRO model for the EN place-
ment and resource allocation problem for a budget-constrai ned
EC platform. The main objective of the platform is to optimiz e
the EN placement decision under endogenous demand uncer-
tainty, aiming to minimize costs while enhancing QoS.
A. System Model
We consider an EC platform that manages a set JofJ
potential candidate locations for EN installation and prov idesedge resources to users in a set IofIareas, each represented
by an access point (AP). The AP and EN indices are denoted
byiandj, respectively. The size of ENs can vary signiﬁcantly,
and each EN may comprise one or multiple edge servers.
For simplicity, we consider only computing resources, and t he
resource capacity at EN to be placed at location jis denoted
byCj. It is straightforward to extend our model to consider
the sizing decision for each EN. Given the diverse range of Io T
services with varying requirements, edge servers are respo nsible
for hosting different types of IoT applications to serve the se
workloads effectively. The platform optimizes the long-te rm
EN placement in the initial stage, maintaining this conﬁgur ation
unchanged for an extended period.
The placement decision for an EN at location j∈ J is
denoted by a binary variable yj∈ {0,1}. Speciﬁcally, yj
takes the value 1if an EN is installed at location jand0
otherwise. Additionally, this placement decision incurs a n EN
placement cost of fj. The objective of the platform is to identify
the optimal set of locations for efﬁcient EN placement while
adhering to the budgetary constraints imposed by the invest ment
budgetB. The network delay between AP iand ENjisdi,j. To
minimize network delay, the demand in each area should ideal ly
be served by its closest EN. However, each EN has a limited
capacity. Therefore, given the ﬁrst-stage decision, the pl atform
needs to optimally allocate the actual demand to different
ENs, considering the edge resource capacity constraints an d
the diverse geographical locations of the ENs to ensure high
QoS while reducing costs. Since the exact demand is unknown
to the platform in the ﬁrst stage, a portion of the workload ma y
be dropped. Let xi,jdenote workload from area iallocated to
ENjanduibe the unmet demand from area i. User requests
from each area imust be either served by some ENs or dropped
(i.e., counted as unmet demand ui), and the penalty for each
unit of unmet demand is denoted by si.
The resource demand in area iis denoted by λi. The demand
λiin each area i∈ I exhibits inherent uncertainties and
can vary based on the EN placement decisions. Indeed, the
decisions regarding EN placement in adjacent to user-popul ated
areas can signiﬁcantly inﬂuence users’ demand. The presenc e
of more ENs, along with increased resource availability and
reduced network delay, contributes to higher user conﬁdenc e.
Consequently, a larger pool of potential customers is attra cted
to utilize the available edge resources, resulting in highe r
demand. The platform’s objective is to minimize the variati on of
demand (forecast error) that deviates from the initially pr ojected
demand, as it plays a crucial role in delivering an exception al
user experience. Therefore, accurately capturing and mode ling
this uncertain demand, which not only varies over time but
also changes based on the ﬁrst-stage EN placement decision,
is of paramount importance. Developing efﬁcient models for
optimal placement of ENs that can effectively mitigate the
uncertainty associated with demand and enhance the robustn ess
of the system is a critical focus of this work.
In the following, we present a deterministic model for
the EN placement and workload allocation problem, followed
by two uncertainty models addressing demand uncertainties :
one for exogenous uncertainties and another considering th e
endogeneity between placement decisions and uncertaintie s.3
B. Deterministic problem formulation
The EC platform aims to minimize the total EN placement
cost while enhancing user experience by reducing the overal l
network delay and unmet demand. Without uncertainty con-
sideration, the deterministic problem for EN placement and
workload allocation can be formulated as follows:
DET:min
y,x,u/summationdisplay
j∈Jfjyj+ρ/summationdisplay
i∈I/summationdisplay
j∈Jdi,jxi,j+/summationdisplay
i∈Isiui,(1a)
s.t.(2)−(7). (1b)
The ﬁrst term in the objective function (1a) represents the t otal
EN placement cost, while the second and third term captures
the delay penalty and unmet demand penalty from the workload
allocation decision. ρis the delay penalty parameter controlled
by the platform. A higher value of ρsigniﬁes that the platform
prioritizes reducing delays over minimizing unmet demand.
Constraints are summarized as follows:
Budget constraint: The total expense for EN placement deci-
sions should not exceed the restricted investment budget B:
/summationdisplay
j∈Jfjyj≤B. (2)
Reliability constraint: To enhance service reliability, the plat-
form may opt to place the EN on a minimum of Kmin
locations, proactively considering the potential for unex pected
EN failures. Hence, we have:/summationdisplay
j∈Jyj≥Kmin. (3)
Workload allocation constraints: The demand from each area
must be either served by some ENs ( xi,j) or dropped ( ui):
ui+/summationdisplay
j∈Jxi,j=λi,∀i. (4)
Capacity constraints: We assume that the capacity of each EN
is pre-divided for each area. By allocating speciﬁc capacit ies
to each area, the system can achieve an equitable distributi on
of resources among customers, preventing any particular ar ea
from being disproportionately overloaded or underserved. Let
Ci,jdenote the resource capacity of each EN jdedicated to
areai. The computing resources required to serve the workload
from area i, assigned to EN j, must not exceed the pre-allocated
capacityCi,jdesignated for area i:
0≤xi,j≤Ci,jyj,∀i,j. (5)
Delay constraints: To maintain a satisfactory user experience,
the platform may impose an average network delay threshold
∆ifor areaibased on the proportion of workload from area i
allocated to EN j, represented byxi,j
λi.
/summationdisplay
j∈Jdi,jxi,j
λi≤∆i,∀i. (6)
Decision variables: Decision variables include the EN place-
ment decision y, workload allocation xand unmet demand u.
y∈ {0,1}J,u∈RI
+,x∈RI×J
+. (7)C. Uncertainty Modeling
In the deterministic model DET , the demand λifor each
geographical area is assumed to be precisely known at the
decision-making stage. This implies that the platform can
predict the actual demand, which subsequently serves as an
input to the DET model. Nevertheless, accurately predicting the
exact demand for each area is often challenging at the time of
decision-making. Consequently, addressing how to effecti vely
incorporate uncertainties into the decision-making proce ss be-
comes a critical and complex task. In this study, we explore
an alternative approach to enhance the robustness of our mod el
against the model uncertainty and limited information, kno wn
as the DRO approach. The core idea of DRO revolves around
considering an ambiguity set that encompasses a range of
possible distributions consistent with the available info rmation.
Speciﬁcally, we focus on scenarios where only the mean and
variance of the demand distribution are provided.
We assume that the true distribution of demand originates
from a set of possible distributions, where the random de-
mand at each area i∈ I can take values from a ﬁnite
support set Ξ ={ξ1,ξ2,...,ξ N}with unknown probabilities
(pi,1,pi,2,...,p i,N). Drawing upon the work in [26], we utilize
a moment-based ambiguity set that considers information ab out
the distribution’s support and conﬁdence region. The intui tion
behind this ambiguity set is to maintain the forecast error f or the
ﬁrst and second moments of demand within speciﬁed threshold s
Γµ
iandΓµ
i,¯Γσ
i(0≤Γµ
i≤1≤¯Γσ
i), respectively, ensuring
robustness against uncertainties in the prediction values . These
predeﬁned parameters play a crucial role in determining the
robustness of the ambiguity set for each speciﬁc area i.
1) Exogenous Stochastic Demand: Let¯µiand¯σ2
irepresent
the empirical mean and variance of demand λiat areai,
respectively. When the demand is independent of the system
decision, the ambiguity set for the exogenous stochastic de mand
can be presented as follows:
U1(y) =/braceleftbigg
{pi}i∈I:pi∈RN
+,N/summationdisplay
n=1pi,n= 1,∀i, (8a)
/vextendsingle/vextendsingle/vextendsingle/vextendsingle/vextendsingle/vextendsingleN/summationdisplay
n=1pi,nξn−¯µi/vextendsingle/vextendsingle/vextendsingle/vextendsingle/vextendsingle/vextendsingle≤Γµ
i,∀i, (8b)
/parenleftbig
¯σ2
i+ ¯µ2
i/parenrightbig
Γσ
i≤N/summationdisplay
n=1pi,nξ2
n≤/parenleftbig
¯σ2
i+ ¯µ2
i/parenrightbig¯Γσ
i,∀i/bracerightbigg
.(8c)
Here, constraint (8a) ensures that the probabilities acros s all
areas within the support set sum up to 1. In (8b), the true mean
of demand is constrained to lie within an L1-distance Γµ
ifrom
the empirical mean ¯µi. Constraint (8c) implies that the actual
value of the second moment of demand must fall within the
interval[(¯σ2
i+ ¯µ2
i/parenrightbig
Γσ
i,(¯σ2
i+ ¯µ2
i)¯Γσ
i].
2) Endogenous Stochastic Demand: The presence of ENs
in the neighborhood of each area ihas a substantial impact on
increasing the demand for that area. This effect can be attri buted
to the close proximity of ENs, ensuring higher availability of
resources and the overall QoS, especially for time-sensiti ve
applications. As a result, user conﬁdence is heightened, le ading
to a rise in the mean of demand and a decrease in demand vari-
ance since customers’ demand patterns become more consiste nt4
and predictable, offering signiﬁcant advantages for resou rce
planning and management.
To capture the interdependence between placement decision s
yand the demand uncertainty, we assume that the demand at
each area iis represented by a random variable λi(y), with its
distribution dependent on the EN placement decisions y, having
meanµi(y)and variance σ2
i(y). The endogenous decision-
dependent ambiguity set U(y), deﬁning bounds for the ﬁrst
two moments of the demand distribution as functions of y,
[30], [31], is expressed as follows:
U2(y) =/braceleftbigg
{pi}i∈I:pi∈RN
+,N/summationdisplay
n=1pi,n= 1,∀i, (9a)
/vextendsingle/vextendsingle/vextendsingle/vextendsingle/vextendsingle/vextendsingleN/summationdisplay
n=1pi,nξn−µi(y)/vextendsingle/vextendsingle/vextendsingle/vextendsingle/vextendsingle/vextendsingle≤Γµ
i,∀i, (9b)
/bracketleftbig
σ2
i(y)+(µi(y))2/bracketrightbig
Γσ
i≤N/summationdisplay
n=1pi,nξ2
n≤/bracketleftbig
σ2
i(y)+(µi(y))2/bracketrightbig¯Γσ
i,∀i/bracerightbigg
.
(9c)
Similar to (8), (9) also imposes linear restrictions on the ﬁ rst
and second moments of the demand distribution, ensuring the y
remain within predeﬁned thresholds. However, it is crucial to
emphasize that in contrast to (8), the placement decision yhas
a substantial impact on both the mean ( µi(y)) and variance
(σ2
i(y)) of the demand. We model the mean and variance of
demand as afﬁne functions of the decisions y, which can be
expressed as:
µi(y) = ¯µi/parenleftBigg
1+/summationdisplay
j∈JΨµ
i,jyj/parenrightBigg
, (10a)
σ2
i(y) = max/braceleftBigg
¯σ2
i/parenleftBigg
1−/summationdisplay
j∈JΨσ
i,jyj/parenrightBigg
,(σLB
i)2/bracerightBigg
. (10b)
As previously mentioned, an increase in resource availabil ity is
generally correlated with an increase in the mean and a decre ase
in the variance of demand [30], [32]. To capture the inﬂuence of
placing EN jnear area ion the mean and variance of demand,
we employ two parameters: Ψµ
i,jandΨσ
i,j. These parameters
take values from the interval [0,1]and are speciﬁcally designed
to reﬂect the varying inﬂuence of different locations. Clos er
locations have higher impacts on demand’s ﬁrst and second
moments, while areas farther away exert less effect. Notabl y,
whenΨµ
i,jandΨσ
i,jare set to 0in (10), the ambiguity set
reduces to an exogenous form, as seen in (8). This correspond s
to the traditional DRO problem, where demand uncertainty is
treated independently of the placement decisions of ENs.
Furthermore, when an EN is placed near area i, the demand
increases from the forecast demand estimate ¯µi. The highest
demand variance in area ioccurs when there are no available
ENs in its neighborhood. However, due to the inherent nature
of the demand uncertainty, the variance cannot be less than a
lower bound value, denoted by (σLB
i)2. In situations where the
platform possesses perfect knowledge of the ﬁrst and second
moments of demand, the parameters Γµ
i= 0andΓσ
i=¯Γσ
i= 1
can be set. In this case, the problem is reduced to DET , where
uncertainty is eliminated, and the solution relies on known
values of the forecast mean and demand variance.D. Two-stage DRO with endogenous stochastic demand
For any demand distribution p={pi}i∈I∈ U(y), where
U(y)is the ambiguity set deﬁned in (9) with (8) as a special
case, the two-stage decision-dependent DRO problem of the
EC platform for EN placement and resource allocation can be
formulated as follows:
(P1) min
y/summationdisplay
jfjyj+max
p∈U(y)min
x,uEp/bracketleftbigg
ρ/summationdisplay
i,jdi,jxi,j+/summationdisplay
isiui/bracketrightbigg
(11a)
s.t.(2),(3),(7)
Ω2(y,λ) =/braceleftbigg
0≤xi,j≤Ci,jyj,∀i,j (11b)
ui+/summationdisplay
jxi,j=λi(y),∀i (11c)
/summationdisplay
jdi,jxi,j≤∆iλi(y),∀i/bracerightbigg
. (11d)
The proposed two-stage DRO model addresses a trilevel min-
max-min optimization problem. The ﬁrst stage minimizes EN
placement costs before revealing demand uncertainties. In the
second stage, the model considers worst-case demand realiz a-
tion within an ambiguity set, aiming to minimize the expecte d
operational penalty after demand uncertainties are realiz ed.
Importantly, the two stages are interconnected as EN placem ent
decisions directly impact actual demand. This differs from the
two-stage DRO framework with exogenous stochastic demand,
where actual demand is treated as an independent instance
within the ambiguity set U1representing possible demand sce-
narios. The proposed model, however, considers actual dema nd
after EN placement decisions have been made in the ﬁrst stage .
In our problem, we assume that the unmet demand penalty
(si) is larger than the network delay cost ( ρdi,j), i.e.,si> ρdi,j.
This means that the EC platform prioritizes meeting demand
requirements over reducing latency in the network.
III. S OLUTION APPROACH
In this section, we propose two methods to solve the two-
stage DRO model for EN placement and resource allocation
with endogenous stochastic demand. The problem has a two-
stage structure, leading to a tri-level optimization probl em with
a strong interdependence between uncertainty and decision s.
Even a seemingly straightforward formulation employing li near
programming (LP) in both stages can be proven to be NP-hard
[23]. Additionally, the uncertainty parameter λ(y)is deﬁned
as an afﬁne function of the decision variable ywithin the
ambiguity set, leading to substantial complexities in solv ing
problem(P1). The modiﬁcation introduces signiﬁcant changes
to the size and structure of the set, making the reformulatio n
of the DRO problem particularly challenging, and the presen ce
of bilinear terms further obstructs direct solvability.
To address these challenges, we provide an exact reformu-
lation for problem (P1), enabling us to solve the resulting
MILP problem using off-the-shelf solvers. Furthermore, we
propose an improved reformulation that enhances scalabili ty by
leveraging extreme rays of the feasible region to generate e fﬁ-
cient cuts. The improved approach can accelerate computati on,
particularly as the network size increases.5
A. Exact Monolithic Reformulation
To reformulate the min-max-min DRO model ( P1) into a
more tractable form, we employ a three-step process to deriv e
a single-level, monolithic representation. In Step 1 , given
EN placement decisions y, we derive the dual problem of
the innermost minimization problem and obtain a closed-for m
expression for its optimal objective value. Subsequently, the
inner max-min framework simpliﬁes to a max-max formulation ,
effectively simplifying it to a maximization problem. In Step
2, we apply the duality theorem to recast the obtained min-max
model as an equivalent single-level mixed-integer nonline ar
program (MINLP). Step 3 leverages the McCormick lineariza-
tion techniques [33] to attain a single-level MILP reformul ation
of the original tri-level problem, which can be directly sol ved
using off-the-shelf solvers. Below are the speciﬁc details :
Step 1: The structure of the dual problem allows us to decom-
pose the inner problem based on each area i. Denoting the inner
level problem as g(y,λ), we express g(y,λ) =/summationtext
i∈Igi(y,λ),
wheregi(y,λ)for alli∈ I is given as follows
gi(y,λ) = min
x,uρ/summationdisplay
jdi,jxi,j+siui (12a)
s.t.xi,j≤Ci,jyj,∀j (vi,j) (12b)
ui+/summationdisplay
jxi,j=λi(y),(αi) (12c)
/summationdisplay
jdi,jxi,j≤∆iλi(y),(βi) (12d)
wherevi,j,αiandβiare the dual variables associated with
constraints (12b)-(12d), respectively. Consequently, th e dual
problem of gi(y,λ), for alli∈ I, is as follows:
max
vi,j,αi,βi/summationdisplay
jCi,jyjvi,j+/bracketleftbig
αi+βi∆i/bracketrightbig
λi(y) (13a)
s.t.vi,j+αi+βidi,j≤ρdi,j,∀j (13b)
αi≤si, βi≤0;vi,j≤0,∀j. (13c)
Subsequently, our goal is to derive a closed-form expressio n for
the optimal objective value of the dual problem associated w ith
each inner problem, considering the extreme points and rays of
the feasible region. We examine the following two cases:
Case 1 (αi=si):From (13b), we have vi,j≤ρdi,j−si−βidi,j.
Asvi,j≤0, the extreme point of vi,jcan occur at either vi,j=
0orvi,j=ρdi,j−si−βidi,jifρdi,j−si−βidi,j<0. We
consider the following two cases for the value of βi≤0:
(i) Ifρ−si
di,j< βi≤0thenvi,j≤ρdi,j−si<0due to
the assumption si> ρdi,j. The constraint vi,j≤0becomes
redundant and vi,j=ρdi,j−siis the extreme point. The
optimal value for the objective function is
siλi(y)+/summationdisplay
jCi,jyj(ρdi,j−si),∀i. (14)
(ii) Ifβi≤ρ−si
di,j<0, the inequality ρdi,j−si−βidi,j>0
holds true. As a result, the constraint vi,j≤ρdi,j−si−βidi,j
becomes redundant and vi,j= 0 represents the extreme point.
By letting dmin
i= min j′∈Jdi,j′for alli, we ﬁnd that βi=
ρ−si
dmin
iis an extreme point. The objective value is
/bracketleftBigg
si+/parenleftBigg
ρ−si
dmin
i/parenrightBigg
∆i/bracketrightBigg
λi(y),∀i. (15)Case 2 (αi< si):For all ENs j∈ J,vi,jreaches its extreme
point at either vi,j= 0orvi,j=ρdi,j−αi−βidi,j. We proceed
to analyze the following two scenarios:
(i) Ifvi,j= 0 for some j∈ J , it must hold that ρdi,j−
αi−βidi,j≥0, i.e.,αi≤di,j(ρ−βi). Thus, we aim to ﬁnd
extreme points for βisuch that
si>/braceleftbigg
max
βi(ρ−βi)di,j,∀j,s.tβi≤0/bracerightbigg
. (16)
Notably, (ρ−βi)di,j> siwhenβi→ −∞,∀i. Thus,αi=
ρdi,jandβi= 0 represent the extreme points.
(ii) If the extreme point is vi,j=ρdi,j−αi−βidi,j, it implies
that the constraint vi,j≤ρdi,j−αi−βidi,jis binding, i.e.,
ρdi,j−αi−βidi,j≤0. (17)
Sinceβi≤0,βi= 0 represents the extreme point that ensures
(17) holds. Consequently, αimust satisfy ρdi,j≤αi< si
for allj∈ J . It should be noted that the problem in (13) is
a maximization problem, and αireaches its extreme point at
a higher value. Therefore, for each area i, we have a set of
extreme points if there exists an EN j∗∈ J such that di,j<
di,j∗for allj∈ J \{j∗}, andαi=ρdi,j∗.
Overall, the optimal objective value for Case 2 is given as:
ρdi,j∗λi(y)+/summationdisplay
j:di,j<di,j∗Ci,jρ(di,j−di,j∗)yj,∀i. (18)
Sincesi> ρdi,j∗andρ−si
dmin
i< ρ−ρdi.j∗
dmin
i, by considering
these two cases together, we can derive a closed-form expres -
sion for the optimal objective value of the model in (13). For
a givenj∗, this is achieved by taking the maximum between
the following:


ρdi,j∗λi(y)+/summationtext
j:di,j<di,j∗Ci,jyjρ(di,j−di,j∗)
ρdi,j∗λi(y)+/bracketleftbigg/parenleftbigg
ρ−ρdi,j∗
dmin
i/parenrightbigg
∆i/bracketrightbigg
λi(y).
As the dual problem (13) is both feasible and bounded, strong
duality holds, and the expression given above represents th e
optimal objective value for the primal problem gi(y,λ).
Furthermore, for each area i∈ I, the optimal value of the
inner problem gi(y,λ)corresponding to the actual realization
ξn∈Ξwith the probability pi,ncan be given as follows:
θi,n(y) =max
j∗∈Jρdi,j∗ξn+max/braceleftbigg/bracketleftbig
ρ−ρdi,j∗
dmin
i)∆i/bracketrightbig
ξn,
/summationdisplay
j:di,j<di,j∗Ci,jρ(di,j−di,j∗)yj/bracerightbigg
,∀i,n. (19)
Both terms within the inner maximization of (19) are negativ e.
Intuitively, the inner objective determines which one of th ese
negative terms imposes a more stringent requirement, eithe r in
terms of the capacity constraint or the delay constraint.
Step 2: Step 1 reformulates the inner bilevel max-min
problem to a single-level maximization. Given the EN place-
ment decision y, we can reformulate the inner problem as
maxπ∈U2(y)E/bracketleftbig
g(y,λ(y))/bracketrightbig
, as shown below:
max
pi,n/summationdisplay
i∈IN/summationdisplay
n=1pi,nθi,n(y) (20a)6
s.t.N/summationdisplay
n=1pi,nξn= 1,∀i(ωi) (20b)
N/summationdisplay
n=1pi,nξn≤Γµ
i+µi(y),∀i(δ1
i) (20c)
N/summationdisplay
n=1pi,nξn≥Γµ
i−µi(y),∀i(δ2
i) (20d)
N/summationdisplay
n=1pi,nξ2
n≤/parenleftbigg
σ2
i+(µi(y))2/parenrightbigg
¯Γσ
i,∀i(γ1
i)(20e)
N/summationdisplay
n=1pi,nξ2
n≥/parenleftbigg
σ2
i+(µi(y))2/parenrightbigg
Γσ
i,∀i,(γ2
i)(20f)
where (ωi,δ1
i,δ2
i,γ1
i,γ2
i), for all i, are the dual variables asso-
ciated with all constraints. According to duality theory fo r LP
[23], we can formulate the corresponding dual problem as:
min
ω,δ,γ/summationdisplay
iωi+δ1
i(µi(y)+Γµ
i)−δ2
i(µi(y)−Γµ
i)+
/parenleftbig
σ2
i(y)+((µi(y))2/parenrightbig¯Γσ
iγ1
i−/parenleftbig
σ2
i(y)+(µi(y))2/parenrightbig
Γσ
iγ2
i(21a)
s.t.ωi+(δ1
i−δ2
i)ξn+(γ1
i−γ2
i)ξ2
n≥θi,n(y) (21b)
δ1
i,δ2
i,γ1
i,γ2
i≥0,∀i. (21c)
Recall that our decision-dependent ambiguity set is constr ucted
based on the mean µi(y)and variance σ2
i(y), which are deﬁned
as afﬁne functions of the decision y, as shown in (10). Hence,
(µi(y))2can be extended to the following form:
¯µ2
i/parenleftbigg
1+/summationdisplay
j∈J(2Ψµ
i,j+(Ψµ
i,j)2)yj+2J/summationdisplay
l=1l−1/summationdisplay
m=1Ψµ
i,lΨµ
i,mymyl/parenrightbigg
.
By incorporating the deﬁnitions of (µi(y)),(σi(y)), and
(µ2
i(y)), we obtain the following MINLP:
min
y∈{0,1}/summationdisplay
jfjyj+/summationdisplay
i/parenleftbigg
ωi+δ1
i(¯µi+Γµ
i)−δ2
i(¯µi+Γµ
i)
+ ¯µi/summationdisplay
jΨµ
i,j(δ1
iyj−δ2
iyj)+(¯σ2
i+ ¯µ2
i)(¯Γσ
iγ1
i−Γσ
iγ2
i)
+2¯µ2
iJ/summationdisplay
l=1l−1/summationdisplay
m=1Ψσ
i,lΨσ
i,m/parenleftbig¯Γσ
iylymγ1
i−Γσ
iylymγ2
i/parenrightbig
+/summationdisplay
jΛi,j/parenleftbig¯Γσ
iγ1
iyj−Γσ
iγ2
iyj/parenrightbig
(22a)
s.t.(2),(3) (22b)
Λi,j= ¯µ2
i/parenleftbig
(Ψµ
i,j)2+2Ψσ
i,j/parenrightbig
−¯σ2
iΨµ
i,j,∀i,j (22c)
ωi+(δ1
i−δ2
i)ξn+(γ1
i−γ2
i)ξ2
n≥θi,n(y),∀i,n (22d)
δ1
i,δ2
i,γ1
i,γ2
i≥0,∀i. (22e)
Step 3: After Step 2 , the proposed problem is reformulated
into a single-level MINLP, which contains multiple triline ar
and bilinear terms. It is important to note that all bilinear and
trilinear terms in our formulation exhibit similar charact eristics:
they involve the product of binary variables and a non-negat ive
continuous variable. To address these nonlinear relations hips,
we employ McCormick envelopes for linearization. Due to the
space limitation, we present the linearization of one bilin earterm and one trilinear term. The linearization process for t he
remaining terms follows a similar approach.
For notation brevity, we use r∈ {1,2}as the superscript
on the dual variable. Let Mκ,y,γ denote the set involving the
McCormick inequalities for linearizing any bilinear term ( κr=
γry), wherey∈ {0,1}, andγris non-negative. We have
Mκ,y,γ=/braceleftbigg
(κ,γ,y):γry≤κr≤¯γry,γr≤γr≤¯γr
γr−(1−y)¯γr≤κr≤γr−(1−y)γr/bracerightbigg
,(23)
where¯γrandγrare the upper bound and lower bound,
respectively, on the dual variable γr. In our problem, we set
these bounds as sufﬁciently large positive numbers, denote d by
M. Similarly, we denote Mη,yl,ym,γas the set of McCormick
inequalities used to linearize trilinear terms. A trilinea r term
in our formulation contains one non-negative variable and t wo
binary variables. For example, ηr
i,l,m=γr
iYl,m=γr
iylymhas
γr
i≥0andyl,ym∈ {0,1}.Mη,yl,ym,γis given as follows:
Mη,yl,ym,γ=/braceleftbigg
(η,γ,yl,ym):ηr≤¯γryl,ηr≤¯γrym,
ηr≤γr−(1−yl)γr, ηr≤γr−(1−ym)γr,
ηr≥γr(yl+ym−1), ηr≥γr+ ¯γr(yl+ym−2),
yl≤1, ym≤1, γr≤γr≤¯γr/bracerightbigg
. (24)
According to the McCormick linearization for bilinear and
trilinear terms, we can derive the following MILP formula-
tion (P′
1), which provides an exact solution for the proposed
problem under the decision-dependent ambiguity set (9):
(P′
1):min/summationdisplay
jfjyj+/summationdisplay
i/parenleftBig
ωi+δ1
i(¯µi+Γµ
i)−δ2
i(¯µi−Γµ
i)
+ ¯µi/summationdisplay
jΨµ
i,j(τ1
i,j−τ2
i,j)+(¯σ2
i+ ¯µ2
i)(¯Γσ
iγ1
i−Γσ
iγ2
i)
+2¯µ2
iJ/summationdisplay
l=1l−1/summationdisplay
m=1Ψσ
i,lΨσ
i,m/parenleftbig¯Γσ
iη1
i,l,m−Γσ
iη2
i,l,m/parenrightbig
+/summationdisplay
jΛi,j/parenleftbig¯Γσ
iκ1
i,j−Γσ
iκ2
i,j/parenrightbig/parenrightBig
(25a)
s.t.(2),(3) (25b)
Λi,j=−¯σ2
iΨµ
i,j+ ¯µ2
i/parenleftbig
(Ψµ
i,j)2+2Ψσ
i,j/parenrightbig
,∀i,j (25c)
ωi+(δ1
i−δ2
i)ξn+(γ1
i−γ2
i)ξ2
n≥θi,n(y),∀i,n (25d)
κr
i,j∈ Myj,γr
i, τr
i,j∈ Myj,γr
i,∀i,j,r (25e)
ηr
i,l.m∈ Myl,ym,γr
i,∀i,l,m,r,l > m (25f)
yj∈ {0,1},∀j;δ1
i,δ2,γ1
i,γ2
i≥0,∀i. (25g)
Hence, by following Step 1 toStep 3 , we can achieve an exact
MILP reformulation that can be solved directly using off-th e-
shelf solvers. These steps are summarized in Algorithm 1 .
B. Improved Variant
While Algorithm 1 provides an optimal solution to the
proposed problem ( P1), the computational time can become
sensitive to the network size. To address this limitation, t he
improved algorithm takes a different approach. It generate s7
Algorithm 1 Exact OPT-Placement
1:Initialization: fj,si,di,j,U2(y),B,Kmin,ρ
2:Step 1: Solve the inner problem (12): Find analytical
expression (19) for the dual problem of inner objective (13) .
3:Step 2: Dualize the obtained inner “ max-max ” problem
which is subject to all constraints within U2(y).
4:Step 3: Linearize the bilinear and trilinear terms based on
McCormick linearization techniques.
5:Output: Optimal placement (y∗).
extreme rays for the feasible region of ( P1), which are then
incorporated into the MILP problem obtained in ( P′
1). By
identifying the potential locations of extreme points for t hese
dual variables, we achieve a stronger reformulation compar ed to
(P′
1). This enhancement helps reduce computational complexity
and allows for more efﬁcient solving of larger networks.
After completing Step 2 , formulation (22) shows that the
problem is feasible within a region satisfying the inequali ties
(22d) - (22e). To this end, let us deﬁne δi=δ1
i−δ2
iand
γi=γ1
i−γ2
i. It should be noted that δiandγiare unbounded,
which means searching for the extreme point to achieve the
optimum objective might be time-consuming. Therefore, the
objective is to determine a set of extreme rays ( ωi,δ1
i,δ2
i,
γ1
i,γ2
i) that effectively represent the feasible region deﬁned by
constraints (22d) and (22e). As a result, the improved varia nt
can strengthen the problem by reducing the feasible region o f
the inner problem, leading to faster computation times.
To identify extreme rays, we solve the following inequality
system for k,l∈ {1,2,...,N}, wherekandlrepresent the
indices of extreme points:
ωi+δiξk+γjξ2
k= 0,∀i,k (26a)
ωi+δiξl+γjξ2
l= 0,∀i,l (26b)
ωi+δiξn+γjξ2
n≥0,∀n∈ {1,2,...,N}\{l,k}.(26c)
Without loss of generality, we assume that ξk< ξl. Our
objective is to determine the relationship between ξk,ξl, and
the other instances ξn,n∈ {1,2,...,N} \ {k,l}. To achieve
this, we deﬁne {ξ(1),ξ(2),...,ξ (N)}as a ordered support for
the random demand.
According to (26a) and (26b), we can derive δi=−(ξk+
ξl)γiandωi=ξkξlγi. To ensure clarity, we will ﬁx the
direction of the unit vector along γiand determine the direction
of other variables to satisfy the inequality (26c). By norma lizing
γi, we have |γi|= 1, which will be analyzed in the following:
Case 1 (γi= 1):Due to the assumption ξk< ξlandξn≥0, we
must ensure (ξn−ξl)(ξn−ξk)≥0,∀n∈ {1,2,...,N}\{k,l}.
Thus, we can have either ξn≥ξl> ξkorξn≤ξk< ξl. Based
on these two relationships, we can derive the expressions fo r
ωiandδi. Thus, there exists two extreme rays ( ωi,δi,γi) that
satisfy the conditions:
ωi=ξ(1)ξ(2), δi=−(ξ(1)+ξ(2)), γi= 1,∀i (27a)
ωi=ξ(N−1)ξ(N), δi=−(ξ(N−1)+ξ(N)), γi= 1,∀i.(27b)
Case 2 (γi=−1):Due to the assumption ξk< ξlandξn≥0,
we must ensure (ξn−ξl)(ξn−ξk)≤0,∀n∈ {1,2,...,N}\{k,l}. Thus, we have ξk≤ξn≤ξl. Therefore, the extreme ray
can be expressed as:
ωi=ξ(1)ξ(N), δi=−(ξ(1)+ξ(N)), γi=−1,∀i. (28)
Given the values of γiandδi, we can express δ1
i= max{0,δi},
δ2
i= max{0,−δi},γ1
i= max{0,γi}, andγ2
i= max{0,−γi}.
Thus, we can substitute ( ωi,δ1
i,δ2
i,γ1
i,γ2
i) into the problem (22).
The following inequalities ensure that the dual problem (21 )
is bounded, thereby guaranteeing the feasibility of ( P1). Thus,
for every area i∈ I, we have:
ξ(1)ξ(2)−(ξ(1)+ξ(2))(µi(y)−Γµ
i)+Si(y)¯Γσ
i≥0 (29a)
ξ(N−1)ξ(N)−(ξ(N−1)+ξ(N))(µi(y)−Γµ
i)+Si(y)¯Γσ
i≥0(29b)
−ξ(1)ξ(N)+(ξ(1)+ξ(N))(µi(y)−Γµ
i)−Si(y)Γσ
i≥0,(29c)
whereSi(y) =σ2
i(y)+µ2
i(y). Similar to the previous section,
we employ McCormick linearization techniques to linearize the
bilinear terms in (29). As a result, (29) becomes:
ξ(1)ξ(2)−(ξ(1)+ξ(2))(ζi−Γµ
i)+zi¯Γσ
i≥0,∀i (30a)
ξ(N−1)ξ(N)−(ξ(N−1)+ξ(N))(ζi−Γµ
i)+zi¯Γσ
i≥0,∀i(30b)
−ξ(1)ξ(N)+(ξ(1)+ξ(N))(ζi+Γµ
i)−ziΓσ
i≥0,∀i(30c)
zi=¯σ2
i+¯µ2
i+/summationdisplay
jΛi,jyj+2¯µ2
iJ/summationdisplay
l=1l−1/summationdisplay
m=1Ψµ
i,lΨµ
i,mYl,m,∀i(30d)
ζi= ¯µi(1+/summationdisplay
jΨµ
i,jyj),∀i (30e)
Yl,m≥yl+ym−1,Yl,m≤yl,Yl,m≤ym,∀l,m. (30f)
After incorporating the constraints in (30) into the MILP re for-
mulation ( P∗
1), we strengthen our formulation for the proposed
problem by reducing the feasible region. This enhancement
allows for efﬁcient computation and a tighter representati on
of feasible solutions.
IV. N UMERICAL RESULTS
A. Simulation Setting
We consider an EC system with I= 15 areas and J= 10
ENs in the default setting while larger networks will also be
considered in sensitivity analyses. The edge network topol ogy
is generated based on the cities and locations of randomly
selected Equinix edge data centers (DCs) [34]. The network
delay (di,j) between any two selected DCs is obtained directly
from the global ping dataset [35]. The EN placement cost fj
is sampled from the uniform distribution U(20,30), while the
unmet penalty siis randomly generated from U(30,40). To
generate Ci,j, the maximum resource capacity ( Cmax
j) at each
ENjis randomly selected from the set {84,96,128}vCPUs .
The resources available to each area i,Ci,j, are pre-allocated
according to the relative historical demand.
We randomly generate the empirical mean of resource de-
mand (¯µi) in each area i, following a uniform distribution with
values ranging from 20to50vCPUs . We deﬁne θias the
ratio of variation at each area, represented by θi=¯σi
¯µi,∀i.
The support size of demand ( N) at each area is taken as
100, withξ1,...,ξ Nin the range {1,...,100}. To establish
decision dependency between the demand distribution and EN
placement decisions, Ψµ
i,jandΨσ
i,jare considered as decreasing8
functions of the corresponding network delay (e.g., distan ce),
i.e.,exp/parenleftBig
−di,j
b/parenrightBig
,∀i,j, wherebis a parameter controlling the
decaying rate. This means the placement of EN jhas a higher
impact when it is closer to nearby areas. Since/summationtext
jΨσ
i,j≤1,
we normalize both impact parameters. To control the level of
robustness with respect to the true mean and true variance
of demand, we deﬁne ǫi= (ǫµ
i,ǫσ
i)∈[0,1]Ito adjust the
robustness for each area, i.e., Γµ
i=ǫµµi(y),Γσ
i= 1−ǫσ
i,
¯Γσ
i= 1+ǫσ
i. In our default setting , the other system parameters
are:ρ= 0.001,∆i= ∆ = 35 ,B= 100 ,b= 25 ,
ǫµ
i=ǫµ= 0.8,Γσ
i= Γσ= 0.8,¯Γσ
i=¯Γσ= 1.2,
Kmin= 1,θi=θ= 0.5,∀i. We will also vary these important
parameters during sensitivity analyses. All the experimen ts are
implemented in MATLAB using CVX [36] and Gurobi [37] on
a desktop with an Intel Core i7-11700KF and 32 GB of RAM.
B. Sensitivity analysis
This section conducts sensitivity analyses to assess the im -
pact of key system parameters on the optimal solution. The
parameters under investigation include the budget ( B), delay
penalty (ρ), and impact factors Ψi,j= (Ψµ
i,j,Ψσ
i,j). To evaluate
the impact of the EN placement cost f, we introduce a scaling
factorh, whereh= 1 represents the default setting. The base
value of fgenerated in Section IV-A is multiplied by hto
either scale up or down the placement cost. A higher value of
hindicates a higher EN placement cost.
0.4 0.6 0.8 1.0 1.2 1.4 1.6
h200250300350ObjectiveB = 40
B = 60
B = 80
B = 100
B = 120
B = 140
(a) Cost: varying handB0.4 0.6 0.8 1.0 1.2 1.4 1.6
h20406080100120140ObjectiveB = 40
B = 60
B = 80B = 100
B = 120
B = 140Only 1 EN is
placed due 
to small B
(b) Payment: varying handB
15 20 25 30 35 40 45 504006008001000120014001600Objective = 0.002
 = 0.004 = 0.008
 = 0.010
(c) Varying ∆andρ0 0.2 0.4 0.6 0.8 1.0200250300350400Objectives = 0.2
 = 0.4
 = 0.6
 = 0.8
(d) Varying ǫµandǫσ
Fig. 1: Impacts of important system parameters
1) Impacts of placement cost and budget: Fig.1(a) shows
that the total cost increases with higher EN placement costs .
Due to the limited budget, only a few ENs can be installed,
leading the platform to prioritize critical locations for i nstalling
ENs, particularly with a higher h. However, this may result in
increased penalties for unmet demand when his high. The
curve’s growth rate increases as Bdecreases, while increasing
Ballows the platform to select EN locations more ﬂexibly. Not e
that the minimum number of placed ENs must be greater than
1(Kmin= 1) to avoid situations where the payment equals 0.
Notably, the payment does not monotonically increase with h,
as highlighted in the dashed circle in Fig.1(b). This is beca use
the budget B= 40 allows only one EN to be placed with
h= 1.6, whereas it permits more than 2 ENs with smaller h.
2) Impacts of delay penalty ρand threshold ∆:Fig. 1(c)
demonstrates that the total cost decreases with smaller ∆andρthanks to the improved proximity and reduced delay penalty.
The cost reduction helps to mitigate delay and unmet demand
penalties, enhancing service quality. The curves converge to a
small value after a certain delay threshold, indicating tha t the
delay requirement can be easily satisﬁed. Thus, the platfor m
begins to prioritize capacity constraints over delay const raints.
3) Impacts of parameters in ambiguity set: Fig. 1(d) shows
how the level of robustness in the ambiguity set affects the
optimal solution. ǫcontrols the distance to the true mean and
variance of demand. As (ǫµ,ǫσ)increases, the ambiguity set
grows, allowing actual demand to vary over a larger range and
incurring a more conservative solution.
4) Running time comparison: We compared the average
running time over 20randomly generated problem instances for
each problem size, as shown in Table I. Algorithm 1 (denoted
asStandard ) and Algorithm 1 with feasibility cuts (denoted as
Improved ) both produce optimal solutions within a reasonable
time for small- and medium-sized networks. However, as the
system size grows larger, the advantage of Improved over
Standard becomes more evident. The feasibility cuts reduce
the feasible region and mitigate the effects of unbounded du al
variables, thus strengthening Exact OPT-Placement . Impor-
tantly, it is worth noting that the underlying problem is a robust
planning problem that does not require real-time computati on.
Network size Standard Improved
I = 10; J = 10 31.31s 21.68s
I = 20; J = 10 66.88s 62.95s
I = 20; J = 20 404.11s 331.79s
I = 30; J = 20 1314.8s 901.8s
I = 40; J = 20 3357.2s 2178.28s
TABLE I: Runtime comparison
C. Performance Comparison
In this section, we compare the performance of the proposed
DRO-DDU with the following benchmarks:
•HEU : Choose a subset of ENs according to demand,
giving priority to areas with higher demand until the
available budget is fully utilized.
•BSPA : Deploy as many ENs as possible within the budget.
•DET : Deterministic EN placement problem in (1).
•SO: Two-stage SO with uniform in-sample distribution.
•DRO-DIU :Ψµ
i,j=Ψσ
i,j=0. The original problem reduces
to a two-stage DRO with exogenous stochastic demand.
The platform aims to optimize the EN placement decision ( y)
before knowing the actual demand. To evaluate the placement
decisions provided by different schemes, we conduct an out-
of-sample test using model (31). For each scheme, we obtain
a placement solution ˆyduring the planning stage. Given ˆyand
the actual uncertainties λ(ˆy), the platform can re-optimize the
workload allocation decision to minimize the total actual c ost.
In our experiment, we generate 1000 scenarios for each scheme
to model the actual mean and variance of demand ( ˆλi(ˆy))
satisfying the conditions in (10). For each scenario, the pl atform
solves the following actual workload allocation problem (L P):
(A) min
x∈RI×J
+,u∈RI
+ρ/summationdisplay
i,jdi,jxi,j+/summationdisplay
isiui (31a)
s.t.(4)−(7) (31b)9
The actual total cost is the sum of the EN placement cost and
actual workload allocation cost, expressed as:
Ca=/summationdisplay
jfjˆyj+ρ/summationdisplay
i,jdi,jxa
i,j+/summationdisplay
isiua
i, (32)
where (xa,ua) is the optimal solution to problem (31). The six
schemes are evaluated and compared based on their average
and worst actual costs over the generated scenarios.
1) Varying variability: Recall that θidenotes the variation
ratio in each area. In Figs. 2(a)-2(b), the DRO-based models
demonstrate increased stability compared to other schemes ,
especially with higher variability θi. Asθincreases, the gap
between these schemes widens due to the signiﬁcant deviatio n
of actual demand from its mean. BSPA ,HEU , and DET do not
consider demand uncertainty. BSPA performs well with smaller
θbut incurs high costs with a higher θdue to overly optimistic
EN placement. However, the selection of ENs may not be on
critical locations, especially within the limited budget. SOis
prone to out-of-sample disappointment as it relies heavily on in-
sample distribution accuracy. In contrast, DRO models cons ider
the worst-case distribution, ensuring robustness in handl ing
various demand patterns during out-of-sample scenarios, a s
seen in Fig.2(b). DRO-DDU model performs signiﬁcantly better
in all settings, highlighting the importance of incorporat ing
decision dependency in uncertainty quantiﬁcation.
0.1 0.2 0.3 0.4 0.5 0.6 0.7 0.8 0.9 1.001000200030004000Actual Total CostDRO-DDU
DRO-DIU
SODET
HEU
BSPA
(a) Average: varying θ0.1 0.2 0.3 0.4 0.5 0.6 0.7 0.8 0.9 1.00200040006000800010000Actual Total CostDRO-DDU
DRO-DIU
SO
DET
HEU
BSPA
(b) Worst: varying θ
0.6 0.8 1.0 1.2 1.4 1.6 1.8
h0500100015002000Actual Total CostDRO-DDU
DRO-DIU
SO
DET
HEU
BSPA
(c) Average: varying h0.6 0.8 1.0 1.2 1.4 1.6 1.8
h0100020003000Actual Total CostDRO-DDU
DRO-DIU
SO
DET
HEU
BSPA
(d) Worst: varying h
Fig. 2: Model comparison
2) Varying EN placement cost: Figs. 2(c)–2(d) demonstrate
the superiority of the proposed DRO-DDU scheme over other
schemes, particularly as the EN placement cost increases. T his
advantage arises from the proposed model’s consideration o f
decision dependency between planning decisions and uncert ain
demand, offering better performance compared to alternati ve
schemes. As the cost parameter increases, the performance o f
solutions obtained from other models monotonically deteri o-
rates. This indicates the critical importance of thoughtfu lly
selecting ENs for planning decisions, particularly when th e
price of EN placement becomes higher. It can be observed
that BSPA exhibits decent performance for smaller h. This
is attributed to the lower h, which allows the platform to be
relatively optimistic, resulting in the utilization of all budgets
for EN placement without careful consideration of critical
infrastructures. However, this blind selection worsens it s perfor-
mance as hincreases. Additionally, DRO-DIU outperforms SO
since SO relies on the accurate knowledge of the distributio nof the historical demand, while the DRO-based model proves
more robust in handling various demand patterns.
3) Choice of decision-dependency: Recall that both impact
factors (Ψi,j) are generated from a decreasing function of the
network delay between area iand EN j, i.e.,e−di,j
b,∀i,j.
We denote the proposed form of ambiguity set by Decrease .
Additionally, we consider other forms commonly used in prac -
tice: (i) ( Uni) uniform impact overall areas ( Ψi,j=1
J); (ii)
(No) No impact: reducing the problem to the traditional DRO
problem with a decision-independent ambiguity set; (iii) ( Max ):
Maximum impact on the closest area only ( minidi,j). Fig.3(a)
illustrates the impact of decision-dependency in an ambigu ity
set, inﬂuencing the optimal solution with varying B. Notably,
NOneglects the impact of EN placement decisions, resulting in
the highest out-of-sample cost among all choices. On the oth er
hand, Max performs well with the limited budget (i.e., fewer
available placed ENs), observing the most signiﬁcant impac t
in its nearest area with the highest trafﬁc ﬂow. However, as
Bbecomes larger, the cost exceeds that of Uni andDecrease
due to disregarding the impacts of EN placement on demand
changes in other areas. Uni assumes uniform impact across
all areas but fails to reﬂect network delays or geographical
locations between ENs and nearby areas, resulting in poorer
performance in most cases. The proposed impact factor is
deﬁned as a decreasing function of the network delay, where bis
the decaying rate of the impact for EN jon all areas. A higher
value of bcorresponds to a slower decaying rate, indicating
uniform impact across all areas. Conversely, a smaller valu e ofb
leads to a faster-decaying rate, implying that EN jonly impacts
its closest area. Thus, the proposed form acts as an intermed iate
state between Max andUni, and the platform can adjust bto
control impact factors according to its budget. Fig.3(b) sh ows
that the cost increases with higher bsince the impact factor
tends to become Uni, failing to reﬂect the network delays.
However, note that the total cost does not always increase
monotonically with an increasing b. An extremely lower bleads
to impact factors similar to Max , performing well only under
speciﬁc conditions, as discussed previously.
60 80 100 120 140 160 180 200
B0500100015002000Actual Total CostUniform
Decrease
Max
No
(a) Varying B20 40 60 80 100 120 140 160 180 200
b300400500600700800Actual Total CostB = 100
B = 120
B = 140B = 160
B = 180
B = 200
(b) Varying b
Fig. 3: Performance comparison with varying DDU sets
V. C ONCLUSION
This paper presented a novel two-stage DRO for optimal EN
placement, aiming to mitigate the impact of demand uncertai nty
on user experience. The main novelty of lies in the integrati on
of a DDU set into the DRO framework to capture the inter-
dependence between demand uncertainty and EN placement
decisions. To compute the exact optimal solution, two efﬁ-
cient algorithms were developed. Numerical results illust rate
the importance and advantages of incorporating endogenous
uncertainties, highlighting the improved performance of t he
proposed model over benchmark schemes.10
REFERENCES
[1] W. Shi, J. Cao, Q. Zhang, Y . Li, and L. Xu, “Edge computing: Vision and
challenges,” IEEE Internet Things J. , vol. 3, no. 5, pp. 637–646, 2016.
[2] A. Rullo, E. Serra, E. Bertino, and J. Lobo, Optimal Placement of Security
Resources for the Internet of Things: Technology, Communic ations and
Computing , 01 2019, pp. 95–124.
[3] R. L. Moglen, J. Barth, S. Gupta, E. Kawai, K. Klise,
and B. D. Leibowicz, “A nexus approach to infrastructure
resilience planning under uncertainty,” Reliability Engineering &
System Safety , vol. 230, p. 108931, 2023. [Online]. Available:
https://www.sciencedirect.com/science/article/pii/S 0951832022005464
[4] D. T. Nguyen, H. T. Nguyen, N. Trieu, and V . K. Bhargava, “T wo-stage
robust edge service placement and sizing under demand uncer tainty,”
IEEE Internet Things J. , vol. 9, no. 2, pp. 1560–1574, 2022.
[5] T. Ouyang, R. Li, X. Chen, Z. Zhou, and X. Tang, “Adaptive u ser-
managed service placement for mobile edge computing: An onl ine
learning approach,” in Proc. IEEE INFOCOM , 2019, pp. 1468–1476.
[6] J. Cheng, D. T. A. Nguyen, L. Wang, D. T. Nguyen, and V . K. Bh argava,
“A bandit approach to online pricing for heterogeneous edge resource
allocation,” Proc. IEEE NetSoft , 2023.
[7] X. Wang, J. Ye, and J. C. Lui, “Decentralized task ofﬂoadi ng in edge
computing: A multi-user multi-armed bandit approach,” in Proc. IEEE
INFOCOM , 2022, pp. 1199–1208.
[8] D. T. A. Nguyen, J. Cheng, N. Trieu, and D. T. Nguyen, “A fai rness-
aware attacker-defender model for optimal edge network ope ration and
protection,” IEEE Netw. Lett. , 2023.
[9] J. Cheng, D. T. Nguyen, and V . K. Bhargava, “Resilient edg e service
placement under demand and node failure uncertainties,” IEEE Trans.
Netw. Serv. Manag. , pp. 1–1, 2023.
[10] F. He and E. Oki, “Backup allocation model with probabil istic protection
for virtual networks against multiple facility node failur es,”IEEE Trans.
Netw. Serv. Manag. , vol. 18, no. 3, pp. 2943–2959, 2021.
[11] X. Li, R. Xiao, M. Pan, and N. Zhao, “Risk-averse investm ent strategy for
mec service provisioning: A data-driven distributionally robust solution,”
IEEE Internet Things J. , vol. 9, no. 23, pp. 24 148–24 160, 2022.
[12] D. Chemodanov, P. Calyam, F. Esposito, R. McGarvey, K. P alaniappan,
and A. Pescap´ e, “A near optimal reliable orchestration app roach for geo-
distributed latency-sensitive sfcs,” IEEE Trans. Netw. Sci. Eng. , vol. 7,
no. 4, pp. 2730–2745, 2020.
[13] P. Zhao and G. D´ an, “A benders decomposition approach f or resilient
placement of virtual process control functions in mobile ed ge clouds,”
IEEE Trans. Netw. Serv. Manag. , vol. 15, no. 4, pp. 1460–1472, 2018.
[14] P. A. Apostolopoulos, E. E. Tsiropoulou, and S. Papavas siliou, “Risk-
aware data ofﬂoading in multi-server multi-access edge com puting envi-
ronment,” IEEE/ACM Trans. Netw. , vol. 28, no. 3, pp. 1405–1418, 2020.
[15] L. Rao, X. Liu, L. Xie, and Z. Pang, “Hedging against unce rtainty: A tale
of internet data center operations under smart grid environ ment,” IEEE
Trans. Smart Grid , vol. 2, no. 3, pp. 555–563, 2011.
[16] J. Chase and D. Niyato, “Joint optimization of resource provisioning in
cloud computing,” IEEE Trans. Serv. Comput. , vol. 10, no. 3, pp. 396–
409, 2015.
[17] D. Vukobratovic, D. Bajovic, K. Anoh, and B. Adebisi, “D istributed
energy trading via cellular internet of things and mobile ed ge computing,”
inProc. IEEE ICC , 2019, pp. 1–7.
[18] E. E. Ivashko, A. A. Ivashko, G. R. Safonov, and A. Tchern ykh, “Cost-
efﬁcient strategy in clouds with spot price uncertainty,” Automation and
Remote Control , vol. 81, pp. 731–745, 2020.
[19] D. T. A. Nguyen, J. Cheng, D. T. Nguyen, and A. Nedi´ c, “Cr owdCache:
A decentralized game–theoretic framework for mobile edge c ontent
sharing,” arXiv preprint arXiv:2304.13246 , 2023.
[20] D. T. A. Nguyen, D. T. Nguyen, and A. Nedich, “Distribute d stochastic
optimization with gradient tracking over time-varying dir ected networks,”
Proc. IEEE Asilomar Conf. , 2023.
[21] ——, “Accelerated ab/push-pull methods for distributed optimization over
time-varying directed networks,” IEEE Trans. Control Netw. , 2023.
[22] A. Pr´ ekopa, Stochastic programming . Springer Science & Business
Media, 2013, vol. 324.
[23] A. Ben-Tal, L. El Ghaoui, and A. Nemirovski, Robust optimization .
Princeton university press, 2009, vol. 28.
[24] B. L. Gorissen, ˙I. Yanıko˘ glu, and D. den Hertog, “A practical guide to
robust optimization,” Omega , vol. 53, pp. 124–137, 2015.
[25] P. Mohajerin Esfahani and D. Kuhn, “Data-driven distri butionally robust
optimization using the wasserstein metric: performance gu arantees and
tractable reformulations,” Mathematical Programming , vol. 171, no. 1-2,
pp. 115–166, 2018.[26] E. Delage and Y . Ye, “Distributionally robust optimiza tion under mo-
ment uncertainty with application to data-driven problems ,”Operations
research , vol. 58, no. 3, pp. 595–612, 2010.
[27] L. Li, D. Shi, R. Hou, X. Li, J. Wang, H. Li, and M. Pan, “Dat a-driven
optimization for cooperative edge service provisioning wi th demand
uncertainty,” IEEE Internet Things J. , vol. 8, no. 6, pp. 4317–4328, 2020.
[28] Z. Zhang, S. Lin, M. Dedeoglu, K. Ding, and J. Zhang, “Dat a-driven
distributionally robust optimization for edge intelligen ce,” in Proc. IEEE
INFOCOM . IEEE, 2020, pp. 2619–2628.
[29] Z. Li and P. Chen, “Risk-aware distributionally robust optimization
for mobile edge computation task ofﬂoading in the space–air –ground
integrated network,” Sensors , vol. 23, no. 12, p. 5729, 2023.
[30] F. Luo and S. Mehrotra, “Distributionally robust optim ization with
decision dependent ambiguity sets,” Optimization Letters , vol. 14, pp.
2565–2594, 2020.
[31] X. Yu and S. Shen, “Multistage distributionally robust mixed-integer
programming with decision-dependent moment-based ambigu ity sets,”
Mathematical Programming , vol. 196, no. 1-2, pp. 1025–1064, 2022.
[32] ——, “Multistage distributionally robust mixed-integ er programming
with decision-dependent moment-based ambiguity sets,” Mathematical
Programming , vol. 196, no. 1-2, pp. 1025–1064, 2022.
[33] J. Fortuny-Amat and B. McCarl, “A representation and ec onomic interpre-
tation of a two-level programming problem,” J. Oper. Res. Soc. , vol. 32,
no. 9, pp. 783–792, 1981.
[34] “Equinix instance,” https://www.equinix.com/data- centers/americas-colocation,
Access June 2023.
[35] “Global ping statistics,” https://wondernetwork.co m/pings, Access June
2023.
[36] “Cvx,” http://cvxr.com/cvx/, Access June 2023.
[37] “Gurobi solver,” https://www.gurobi.com/, Access Ju ne 2023.
APPENDIX
A. Budget-spending priority algorithm (BSPA)
This section introduces a budget-spending priority bench-
mark where the platform maximizes the use of these limited
funds for EN placement. This scheme is equivalent to solving
the following optimization problem: (33):
max
y/summationdisplay
jfjyj (33a)
s.t/summationdisplay
jfjyj≤B. (33b)
The obtained EN placement strategy ( y) under this scheme will
serve as an input to the actual workload allocation model in
(31). The actual total operation cost is counted as the sum of
the actual workload allocation cost and EN placement cost.
B. Heuristic algorithm (HEU)
This section presents the heuristic scheme ( HEU ). The
platform choose a subset of ENs according to demand, giving
priority to areas with higher demand until the available bud get
is fully utilized. Algorithm 2 summarizes the HEU scheme as
below.
Algorithm 2 Heuristic EN placement algorithm (HEU)
1:Initialization: budget B, demand λi, network delay di,j
2:repeat
3: Sortλiin decreasing order.
4: For each area i, select the nearest places ˜jand calculate
the EN placement cost CHEU=/summationtext
˜jf˜j˜y˜j.
5:until B -CHEU≤0
6:Output: EN placement decision (˜yj).11
C. Two-stage SO with uniform in-sample distribution (SO)
This section presents a two-stage stochastic optimization
with uniform in-sample distribution, neglecting decision s-
dependency in the demand function. In this stochastic model , it
is assumed that demand λifollows a uniform distribution (i.e.,
pn=1
N) , with each scenario being assigned equal weight.
For each scenario n, letxn
i,janduibe the amount of allocated
workload from AP ito ENj, the amount of unmet demand at
APirespectively. The objective of this SOmodel is to optimize
the expected cost over all scenarios:
min
y,x,u/summationdisplay
jfjyj+N/summationdisplay
n=1pn/bracketleftbigg
ρ/summationdisplay
i,jdi,jxn
i,j+/summationdisplay
isiun
i/bracketrightbigg
. (34a)
s.t/summationdisplay
jfjyj≤B;/summationdisplay
jyj≥Kmin(34b)
un
i+/summationdisplay
jxn
i,j=λn
i,∀i,n (34c)
0≤xn
i,j≤Ci,jyj,∀i,j,n (34d)
/summationdisplay
jdi,jxn
i,j
λn
i≤∆i,∀i,n (34e)
y∈ {0,1}J,u∈RI×N
+,x∈RI×J×N
+ (34f)
This resulting problem is a large scale mixed integer linear
programming problem (MILP), which can be solved by well-
known Sample average approximation (SAA) algorithm.
D. Two-stage DRO with exogenous demand (DRO-DIU)
This section presents a two-stage distributionally robust
optimization with exogenous stochastic demand, neglectin g
decisions-dependency in the demand function. The resultin g
problem can be expressed as:
(P1) min
y/summationdisplay
jfjyj+max
p∈Umin
x,uEp/bracketleftbigg
ρ/summationdisplay
i,jdi,jxi,j+/summationdisplay
isiui/bracketrightbigg
(35a)
s.t.(2),(3),(7)
Ω2(y,λ) =/braceleftbigg
0≤xi,j≤Ci,jyj,∀i,j (35b)
ui+/summationdisplay
jxi,j=λi,∀i (35c)
/summationdisplay
jdi,jxi,j≤∆iλi,∀i/bracerightbigg
. (35d)
The DRO-DIU problem remains a trilevel min-max-min opti-
mization problem, similar to the DRO-DDU model, but with
a key difference: in DRO-DIU , the placement decision does
not inﬂuence demand, leading to the setting of impact factor s
at zero. This issue can also be addressed using an existing
algorithm by merely assigning Ψµ
i,j=Ψσ
i,j=0,∀i,j.
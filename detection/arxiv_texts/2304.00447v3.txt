S. Staton, C. Vasilakopoulou (Eds.):
Applied Category Theory 2023 (ACT2023)
EPTCS 397, 2023, pp. 210–225, doi:10.4204/EPTCS.397.13Structured and Decorated Cospans from the Viewpoint of
Double Category Theory
Evan Patterson
Topos Institute
evan@epatters.org
Structured and decorated cospans are broadly applicable frameworks for building bicategories or
double categories of open systems. We streamline and generalize these frameworks using central
concepts of double category theory. We show that, under mild hypotheses, double categories of
structured cospans are cocartesian (have finite double-categorical coproducts) and are equipments.
The proofs are simple as they utilize appropriate double-categorical universal properties. Maps
between double categories of structured cospans are studied from the same perspective. We then
give a new construction of the double category of decorated cospans using the recently introduced
double Grothendieck construction. Besides its conceptual value, this reconstruction leads to a natural
generalization of decorated cospans, which we illustrate through an example motivated by statistical
theories and other theories of processes.
1 Introduction
A central theme of applied category theory is the mathematical modeling of open systems: physical or
computational systems that interact with each other along boundaries or interfaces. Within this tradition,
mathematical models of open systems are most commonly based on spans or cospans, an idea now at least
twenty-five years old [17, 22]. Two general frameworks for building open systems using cospans have
emerged: structured cospans [5, 11] and decorated cospans [6, 12]. Complementing the mathematical
theory, structured cospans have been implemented in the programming framework Catlab.jl and used to
create software tools for epidemiological modeling based on open Petri nets [7, 18] and open stock and
flow diagrams [3]. Structured and decorated cospans are now essential tools of applied and computational
category theory.
The categorical description of open systems based on cospans has evolved over time. Some early
works studied categories of cospans, which compose by taking pushouts. Because pushouts are defined
only up to isomorphism, the morphisms of these categories must be isomorphism classes of cospans.
This is unfaithful to implementation, where one always computes with representatives of an equivalence
class, rather than the equivalence class itself. More fundamentally, systems generally have morphisms of
their own—for example, Petri nets come with homomorphisms between them—and these are lost if open
systems are taken to be morphisms, rather than objects, of a category.
Both problems are solved by passing from categories to a two-dimensional categorical structure, of
which the best-studied are bicategories. Yet this presents its own difficulties. In addition to composing
along their boundaries, open systems generally admit a symmetric monoidal product that juxtaposes
two of them “in parallel.” One then needs to construct not just a bicategory but a symmetric monoidal
bicategory of open systems. Monoidal bicategories are inherently complicated because they are properly
a three-dimensional categorical structure (namely, tricategories with one object). It was noticed that rather
than constructing a monoidal bicategory directly, it can be easier to first construct a monoidal doubleEvan Patterson 211
category and then obtain the monoidal bicategory from the globular cells of the double category [16, 24].
But since a double category is at least as good as a bicategory, one may as well consider double categories
of open systems. That is now what is typically done. In recent work, both structured cospans [5] and
decorated cospans [6] have been assembled into symmetric monoidal double categories.
The thesis of this paper is that viewing open systems as double categories is not merely a technical
device or a means to constructing bicategories, but a source of mathematical insights that cannot be
obtained at the 1-categorical or even bicategorical levels. To understand why, consider the philosophy
behind the modern theory of double categories, as developed principally by Grandis and Paré, beginning
with an account of double limits and colimits [15], and exposited recently by Grandis [14]. Another
important expression of this viewpoint is Shulman’s theory of equipments [23].
Adouble category is succinctly defined as a pseudocategory in Cat.1Thus, a double category D
consists of a category of objects, D0; a category of morphisms, D1; source and target functors, src,tgt :
D1⇒ D0; and external composition and identity operations, ⊙: D1× D0 D1→ D1andid : D0→ D1,
which obey the category axioms up to coherent globular isomorphisms in D1. The objects of the category
D0are called the objects of the double category D, the morphisms of D0thearrows of D, the objects of
D1theproarrows of D, and the morphisms of D1thecells of D. In particular, on this definition, the
proarrows of a double category are first and foremost the objects of a category, which happen to have a
source and target. In important examples of double categories, such as those of spans, cospans, relations,
matrices, profunctors, and bimodules, the proarrows are best thought of in precisely this way, as objects
that happen to have a source and target. Crucially, this also applies to double categories of open systems,
which are systems that happen to have boundaries. Shulman calls such double categories (or rather their
underlying bicategories) “ Mod-like” after the bicategory of bimodules between rings [23].
Whether one thinks of proarrows primarily as objects or morphisms may seem a small matter of
perspective, but it gains significance through the modern theory of double categories, where proarrows
play the role of objects in all of the main concepts, such as natural transformations, limits and colimits,
commas, adjunctions, and the Grothendieck construction. The theory is thus well suited to describe open
systems, including those based on spans and cospans. In this paper, we study structured and decorated
cospans from the viewpoint of double category theory.2
After reviewing their structure as a double category, we show that structured cospans form a cocartesian
double category, a statement that is stronger yet easier to prove than being a symmetric monoidal double
category. We also show that structured cospans are an equipment, so altogether form a cocartesian
equipment (Section 2). Here we see the advantages of double-categorical universal properties. We then
turn to decorated cospans (Section 3), reconstructing the double category of decorated cospans as an
application of the double Grothendieck construction [10]. As a byproduct, we also generalize decorated
cospans in several directions, which we illustrate through an example motivated by categorical statistics.
2 Structured Cospans as a Cocartesian Equipment
Structured cospans represent open systems as cospans whose feet are restricted compared with the apex
[5, 11]. A simple example is open graphs with boundaries restricted to be discrete graphs. Compared
with other techniques, structured cospans have the advantage of being particularly easy to use, as the
1Some authors call this structure a pseudo double category but since all double categories in this paper are pseudo, we prefer
to omit the adjective. Likewise, our double functors are pseudo by default. For complete definitions of these concepts, see [14].
2This paper synthesizes a series of blog posts by the author: “Grothendieck construction for double categories” (2022),
“Decorated cospans via the Grothendieck construction” (2022), “Structured cospans as a cocartesian equipment” (2023).212 Structured and Decorated Cospans via Double Category Theory
hypotheses for the construction are often easy to check in examples. However, proofs that the construction
itself works are more involved because the mathematical object being constructed—a symmetric monoidal
double category—is complicated, involving a large number of coherence conditions. Three different
correctness proofs for structured cospans have been given: the first one by direct but lengthy verification
of the axioms [9] and two later ones by more conceptual routes that however import other sophisticated
concepts. These concepts are pseudocategories in the 2-category of symmetric monoidal categories [5]
and symmetric monoidal bifibrations [6].
Such difficulties can be bypassed by viewing structured cospans in a different light, as forming a
cocartesian double category, even a cocartesian equipment. Just as a cartesian or cocartesian category
can be given the structure of a symmetric monoidal category by making a choice of finite products or
coproducts, so can a cartesian or cocartesian double category be given the structure of a symmetric
monoidal double category. It is, however, much easier to prove cocartesianness than to directly construct
the symmetric monoidal product. This circumstance highlights a recurring tension in category theory:
that between universal properties and algebraic structures. Although algebraic structure is arguably more
flexible, universal properties, when they can be found, are extremely powerful because many consequences
and coherences flow directly from the defining existence and uniqueness statement, which is often easy to
verify in particular situations. Both cocartesian double categories and equipments are defined by universal
properties, whereas a symmetric monoidal product is a structure on a double category.
2.1 Double Category of Structured Cospans
We begin by reviewing the definition of structured cospans and their structure as a double category [5].
Proposition 2.1. LetL:A→Xbe a functor into a category Xwith pushouts. Then there is a double
category L Csp(X)that has
•as objects, the objects of A;
•as arrows, the morphisms of A;
•as proarrows a7 →b,L-structured cospans with feet aandb, which are cospans in Xof the form
La→x←Lb;
•as cellsa b
c dxp
f g
yp,morphisms of L-structured cospans with foot maps fandg, which are mor-
phisms of cospans in Xof the form
L(a) x L(b)
L(d) y L(c)L f h Lg.
Composition in the categories L Csp(X)0and L Csp(X)1is by composition in Aand Csp(X)1, respectively,
and external composition in L Csp(X)is given by that in Csp(X), i.e., by pushout in X.
We take this result as given. The proof is straightforward because the double category structure of
L-structured cospans is inherited from that of cospans in X. For details, see [5, Theorem 2.3].
2.2 Cocartesian Equipment of Structured Cospans
We now prove that structured cospans form an equipment, then a cocartesian double category, and hence
a cocartesian equipment. The reader may find it helpful to review the definitions of cocartesian doubleEvan Patterson 213
categories and equipments in Appendix A.
Proposition 2.2. LetL:A→Xbe a functor into a category Xwith pushouts. Then the double category
of L-structured cospans is an equipment.
Proof. To restrict an L-structured cospan (c,Lc→y←Ld,d)along arrows f:a→candg:b→dinA,
simply restrict the underlying cospan in Xalong L fandLg, using the fact that Csp(X)is an equipment
(Example A.3). The universal property holds as a special case of the universal property in Csp(X):
La′x Lb′
La Lb
Lc y Ldℓ rLg′L f′
h
L f Lg=La′x Lb′
La y Lb
Lc y LdL fL f′Lg′
Lg
ℓ rℓ◦L f r◦Lgh
For the double category of L-structured cospans to be cocartesian, extra assumptions are needed.
Clearly, the category Amust itself have finite coproducts. Also, these must preserved by the functor
L:A→X. The latter is often is easy to verify in examples by exhibiting Las a left adjoint.
Theorem 2.3. Suppose Ais a category with finite coproducts, Xis a category with finite colimits, and
L:A→Xis a functor that preserves finite coproducts. Then the double category of L-structured cospans
is cocartesian, hence also a cocartesian equipment.
Proof. Because the categories AandXhave finite coproducts, there are canonical comparison maps
La,a′:= [L(ιa),L(ιa′)]:L(a)+L(a′)→L(a+a′), a,a′∈A,
andL0:=!L(0): 0X→L(0A). For any maps f:a→candf′:a′→cinA, the comparisons satisfy
L(a)+L(a′) L(a+a′)
L(c)[L f,L f′] L([f,f′])La,a′
as shown by precomposing both sides with the coprojections ιLaandιLa′to obtain L fandL f′, respectively.
Since by assumption Lpreserves finite coproducts, the comparisons La,a′andL0are, in fact, isomorphisms.
We now prove that the categories underlying L Csp(X)are cocartesian. By assumption, the category
L Csp(X)0=Ahas finite coproducts. Since the comparison L0is an isomorphism, L(0A)is initial in X
and the initial L-structured cospan is (0A,idL(0A),0A). Furthermore, the coproduct of two L-structured
cospans (a,La→x←Lb,b)and(a′,La′→x′←Lb′,b′), denoted
(a+a′,L(a+a′)→x+x′←L(b+b′),b+b′),
is obtained from the pointwise coproduct of cospans in Xby restriction along the inverse comparisons
L−1
a,a′andL−1
b,b′. The universal property of coproducts in L Csp(X)1then takes the form:
L(a+a′) L(a)+L(a′) x+x′L(b)+L(b′) L(b+b′)
L(c) L(c) y L(d) L(d)L−1
a,a′ L−1
b,b′
L([f,f′]) [h,h′] [L f,L f′] [Lg,Lg′] L([g,g′]).214 Structured and Decorated Cospans via Double Category Theory
We have shown that both categories underlying L Csp(X)have finite coproducts, and it is immediate that
the source and target functors preserve them.
Finally, the comparison cells in L Csp(X)interchanging finite coproducts with external composition
and identity (Definition A.1) are all isomorphisms because they are defined by the same maps in Xas the
comparison cells in Csp(X), which we already know to be isomorphisms (Example A.3).
As a corollary, every double category of L-structured cospans satisfying the hypotheses of the theorem
can be given the structure of a symmetric monoidal double category, by making choices of coproducts in
both underlying categories. This follows abstractly because any cocartesian object in a 2-category with
finite 2-products is a symmetric pseudomonoid in a canonical way [24, Remark 2.11]. Cocartesian double
categories are cocartesian objects in the 2-category Dbl, whereas symmetric monoidal double categories
are symmetric pseudomonoids in Dbl.
2.3 Maps Between Structured Cospan Double Categories
We complete the essential theory of structured cospans by showing how to construct maps between
cocartesian equipments of structured cospans. These maps are cocartesian double functors (Definition A.4).
Compared with the original results [5, Theorems 4.2 and 4.3], the theorem below is slightly more general,
treating the lax case as well as the pseudo one, and slightly stronger, yielding cocartesian double functors
instead of symmetric monoidal ones.
Theorem 2.4. Suppose we have a diagram in Catof the form
A X
A′X′L
L′F1 F0α ,
where the categories XandX′have pushouts. Then there is a lax double functor F:L Csp(X)→L′Csp(X′)
that has underlying functor F0=F0and acts on proarrows as
(a,L(a)ℓ− →xr← −L(b),b)7→(F0(a),L′(F0(a))αa− →F1(L(a))F1(ℓ)− − − → F1(x)F1(r)← − − − F1(L(b))αb← −L′(F0(b)),F0(b))
and on cells as
L(a) x L(b)
L(a′) x′L(b′)ℓ r
L f
ℓ′r′Lg h 7→L′(F0(a)) F1(x) L′(F0(b))
L′(F0(a′)) F1(x′) L′(F0(b′))F1(ℓ)◦αa F1(r)◦αb
L′(F0(f))
F1(ℓ′)◦αa′ F1(r′)◦αb′L′(F0(g)) F1(h) .
Moreover, Fis a pseudo double functor whenever F1preserves pushouts and αis a natural isomorphism.
Suppose further that all of the categories in question have finite coproducts and that LandL′preserve
them, so that both double categories L Csp(X)and L′Csp(X′)are cocartesian. Then the lax double functor
Fis cocartesian if and only if both functors F0andF1are cocartesian. In particular, Fis a cocartesian
pseudo double functor whenever F0preserves finite coproducts, F1preserves finite colimits, and αis a
natural isomorphism.Evan Patterson 215
As a substantial application of the theorem, we have formulated the generalized Lokta-V olterra model
as a cocartesian lax double functor from open signed graphs to open parameterized dynamical systems [1].
We prove the theorem by decomposing the lax double functor Finto three simpler ones. Taken
together, the lemmas also implicitly give formulas for the laxators and unitors of F, which we omitted in
the theorem statement.
Lemma 2.5. LetXbe a category with pushouts and let A0F0− →AL− →Xbe functors. Then there is a strict
double functor F0 Csp(X):L◦F0 Csp(X)→L Csp(X)given by F0on objects and arrows and by the identity
on the cospans and maps of cospans underlying proarrows and cells.
Furthermore, the double functor F0 Csp(X)is cocartesian whenever A0,A, and Xhave finite coproducts
and the functors L and F 0preserve them.
The proof is immediate from the definitions. The next lemma is slightly more involved.
Lemma 2.6. LetXandX′be categories with pushouts and let AL− →XF1− →X′be functors. Then there is a
normal lax double functor L Csp(F1):L Csp(X)→F1◦L Csp(X′)that is the identity on objects and arrows
and acts on proarrows and cells by postcomposing the underlying diagrams in Xwith F 1:X→X′.
The laxators are given by the universal property of pushouts in X′, and L Csp(F1)is pseudo if and
only if F1preserves pushouts. Furthermore, when A,X, and X′have finite coproducts and Lpreserves
them, L Csp(F1)is cocartesian if and only if F 1is cocartesian.
Proof. The proposed lax double functor L Csp(F1):L Csp(X)→F1◦L Csp(X′)acts on cospans and maps
of cospans in exactly the same way as the lax double functor Csp(F1): Csp(X)→ Csp(X′)reviewed in
Example A.5. The proof thus carries over directly.
In the final lemma, we isolate the maps between structured cospan double categories induced by
natural transformations between the structuring functors.
Lemma 2.7. LetXbe a category with pushouts and let α:L′⇒L:A→Xbe a natural transformation.
Then there is a lax double functor α∗:L Csp(X)→L′Csp(X)that acts
•on objects and arrows, as the identity;
•on proarrows a7 →b, by restricting the underlying cospan L(a)→x←L(b)along the components
αa:L′(a)→L(a)andαb:L′(b)→L(b);
•on cellsa b
c dmp
f g
np, by pasting the naturality squares for f and g:
L′(a) L(a) x L(b) L′(b)
L′(c) L(c) y L(d) L′(d)L(f)αa
L′(f)
αcαb
L(g) h L′(g)
αd.
The laxator α∗
m,n:α∗(m)⊙α∗(n)→α∗(m⊙n)for proarrows m= (a,L(a)→x←L(b),b)andn=
(b,L(b)→y←L(c),c)has apex map given by the universal property of the pushout over L′(b):
y
L′(b) L(b) x+L′(b)y x+L(b)y
xιxι′
xι′
yιy
αb .216 Structured and Decorated Cospans via Double Category Theory
The unitor α∗
a: id′
a→α∗(ida)for object a∈Ahas apex map αa:L′(a)→L(a). The lax double functor
α∗is pseudo whenever αis a natural isomorphism, and it is automatically cocartesian whenever the
structured cospan double categories are cocartesian.
Proof. The laxators and unitors obey the coherence axioms by the uniqueness part of the universal
property. Importantly, the last statement about cocartesianness holds because natural transformations
automatically commute with coproducts. That is, if AandXhave finite coproducts, then, using the
notation of the proof of Theorem 2.3, the following diagrams commute for all objects a,b∈A:
L′(a)+L′(b) L′(a+b)
L(a)+L(b) L(a+b)L′
a,b
αa+αb αa+b
La,bandL′(0A)
0X
L(0A)L′
0
L0α0.
Restricting along the components of αthus commutes with restricting along the inverse comparison maps
and so also commutes with coproducts of structured cospans.
Proof of Theorem 2.4. Using the three lemmas, the lax double functor F:L Csp(X)→L′Csp(X′)is
realized as the composite
F:L Csp(X)L Csp(F1)− − − − − → F1◦L Csp(X′)α∗
− → L′◦F0 Csp(X′)F0Csp(X′)− − − − − − → L′Csp(X′).
3 Decorated Cospans as a Double Grothendieck Construction
Decorated cospans represent open systems as cospans with apexes decorated by extra data [6, 12]. For
example, open dynamical systems comprise a cospan of finite sets along with a dynamical system whose
set of state variables is the apex set [7]. In contrast to structured cospans, the symmetric monoidal product
of decorated cospans need not satisfy a universal property such as cocartesianness. Decorated cospans are
therefore applicable in certain situations where structured cospans are not, at the expense of requiring
more data to construct.
The Grothendieck constructionRFof a functor F:A→Catcan be thought to decorate the objects
ofAwith data from F, inasmuch as the objects ofRFconsist of an object a∈Atogether with an object
x∈F(a)(the “decoration”). So one might suppose that decorated cospans arise from a Grothendieck
construction. For that to be the case, the cospans being decorated must be the objects of a category.
Fortunately, as we emphasized in Section 1, that is precisely how cospans are seen by the modern theory
of double categories. In this section, we reconstruct and generalize the double category of decorated
cospans using the double-categorical analogue of the Grothendieck construction.
3.1 Double Grothendieck construction
In their study of double fibrations [10], Cruttwell, Lambert, Pronk, and Szyld introduced a Grothendieck
construction for double categories, taking as input a lax double functor into Span(Cat).3
3In its most general form, the double Grothendieck construction takes as input a lax double pseudo functor into Span(Cat),
analogous to how the Grothendieck construction takes a pseudo functor into Cat. For simplicity, we eschew this aspect but see
[10, Definition 3.12].Evan Patterson 217
Before stating the construction, we unpack some of the considerable amount of data contained in a lax
double functor F: A→ Span(Cat). First, there are natural transformations
σ: apex◦F1⇒F0◦src : A1→Cat and τ: apex◦F1⇒F0◦tgt : A1→Cat
whose components are the functors σmandτmdefined by
F1(m) =:
F0(a) =ftL(F1(m))σm← −apex(F1(m))τm− →ftR(F1(m)) = F0(b)
for each proarrow m:a7 →bin A. The naturality squares for σandτare precisely the maps of spans
F1(α) =
F0(a) ftL(F1(m)) apex(F1(m)) ftR(F1(m)) F0(b)
F0(c) ftL(F1(n)) apex(F1(n)) ftR(F1(n)) F0(d)apex(F1(α))σm
F0(f)
σnftL(F1(α))τm
τnftR(F1(α)) F0(g)

for each cella b
c dmp
f g
npα in A. Writing Fm,n:F(m)⊙F(n)→F(m⊙n)andFa: idFa→F(ida)for the
laxators and unitors of F, there are also natural families of functors
Φm,n:=apex(Fm,n): apex (F(m))τm×σnapex(F(n))→apex(F(m⊙n))
andΦa:=apex(Fa):F(a)→apex(F(idx)), indexed by proarrows am7 →bn7 →cand objects ain A.
Using this notation, the double Grothendieck construction [10, Theorem 3.51] appears as:
Theorem 3.1. Given a lax double functor F: A→ Span(Cat), there is a double categoryRF, thedouble
Grothendieck construction ofF, with underlying categories (RF)0=RF0and(RF)1=R(apex◦F1).
Explicitly, the double categoryRF has
•as objects, pairs (a,x)where a is an object of Aand x is an object of F (a);
•as arrows (a,x)→(b,y), pairs (f,φ)where f:a→bis an arrow of Aandφ:F(f)(x)→yis a
morphism of F (b);
•as proarrows (a,x)7 →(b,y), pairs (m,s)where m:a7 →bis a proarrow of Aandsis an object of
apex(F(m))such that σm(s) =x and τm(s) =y;
•as cells(a,x) (b,y)
(c,w) (d,z)(m,s)p
(f,φ) (g,ψ)
(n,t)p, pairs (α,ν)such thata b
c dmp
f g
npα is a cell in Aandν: apex (F(α))(s)→t
is a morphism of apex(F(n))such that σn(ν) =φandτn(ν) =ψ.
External composition and identities inRF are as follows.
•The composite of proarrows (a,x)(m,s)7 →(b,y)(n,t)7 →(c,z)is(m⊙n,Φm,n(s,t)):(a,x)7 →(b,y).
•The external composite of cells is
(a,x) (b,y) (c,z)
(a′,x′) (b′,y′) (c′,z′)(m,s)p(n,t)p
(m′,s′)p(f,φ)
(n′,t′)p(g,ψ) (h,η) (α,µ) (β,ν) :=(a,x) (c,z)
(a′,x′) (c′,z′)(f,φ) (h,η)(m⊙n,Φm,n(s,t))p
(m′⊙n′,Φm′,n′(s′,t′))p(α⊙β,Φm′,n′(µ,ν)) .218 Structured and Decorated Cospans via Double Category Theory
•The identity proarrow at object (a,x)is(ida,Φa(x)).
•The identity cell at arrow (f,φ):(a,x)→(b,y)is(idf,Φb(φ)).
Moreover, there is a canonical projection πF:RF→ A, which is a strict double functor.
3.2 A Modular Reconstruction of Decorated Cospans
To define decorated cospans, we apply the double Grothendieck construction in the case that the base
double category Ais a double category of cospans. Specifically, let Abe a category with pushouts and let
F: Csp(A)→ Span(Cat)be a lax double functor. Then the double category of F-decorated cospans ,
denoted F Csp, is the double Grothendieck constructionRF.
This notion of decorated cospan is more general than the established one [6, §2] in two different ways.
First, the decorations assigned to a cospan may depend on the whole cospan, not just on its apex. Second,
the feet of the cospans receive their own decorations, which can be extracted from the cospan decorations
using the transformations denoted σandτabove. For two decorated cospans to be composable, not
only must the feet of the cospans be compatible, so must be the decorations on the feet. We will see an
application that takes advantage of this extra generality shortly. Before that, we show how to recover the
original notion of decorated cospan based on lax monoidal functors into (Cat,×).
Corollary 3.2. LetAbe a category with finite colimits and let F:(A,+)→(Cat,×)be a lax monoidal
functor. Then there is a double category F Cspthat has
•as objects, the objects of A;
•as arrows, the morphisms of A;
•as proarrows a7 →b,F-decorated cospans with feet aandb, which are cospans p= (a→m←b)
inAtogether with a decoration s∈F(m);
•as cellsa b
c d(p,s)p
f g
(q,t)pwhere p= (a→m←b)andq= (c→n←d),morphisms of F-decorated
cospans with foot maps f and g, which are morphisms of cospans in Aof the form
a m c
b n df gh
together with a decoration morphism ν:F(h)(s)→t in F (n).
The composite of proarrows a(p,s)7 →b(q,t)7 →c, where p= (a→m←b)andq= (b→n←c), is the proarrow
(p⊙q,Φm,n(s,t)), where the cospan p⊙qis given by pushout in Aand the functor Φm,nis the composite
Φm,n:F(m)×F(n)Fm,n− − → F(m+n)F([ιm,ιn])− − − − − → F(m+bn).
The identity proarrow at a ∈Ais(ida,Φa), where Φais the composite 1F0− →F(0)F(!)− − → F(a).
Moreover, there is a canonical projection πF:F Csp→ Csp(A), which is a strict double functor.
Proof. We construct the double category F Cspin a modular fashion by applying the double Grothendieck
construction to a lax double functor ˜F: Csp(A)→ Span(Cat)that is itself the composite of three simpler
lax double functors:
˜F: Csp(A)Apex− − − → B(A,+)BF− − → B(Cat,×)Apex∗− − − → Span(Cat).Evan Patterson 219
Let us explain each of these. First, any monoidal category (C,⊗,I)can be regarded as a double category D
whose category of objects is trivial, D0=1; whose category of morphisms is D1=C; and whose external
composition and identity are the monoidal product and unit [14, §3.3.4]. Lax monoidal functors then induce
lax double functors between such degenerate double categories, and monoidal natural transformations
induce natural transformations of those, so altogether there is a 2-functor B:MonCat lax→Dbl lax. In
particular, the lax monoidal functor F:(A,+)→(Cat,×)induces a lax double functor BF.
Next, given a category Awith finite colimits, the lax double functor Apex : Csp(A)→ B(A,+)has
the unique map Apex0:A!− →1between categories of objects and the functor Apex1:=A{•→•←•}apex− − → A
between categories of morphisms. The laxators
Apexp,q: Apex (p)+Apex(q) =m+n[ιm,ιn]− − − → m+bn=Apex(p⊙n)
for proarrows p= (a→m←b)andq= (b→n←c), and the unitors Apexa: 0!− →afor objects a∈A,
are all given by the universal properties of the colimits involved.
Finally, given a category Cwith finite limits, the double functor Apex∗: B(C,×)→ Span(C)has
underlying functors (Apex∗)0:1→Cpicking out the terminal object 1ofCand(Apex∗)1:C→C{•←•→•}
sending each object c∈Cto the span 1!← −c!− →1. This double functor is pseudo because products are
isomorphic to pullbacks over the terminal object. By making reasonable choices of products and pullbacks,
we can even assume that the double functor is strict.
The double category F Cspis precisely the double Grothendieck construction of ˜F(Theorem 3.1).
This follows from the formulas for the laxators and unitors of a composite lax double functor [14, Equation
3.63]. In terms of the notation in the corollary statement, the laxators and unitors of the composite ˜Fare
˜Fp,q=Apex∗(ΦApex(p),Apex(q))and ˜Fa=Apex∗(Φa).
This result was first proved in [6, Theorem 2.1]. Our reconstruction solves a lingering conceptual
puzzle about the composition law for decorated cospans: why does it involve two operations, instead
of just one? As the proof shows, the reason is that decorated cospans implicitly use a composite of lax
double functors. Specifically, laxators from the lax monoidal functor Fcombine with laxators from the
lax double functor Apex to give the distinctive formula for composing decorations of decorated cospans.
3.3 Application: Double Category of Process Theories
An early and recurring theme of applied category theory is the mathematical modeling of physical or
computational processes by monoidal categories, often with extra structure [4]. To describe a process
syntactically, one can define, say by generators and relations, a small category Twith the relevant structure,
and then choose a particular morphism pinT. The category Tdefines the basic material for the process
and the morphism pspecifies the process itself. Regarding the category Tas a theory in the sense of
the categorical logic, the pair (T,p)might be called a theory of a process , orprocess theory for short.
For example, in the author’s thesis [20], a statistical theory is defined to be a small Markov category
[13] equipped with extra linear algebraic structure, together with a distinguished morphism p:θ→x
representing the data generating process for a statistical model.
To be more precise, process theories are defined relative to a concrete 2-category , by which we
mean a 2-category Cequipped with a 2-functor |−|:C→Cat, giving the underlying category ofC.
This 2-functor will often satisfy additional properties, such as being locally faithful, but we need not
assume that. Given a morphism F:X→Yin a concrete 2-category, we will write F(x):=|F|(x)and
F(f):=|F|(f)for the action of the underlying functor of Fon the objects and morphisms of |X|. As220 Structured and Decorated Cospans via Double Category Theory
an example, statistical theories are based on the concrete 2-category of small linear algebraic Markov
categories, structure-preserving monoidal functors, and monoidal natural transformations [20].
Process theories can be composed once their underlying theories are made open. In the context of
statistics, this composition corresponds to making hierarchical statistical models, where samples from one
model become parameters of the next. To express this mathematically, we construct a double category of
process theories. We need two main ingredients: the double Grothendieck construction, and an extension
of the familiar construction of comma categories to a lax double functor. We now review the latter, which
is interesting in its own right.
There is a lax double functor Comma : Csp(Cat)→ Span(Cat)that is the identity on objects and
arrows and sends a cospan of categories (Ai− →Xo← −B)to the span of categories (AπA← −i/oπB− →B)
comprising the comma category i/owith its canonical projections.4It acts on maps of cospans as
A X B
A′X′B′i o
H F K
i′o′7→A i/o B
A′i′/o′B′πA πB
H ˜F K
πA′ πB′,
where the functor denoted ˜Fsends an object (a,i(a)f− →o(b),b)of the comma category i/oto
(H(a),i′(H(a)) = F(i(a))F(f)− − → F(o(b)) = o′(H(b)),H(b))
and a morphism (h,k)to(H(h),K(k)).
To describe the laxators, let m= (Ai− →Xo← −B)andn= (Bj− →Yp← −C)be composable cospans of
categories and let ιX:X→X+BYandιY:Y→X+BYbe the inclusions into the pushout of categories.
Then the apex map of the laxator Comma m,nis the functor
(i/o)×B(j/p)→(ιX◦i)/(ιY◦p)
that sends a pair of objects (a,f,b)and(b,g,c)with o(b) =j(b)to(a,ιY(g)◦ιX(f),c), which is well-
defined since ιX(o(b)) =ιY(j(b))inX+BY. This functor sends a pair of maps (h,k)and(k,ℓ)to the
map(h,ℓ). Finally, given a category A, the apex map of the unitor Comma Ais the functor A→1A/1A
that sends an object a∈Ato(a,1a,a)and a morphism hto(h,h).
Proposition 3.3. LetCbe a concrete 2-category with pushouts. Then there is a double category that has
•as objects, an object AinCtogether with an object a ∈ |A|;
•as arrows (A,a)→(A′,a′), a morphism H:A→A′inCtogether with a morphism h′:H(a)→a′
in|A′|;
•as proarrows (A,a)7 →(B,b), a cospan in Cof form m= (Ai− →Xo← −B)along with a morphism
f:i(a)→o(b)in|X|;
4The lax double functor Comma : Csp(C)→ Span(C)even generalizes from C=Catto any 2-category Cwith comma
objects, pushouts, and pullbacks [14, §4.5.9], although we will not use that.Evan Patterson 221
•as cells(A,a) (B,b)
(A′,a′) (B′,b′)(m,f)p
(H,h′) (K,k′)
(m′,f′)p, a morphism F:X→X′forming a map of cospansA X B
A′X′B′i o
H F K
i′o′
inCand making the following square in |X′|commute:
i′(H(a)) F(i(a)) F(o(b)) o′(K(b))
i′(a′) o′(b′)F(f)
f′i′(h′) o′(k′).
Two proarrows (A,a)(m,f)7 →(B,b)(n,g)7 →(C,c), with m= (Ai− →Xo← −B)and n= (Bj− →Yp← −C), have
composite (m⊙n,h):(A,a)7 →(C,c), where m⊙nis the composite cospan in Cwith apex X+BYandh
is given by first composing the images of f and g in |X|+|B||Y|and then applying the canonical functor
|X|+|B||Y| → | X+BY|. The identity proarrow at (A,a)is(idA,1a).
Proof. Apply the double Grothendieck construction to the composite lax double functor
Csp(C)Csp(|−|)− − − − − → Csp(Cat)Comma− − − − → Span(Cat).
Here the lax double functor Csp(|−|)is a particular case of Example A.5.
4 Conclusion
We have revisited structured and decorated cospans from the perspective of double category theory,
showing that double categories of structured cospans form cocartesian equipments and that their maps are
cocartesian double functors. We have also reconstructed and generalized double categories of decorated
cospans using the double Grothendieck construction.
Looking to future developments, we have presented a reasonably complete and self-contained treatment
of the theory of structured cospans, but less so for the theory of decorated cospans. We have not shown
how to construct maps between double categories of decorated cospans, along the lines of Baez et al’s
[6, Theorem 2.5]. Just as the classical Grothendieck construction for categories is 2-functorial [21, §6] ,
so should be the Grothendieck construction for double categories, which should in turn directly produce
maps between decorated cospan double categories and natural transformations between those. Equally
importantly, we have not recovered the symmetric monoidal product of decorated cospans, an absence
clearly felt in our example of the double category of process theories. Monoidal products should be
obtained as a corollary of a hypothetical Grothendieck construction for monoidal double categories,
combining the monoidal and double Grothendieck constructions [10, 19]. In these and other ways, we
expect the further development of the theory of double categories to immediately impact the study of open
systems, simplifying known constructions, suggesting new ones, and enabling practitioners to focus on
applications rather than general theoretical issues.
Acknowledgments This project was partially supported by the Air Force Office of Scientific Research
(AFOSR) Young Investigator Program (YIP) through Award FA9550-23-1-0133. I thank Nathanael Arkor,
John Baez, and Brandon Shapiro for helpful conversations. I am also grateful to Brandon Shapiro for
comments on early versions of this work.222 Structured and Decorated Cospans via Double Category Theory
References
[1] Rebekah Aduddell, James Fairbanks, Amit Kumar, Pablo S. Ocal, Evan Patterson & Brandon T.
Shapiro (2023): A compositional account of motifs, mechanisms, and dynamics in biochemical
regulatory networks , arXiv: 2301.01445 .
[2] Evangelia Aleiferi (2018): Cartesian double categories with an emphasis on characterizing spans ,
PhD thesis. Dalhousie University, arXiv: 1809.06940 .
[3] John Baez, Xiaoyan Li, Sophie Libkind, Nathaniel Osgood & Evan Patterson (2022): Compositional
modeling with stock and flow diagrams . InProceedings of the Applied Category Theory Conference
2022 , arXiv: 2205.08373 . In press.
[4] John Baez & Mike Stay (2010): Physics, topology, logic and computation: a Rosetta Stone . InNew
structures for physics , pages 95–172. doi: 10.1007/978-3-642-12821-9_2, arXiv: 0903.0340 .
[5] John C. Baez & Kenny Courser (2020): Structured cospans .Theory and Applications of Category
Theory . 35(48), pages 1771–1822, arXiv: 1911.04630 . Available at http://www.tac.mta.ca/
tac/volumes/35/48/35-48abs.html .
[6] John C. Baez, Kenny Courser & Christina Vasilakopoulou (2022): Structured versus decorated
cospans .Compositionality . 4(3), doi: 10.32408/compositionality-4-3, arXiv: 2101.09363 .
[7] John C. Baez & Blake S. Pollard (2017): A compositional framework for reaction networks .
Reviews in Mathematical Physics . 29(09), page 1750028, doi: 10.1142/S0129055X17500283,
arXiv: 1704.02051 .
[8] Aurelio Carboni, G. Max Kelly & Richard J. Wood (1991): A 2-categorical approach to change of
base and geometric morphisms I .Cahiers de topologie et géométrie différentielle catégoriques .
32(1), pages 47–95.
[9] Kenny Courser (2020): Open systems: A double categorical perspective , PhD thesis. University of
California, Riverside, arXiv: 2008.02394 .
[10] Geoffrey Cruttwell, Michael Lambert, Dorette Pronk & Martin Szyld (2022): Double Fibrations .
Theory and Applications of Categories . 38(35), pages 1326–1394, arXiv: 2205.15240 . Available
athttp://www.tac.mta.ca/tac/volumes/38/35/38-35abs.html .
[11] José Luiz Fiadeiro & Vincent Schmitt (2007): Structured co-spans: an algebra of interaction
protocols . InInternational Conference on Algebra and Coalgebra in Computer Science (CALCO
2007) , pages 194–208, doi: 10.1007/978-3-540-73859-6_14.
[12] Brendan Fong (2015): Decorated cospans .Theory and Applications of Categories . 30(33), pages 1096–
1120, arXiv: 1502.00872 . Available at http://www.tac.mta.ca/tac/volumes/30/33/30-
33abs.html .
[13] Tobias Fritz (2020): A synthetic approach to Markov kernels, conditional independence and theo-
rems on sufficient statistics .Advances in Mathematics . 370, page 107239, doi: 10.1016/j.aim.2020.107239,
arXiv: 1908.07021 .
[14] Marco Grandis (2019): Higher dimensional categories: From double to multiple categories . World
Scientific. doi: 10.1142/11406.
[15] Marco Grandis & Robert Paré (1999): Limits in double categories .Cahiers de topologie et géométrie
différentielle catégoriques . 40(3), pages 162–220. Available at http://www.numdam.org/item/
CTGDC_1999__40_3_162_0/ .
[16] Linde Wester Hansen & Michael Shulman (2019): Constructing symmetric monoidal bicategories
functorially , arXiv: 1910.09240 .Evan Patterson 223
[17] Piergiulio Katis, Nicoletta Sabadini & Robert F. C. Walters (1997): Span(Graph): A categorical
algebra of transition systems . InAlgebraic Methodology and Software Technology. AMAST 1997 ,
Springer, pages 307–321, doi: 10.1007/BFb0000479.
[18] Sophie Libkind, Andrew Baas, Micah Halter, Evan Patterson & James P. Fairbanks (2022): An
algebraic framework for structured epidemic modelling .Philosophical Transactions of the Royal
Society A . 380(2233), page 20210309, doi: 10.1098/rsta.2021.0309, arXiv: 2203.16345 .
[19] Joe Moeller & Christina Vasilakopoulou (2020): Monoidal Grothendieck construction .Theory
and Applications of Categories . 35(31), pages 1159–1207, arXiv: 1809 . 00727 . Available at
http://www.tac.mta.ca/tac/volumes/35/31/35-31abs.html .
[20] Evan Patterson (2020): The algebra and machine representation of statistical models , PhD thesis.
Stanford University, arXiv: 2006.08945 .
[21] George Peschke & Walter Tholen (2020): Diagrams, fibrations, and the decomposition of colimits ,
arXiv: 2006.10890 .
[22] Robert Rosebrugh, Nicoletta Sabadini & Robert F. C. Walters (2005): Generic commutative separa-
ble algebras and cospans of graphs .Theory and Applications of Categories . 15(6), pages 164–177.
Available at http://www.tac.mta.ca/tac/volumes/15/6/15-06abs.html .
[23] Michael Shulman (2008): Framed bicategories and monoidal fibrations .Theory and Applications
of Categories . 20(18), pages 650–738, arXiv: 0706.1286 . Available at http://www.tac.mta.
ca/tac/volumes/20/18/20-18abs.html .
[24] Michael Shulman (2010): Constructing symmetric monoidal bicategories , arXiv: 1004.0993 .
A Cocartesian Equipments
In this appendix, we review cocartesian double categories and equipments, and the maps between them.
This material is known but may not be straightforward to access in the literature. It is included for the
reader’s convenience.
Just as a cocartesian category is (on one standard definition) a category with finite coproducts, a
cocartesian double category is a double category with finite double-categorical coproducts. A highly
conceptual way to make this precise is to define a cocartesian double category to be a cocartesian object
in the 2-category Dblof double categories, double functors, and natural transformations. Thus, a double
category Discocartesian if the diagonal and terminal double functors, ∆ D: D→ D× Dand! D: D→ 1,
have left adjoints in Dbl. This is (dual to) the approach taken by Aleiferi in her PhD thesis on cartesian
double categories [2]. It will be convenient for us to have a more concrete description.5
Definition A.1. A double category Discocartesian if its underlying categories D0and D1have finite
coproducts; the source and target functors src,tgt : D1⇒ D0preserve finite coproducts; and the external
composition ⊙: D1× D0 D1→ D1and unit id : D0→ D1also preserve finite coproducts, meaning that
for all proarrows xm7 →yn7 →zandx′m′
7 →y′n′
7 →z′and objects xandx′in D, the canonical comparison cells
x+x′z+z′
x+x′z+z′(m⊙n)+(m′⊙n′)p
(m+m′)⊙(n+n′)p[ιm⊙ιn,ιm′⊙ιn′] andx+x′x+x′
x+x′x+x′idx+idx′p
idx+x′p[idιx,idιx′]
5The equivalence of the two definitions follows from a general result about double adjunctions [14, Corollary 4.3.7].224 Structured and Decorated Cospans via Double Category Theory
given by the universal property of binary coproducts, as well as the comparison cells 0 D1!− →0 D1⊙0 D1
and 0 D1!− →id0 D0given by the universal property of initial objects, are all isomorphisms in D1.
An equipment, also known as a fibrant double category or a framed bicategory, is a double category in
which proarrows can be restricted or extended along pairs of arrows in a universal way. Equipments can
be defined in at least three equivalent ways [23, Theorem 4.1], including as follows.
Definition A.2. Anequipment is a double category Dsuch that the pairing of the source and target
functors, ⟨s,t⟩: D1→ D0× D0, is a fibration.
Elaborating the definition, a double category Dis an equipment if every niche in Dof the form on the
left can be completed to a cell as on the right
x y
w zf g
np⇝x y
w zf g
npresf
g(n)p
res
called a restriction cell, with the universal property that for every pair of arrows h:x′→xandk:y′→y,
each cell αof the form on the left factors uniquely through the restriction cell as on the right:
x′y′
x y
w znpf gh km′p
α =x′y′
x y
w zf g
npresf
g(n)ph km′p
res∃!
Finally, a cocartesian equipment is a double category that is both cocartesian and an equipment. We
emphasize again that being a cocartesian equipment is a property of, not a structure on, a double category.
Example A.3 (Cospan double categories) .The prototypical example of a cocartesian equipment is none
other than Csp(S), the double category of cospans in a category Swith finite colimits. Let us sketch the
proof behind this statement. For a more detailed proof, one can dualize the proof in Aleiferi’s thesis that
Span(S), for a category Swith finite limits, is a cartesian equipment [2].
Finite coproducts in the category Csp(S)0=Sexist by assumption, and finite coproducts in the
functor category Csp(S)1=S{•→•←•}are computed pointwise in S. So the source and target functors
ftL,ftR: Csp(S)1→S, extracting the left and right feet, preserve coproducts. The comparison cells are
isomorphisms because colimits commute with colimits (specifically, pushouts commute with coproducts)
up to canonical isomorphism. Thus, the double category of cospans is cocartesian.
It is also an equipment. To restrict a cospan cℓ− →yr← −dalong a pair of morphisms f:a→cand
g:b→d, simply compose the morphisms with the legs of the cospan. The restriction cell is trivial:
a y b
c y dℓ rfℓ◦f r◦g
g.Evan Patterson 225
We turn now to maps between cocartesian double categories and equipments. Since a cocartesian
category is a cocartesian object in Dbl, a map between cocartesian double categories can be defined
abstractly as a cocartesian morphism between cocartesian objects [8, §5.2]. As before, this definition
reduces to a more concrete one:
Definition A.4. A double functor F: D→ Ebetween cocartesian double categories is cocartesian if
both underlying functors F0: D0→ E0andF1: D1→ E1preserve finite coproducts.
Note that we will apply this definition to lax as well as pseudo double functors.
Perhaps surprisingly, no extra conditions on double functors between equipments are required. Any
(op)lax double functor between equipments automatically preserves restriction (respectively, extension)
cells, as proved by Shulman [23, Proposition 6.4]. In particular, a pseudo double functor between
equipments preserves all the operations afforded by an equipment.
Example A.5 (Maps between cospan double categories) .The construction of the double category of
cospans Csp(S)extends to a 2-functor Csp:Cat po→Dbl lax, where Cat pois the 2-category of categories
with chosen pushouts, arbitrary functors, and natural transformations and Dbl laxis the 2-category of
double categories, lax double functors, and natural transformations [14, §C3.11].
Let us describe the lax double functor Csp(F): Csp(S)→ Csp(S′)induced by a functor F:S→S′
between categories with pushouts. We have Csp(F)0=Fon objects and arrows, while Csp(F)1post-
composes with Fthe diagrams defining cospans and maps of cospans in S. Since functors preserve
identities, Csp(F)is anormal lax double functor, meaning that it preserves identity proarrows strictly.
Given cospans m= (a→x←b)andn= (b→y←c)inS, the laxator
Csp(F)m,n: Csp(F)(m)⊙ Csp(F)(n)→ Csp(F)(m⊙n)
has apex map given by the universal property of the pushout in S′:
Fb
Fx Fy
Fx+FbFy
F(x+by)ιFx ιFy⌟
F(ιx) F(ιy).
Clearly, Csp(F)is pseudo if and only if Fpreserves pushouts.
Suppose that SandS′have all finite colimits, so that their double categories of cospans are cocartesian.
Since coproducts of cospans are computed pointwise, Csp(F)is a cocartesian lax double functor exactly
when Fpreserves finite coproducts. Altogether, Csp(F)is a cocartesian (pseudo) double functor if and
only if Fpreserves all finite colimits.
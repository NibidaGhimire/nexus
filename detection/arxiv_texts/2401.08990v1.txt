Products in double categories, revisited
Evan Patterson
Abstract
Products in double categories, as found in cartesian double categories, are an elegant concept
with numerous applications, yet also have a few puzzling aspects. In this paper, we revisit
double-categorical products from an unbiased perspective, following up an original idea by Paré
to employ a double-categorical analogue of the family construction, or free product completion.
Defined in this way, double categories with finite products are strictly more expressive than
cartesian double categories, while being governed by a single universal property that is no
more difficult to work with. We develop the basic theory and examples of such products and,
by duality, of coproducts in double categories. As an application, we introduce finite-product
doubletheories, acategorificationoffinite-producttheoriesthatextendsrecentworkbyLambert
and the author on cartesian double theories, and we construct the virtual double category of
models of a finite-product double theory.
Contents
1 Introduction 1
2 Review of the family construction 5
3 The family construction for double categories 7
4 Coproducts in double categories 13
5 Functors between double categories with coproducts 18
6 Lax products in double categories 21
7 Iso-strong products in double categories 27
8 Restrictions in double categories with products 30
9 Lax functors between double categories with products 37
10 Finite-product double theories 41
11 Higher morphisms and double categories of models 45
References 51
1 Introduction
A cartesian double category is a double category with binary and nullary products [Ale18], as
defined by the general theory of limits in double categories [GP99; Gra19]. So, a double category
Discartesian when there exist right adjoints to the diagonal double functor ∆ :D→D×Dand
the unique double functor ! :D→1. Equivalently, a cartesian double category is a cartesian object
in the 2-category of double categories.
Cartesian double categories aim to capture through a simple universal property what in a bicat-
egory can only be described through far more elaborate structures, such as cartesian bicategories
[CW87; Car+08]. Recent works in pure and applied category theory have sought to exploit this
feature. For example, Lambert has given axioms for “a double category of relations” [Lam22] sim-
plifying those of “a bicategory of relations” [CW87]. The author has used the dual notion of a
1arXiv:2401.08990v1  [math.CT]  17 Jan 2024cocartesian double category to streamline the theory of structured cospans [Pat23], a framework
for modeling open systems [FS07; BC20]. Finally, cartesian double categories are the point of de-
parture for “cartesian double theories,” a categorification of finite-product theories whose models
are categorical doctrines [LP23].
Yet, despite their elegance and success in applications, there are good reasons to doubt that
cartesian double categories are the right notion of a “double category with finite products.” In
ordinary category theory, binary and nullary products famously generate all finite products, hence
it is standard to identify a “category with binary and nullary products” with a “category with finite
products.” Surprisingly, this identification, rarely given a second thought, breaks down in certain
ways for double categories.
We begin with a striking disanalogy between cocartesian categories and cocartesian double
categories. The category of sets and functions plays a distinguished role in category theory through
the Yoneda lemma and the representability arguments that the lemma enables. In developing the
Yoneda theory of double categories [Par11], Paré has convincingly argued that the role played in
category theory by Setis played in double category theory by Span, the double category of sets,
functions, andspans. Forthisreason, heandothersevencallthisdoublecategory Set. Thecategory
Setis also characterized as the free cocompletion of the terminal category; similarly, FinSetis the
free cocartesian category (category with finite coproducts) on the terminal category. Yet the free
cocartesian double category on the terminal double category is not FinSpan, as one would expect
under this analogy, but the degenerate fragment of it whose proarrows are identity spans.
There is also a disharmony between cartesian double categories and cartesian bicategories.
Although Aleiferi motivates her introduction of cartesian double categories through cartesian bi-
categories [Ale18], hence the parallel terminology, no formal comparison between the two concepts
has been made. One might hope that a cartesian double category has an underlying cartesian
bicategory, but that seems unlikely since a generic cartesian double category has no means of
transferring the cartesian structure from arrows to proarrows. A cartesian equipment does have
such a means. So, a cartesian equipment is expected to have an underlying cartesian bicategory,
and, at least in the locally posetal case, this has been proved by Lambert [Lam22, Proposition 3.1].
But, even supposing that this is true in general, a puzzle remains: a cartesian equipment is defined
by two independent universal properties, and the universal property of being an equipment has, on
the face of it, nothing to do with products, except insofar as it involves a “mapping into” universal
property.1Is this really necessary to obtain a cartesian bicategory?
So it appears that a cartesian double category possess too little structure to fulfill the role of
a “double category with finite products,” whereas a cartesian equipment possesses too much. In
this paper, we explore an intermediate conception of products in a double category, based on a
double-categorical version of the family construction. This idea was first proposed by Robert Paré
in a talk at the Category Theory conference [Par09] but has never been systematically developed
in print. It is the aim of this paper to do so, while exhibiting its virtues and drawing connections
with the related ideas surveyed above.
The essence of the idea is easily explained. As reviewed in Section 2, the free coproduct
completion of a category Cis a category, often called Fam(C), whose objects are indexed families
of objects in C. This logic can be turned around. Forgetting the definition of coproducts and
starting from the family construction, one can define a category Cto have coproducts just when
the embedding ∆ :C→Fam(C)that sends objects in Cto singleton families has a left adjoint,
Σ :Fam(C)→C. Products can then be defined by dualization. We will follow this procedure for
1Eventhiscomparisonisarguablymisleadingsinceequipmentshaveadualcharacterizationintermsofa“mapping
out” universal property [Shu08, Theorem 4.1], so are, in any analogy with limits or colimits, equally close to either.
2double categories, constructing a double category of families, Fam(D), on a double category Dand
then defining Dto have (colax) coproducts just when the embedding ∆ :D→Fam(D)has a (colax)
left adjoint Σ :Fam(D)→D, in the sense of Grandis and Paré’s theory of adjunctions between
double categories [GP04; Gra19].
In a hypothetical double category of families, objects should clearly be indexed by sets, as in the
one-dimensional case, but proarrows admit at least two possible indexing schemes. One could insist
that an indexed family of proarrows go between indexed families of objects with the same indexing
set. That choice leads to cocartesian double categories and their infinitary analogues. However,
having adopted the unbiased perspective, enforcing equality of indexing sets seems artificial, even
uncategorical insofar as it asks for equality between objects. A more flexible approach takes a
family of proarrows to be indexed by an arbitrary spanbetween the object indexing sets. Thus,
given a double category D, a proarrow in Fam(D)from an indexed family of objects (xi)i∈Ito
another (yj)j∈Jconsists of a span Iℓ← −Ar− →Jof sets together with a family of proarrows in Dof
the form
ma:xℓ(a)∝⇕⊣√∫⊔≀→yr(a), a∈A.
The double family construction is developed along these lines in Section 3. In Section 4, we define
colaxorstrong coproducts in a double category Dto be a colax or pseudo left adjoint to the
embedding ∆ :D→Fam(D), and we verify that two fundamental classes of double categories,
those of spans and matrices, have strong coproducts under appropriate assumptions.
The new definition’s most obvious advantage is giving a more flexible notion of coproduct.
Coproducts of proarrows indexed by an identity span I1← −I1− →Iare theparallel coproducts
familiar from cocartesian double categories. Coproducts of proarrows with common source and
target, indexed by a span 1!← −I!− →1, arelocal coproducts . These are, in particular, local
coproducts in the underlying bicategory but have a stronger universal property.
Once the notion of coproduct-preserving double functor has been established in Section 5, we
formulate and prove the expected result that Fam(D)is the free coproduct completion of the double
category D. In particular, Spanis the free coproduct completion of the terminal double category,
since we have an isomorphism of double categories Fam(1)∼=Spanessentially by construction.
Thus the first conceptual problem with cocartesian double categories is resolved.
In Section 6, we turn to products in double categories, our primary interest. Of course, products
in a double category Dcan be defined as coproducts in the opposite double category Dop, where
(Dop)i= (Di)opfor eachi= 0,1. Yet there is an interesting asymmetry in the main examples that
has no counterpart for one-dimensional categories. Although they have strongcoproducts, double
categories of spans and of matrices have laxproducts, a situation first noticed by Paré in the double
category of relations [Par09]. Products in these double categories are not entirely lax: products
commute with external composition when the adjacent legs of the indexing spans are bijections.
We isolate this condition as iso-strong products in Section 7 and check that double categories of
spans and of matrices have iso-strong products under the expected hypotheses.
Alessimmediate,butveryimportant,consequenceofthedefininguniversalpropertyisthatdou-
ble categories with products automatically possess certain restriction (or cartesian) cells. Namely,
they have restrictions along any structure arrow between products, such as projections and diago-
nals. Restrictions, companions, and conjoints in double categories with products are investigated
in Section 8, culminating in the characterization of double categories with iso-strong finite products
as cartesian double categories that have restrictions along structure arrows between products. We
3thus obtain inclusions
cartesian equipments ⊂double categories with iso-strong finite products
⊂cartesian double categories
and the inclusions are strict. The same sequence of inclusions holds for precartesian equipments,
double categories with lax finite products, and precartesian double categories.
Double categories with finite products possess just enough restrictions to have underlying carte-
sian bicategories, allowing the structure arrows between products to be transferred to proarrows
but in general nothing more. To be precise, a double category with normal lax or iso-strong finite
products has an underlying precartesian or cartesian bicategory, respectively. We defer the proof
of this fact to a future work since it involves ideas from bicategory theory, as well as techniques
for transposing structure in a double category, of a rather different spirit than the present paper.
Nevertheless, this result will resolve the second conceptual problem raised above. As a corollary, it
will also follow that cartesian equipments have underlying cartesian bicategories.
The last two sections of the paper concern a different application, double-categorical logic,
which was actually the author’s original motivation to revisit products in double categories.2In
recent work [LP23], Michael Lambert and the author proposed cartesian double categories as a
double-categorical approach to doctrines, defining a cartesian double theory to be a small,
strict cartesian double category and a modelof a cartesian double theory to be a cartesian lax
functor out of it. Cartesian equipments were not considered viable as double theories since lax
functors seem not to interact well with all of the abundant structure present in an equipment.
Double categories with finite products, in the sense developed here, are a useful compromise, more
expressive than a cartesian double category yet fully controlled by a single universal property that
lax functors respect.
In Section 10, we define a finite-product double theory to be a small, strict double category
withstrongfiniteproductsanda modelofafinite-productdoubletheorytobeaproduct-preserving
lax functor out of it. We present several examples of finite-product double theories illustrating their
extra flexibility compared to cartesian double theories. Finally, in Section 11, we construct a unital
virtual double category of models of a finite-product double theory and prove a series of simple but
necessary lemmas showing that morphisms and higher morphisms of models behave properly.
Our thesis is, in short, that the correct notion of products in double categories is the one
investigated here, at least for double categories with “object-like” proarrows, such as those of
spans, matrices, relations, and profunctors. A natural question for the future is whether the same
unbiased perspective can be usefully applied to general limits and colimits in double categories.
Conventions Double categories and double functors are assumed to be pseudo unless otherwise
stated. Every double category Dhas twounderlying categories , the category D0of objects and
arrows and the category D1of proarrows and cells. A double category also has an underlying
2-category of objects, arrows, and cells bounded by identity proarrows, and an underlying
bicategory of objects, proarrows, and globular cells. We always write the external composition
⊙:D1×D0D1→Din a double category in diagrammatic order.
Acknowledgments I thank Michael Lambert for a series of helpful conversations over the course
of this research. I also thank Brandon Shapiro for, some time ago, implanting in my mind the belief
thatSpanshould be the free coproduct completion of the terminal double category.
2Double-categorical logic was also Paré’s original motivation [Par09], although he considers both a different type
of a double theory and a different type of model than we do.
42 Review of the family construction
In this expository section, we review the family construction, or free coproduct completion, of a
category, aswewilldevelopthefamilyconstructionfordoublecategoriesinanalogywithit. Muchis
known about the category of families in a given category, which enjoys surprisingly many properties
besides simply being the free coproduct completion. Notable references for these properties include
the papers [CJ95; HT95; AR20].
The family construction can be defined as the Grothendieck construction of a restricted repre-
sentable functor. Given the simplicity of the category of families, this may seem a circuitous route
but it has the advantage of immediately exhibiting the fibered structure of families. More to the
point, it will motivate an analogous approach to families in double categories.
Construction 2.1 (Families) .Thecategory of families in a category C, denoted Fam(C), is the
Grothendieck construction of the functor Cat(−,C)|Set:Setop→Cat:
Fam(C):=/integraldisplayI∈Set
Cat(I,C).
In the definition, the sets Iare regarded as discrete categories by a common abuse of notation.
Thus, the category Fam(C)has
•as objects (I,x), anindexing set Itogether with an I-indexed family x:I→Cof objects
inC, whose elements are denoted xi:=x(i);
•as morphisms (f0,f) : (I,x)→(J,y), a function f0:I→Jbetween indexing sets together
with anI-indexed family f:x⇒y◦f0of morphisms in C, having components of the form
fi:xi→yf0(i).
Bythefundamentalrelationshipbetweenindexedcategoriesandfibrations, thecanonicalprojection
Fam(C)→Setsending a family of objects to its indexing set is a fibration.
There is also a category of finite families inC, denoted FinFam (C). It is the full subcategory
ofFam(C)spanned by families of objects indexed by finitesets; alternatively, it is the Grothendieck
construction of the functor Cat(−,C)|FinSet :FinSetop→Cat. Everything that we will say about
the family construction and coproducts remains true when “family” is replaced by “finite family”
and “coproduct” by “finite coproduct.” Often we will not bother to say so explicitly.
It would be conventional at this point to observe that Fam(C)is the free completion of Cto a
category with coproducts, but this presupposes the definition of coproducts, whereas we intend to
use a double family construction to definecoproducts in a double category. Mirroring this logic, we
recall how to recover the usual definition of a coproduct in a category from the family construction.
Denote by ∆:= ∆ C:C→Fam(C)the functor that sends each object xinCto the object family
(1,x)indexed by the singleton set.
Proposition 2.2 (Coproducts as left adjoints) .A category Chas all (small) coproducts if and only
if the functor ∆ :C→Fam(C)has a left adjoint:
C Fam(C)Σ
∆⊣.
5Proof.The most expeditious proof uses the equivalence between adjunctions and universal arrows;
see, for example, [Mac98, §IV.1] or [Gra19, §1.5.1]. Thus, the existence of a functor Σ :Fam(C)→C
along with an adjunction Σ⊣∆is equivalent to the existence merely of, for every family of objects
(I,x)inC, a universal arrow from (I,x)to the functor ∆. Such a universal arrow consists of an
object Σx:= Σ(I,x)inCalong with a morphism (ι0,ι) : (I,x)→∆ΣxinFam(C). It satisfies the
universal property that, for any object y∈Cand morphism (f0,f) : (I,x)→∆yinFam(C), there
exists a unique morphism h: Σx→yinCmaking the triangle commute:
(I,x) ∆Σx
∆y∆h(ι0,ι)
(f0,f).
Now, since f0andι0must both be the unique map ! :I→1, we recover the usual definition of a
coproduct: there is an object ΣxinC, conventionally denoted/summationtext
i∈Ixi, along with coprojection
morphisms ιi:xi→Σxfor eachi∈I. These satisfy the universal property that for any object
y∈Cand family of morphisms (fi:xi→y)i∈I, there exists a unique morphism h: Σx→ymaking
all the triangles commute:
xi Σx
yιi
fih, i∈I.
Functors that preserve coproducts can also be characterized using the family construction.
Notice that the assignment Fam :Cat→Catis a functor (even a 2-functor, although we won’t
need that). Specifically, given a functor F:C→D, the functor Fam(F) :Fam(C)→Fam(D)
results by applying the Grothendieck construction, which is functorial [PT20, §6.2], to the natural
transformation
Cat(−,F)|Set:Cat(−,C)|Set⇒Cat(−,D)|Set:Setop→Cat.
In concrete terms, Fam(F)acts on indexed families by post-composition: for a family of objects
(I,x)inC, we have Fam(F)(I,x) = (I,Fx ), so that (Fx)i=F(xi)for eachi∈I, and similarly for
families of morphisms. To avoid notational clutter, we will often simply write Fxfor this action.
Proposition 2.3 (Coproduct-preserving functors) .A functorF:C→Dbetween categories with
coproducts preserves all coproducts if and only if the morphism of adjunctions
Fam(C) C
Fam(D) DΣ⊣∆p
F Fam(F)
Σ⊣∆p(Φ,1)
defined by the pair of functors (Fam(F),F)is strong.
Proof.Amorphism of adjunctions is a cell in the double category of adjunctions [Gra19, §3.1.6].
Less standardly, the cell being strongmeans that the identity transformation on the left
Fam(C) C
Fam(D) DF∆C
Fam(F)
∆D1 ↭Fam(C) C
Fam(D) DFΣC
Fam(F)
ΣDΦ
6has a mate cell Φas shown on the right that is a natural isomorphism. Unwinding the definitions,
the component of Φat a family (I,x)is the canonical comparison
/summationtext
i∈IFxi= ΣFxΦx−−→FΣx=F(/summationtext
i∈Ixi)
provided by the universal property of the coproduct in D. By definition, the functor Fpreserves
the coproduct of a family xif and only if the component Φxis an isomorphism.
We now recall the central property of the family construction.
Theorem 2.4 (Free coproduct completion) .For any category C, the category Fam(C)is the free
coproduct completion of C.
Proof.Given a family of objects (I,(U,x))inFam(C), i.e., an object of Fam(Fam(C)), a coproduct
of it in Fam(C)is
Σ(U,x):= (⊔U,x),where⊔U:=/unionsqdisplay
i∈iUi, x := [xi]i∈I:⊔U→C.
In other words,⊔Uis the disjoint union or coproduct of the indexing sets and xis the copairing of
the indexed families given by the universal property of the coproduct in Set. The coprojections in
Fam(C)are the morphisms
(ιi,1xi) : (Ui,xi)→(⊔U,x), i∈I,
defined by the inclusions ιi:Ui→⊔UinSetand the family of identities (1xi)ui:xi,ui→xιi(ui)in
C, for eachui∈Ui. The universal property of the coproduct in Fam(C)follows directly from that
of the coproduct in Set.
So the functor ∆ :C→Fam(C)embeds Cinto a category with coproducts. That Fam(C)is the
freecoproduct completion of Cis the universal property that for any other functor F:C→Dinto
a category Dwith coproducts, there exists a coproduct-preserving functor ˆF:Fam(C)→Dmaking
the triangle
Fam(C)
C DˆF∆
F
commute, and ˆFis unique up to natural isomorphism. Indeed, a functor ˆF:Fam(C)→Dmaking
the triangle commute is uniquely determined on singleton families and maps between them by F.
But an arbitrary family of objects in Cis a coproduct of singleton families, so if ˆFis to preserve
coproducts, it must send the family to a coproduct of fixed objects in D. Since Dis assumed to
have coproducts, we can make such a choice of ˆF, and since coproducts are unique up to unique
isomorphism commuting with coprojections, any such choice of ˆFis unique up to unique natural
isomorphism preserving the triangle formed with ∆andF.
3 The family construction for double categories
As reviewed in the previous section, families in a category can be defined as the Grothendieck
construction of the restriction of a representable functor. We will now define families in a double
category analogously using the double Grothendieck construction, a tool recently introduced by
7Cruttwell, Lambert, Pronk, and Szyld in their study of double fibrations [Cru+22]. The impatient
reader may wish to skip to the concrete description of the double family construction following
Construction 3.3.
Besides the double Grothendieck construction, we will need a bit of the technology of double
2-categories developed by Cruttwell et al. A double 2-category is a pseudocategory in 2Cat, the
2-category of 2-categories, 2-functors, and 2-natural transformations [Cru+22, Definition 3.2]. So,
a double 2-category Eis underlied by a 2-category E0of objects, arrows, and 2-cells between arrows
as well as a 2-category E1of proarrows, cells, and 2-cells between cells. The fundamental example
of a double 2-category is nothing other than the receiving object for the lax double pseudofunctors
that are the input to the double Grothendieck construction.
Example 3.1 (Spans of categories) .As a particular case of [Cru+22, Construction 3.6], the double
category of spans of categories upgrades to a double 2-category Span(Cat). Its 2-category of objects
is simply Span(Cat)0=Cat, the 2-category of categories. More interestingly, its 2-category of
morphisms Span(Cat)1has spans of categories as objects; has maps of spans as morphisms; and
has as 2-cells
X S Y
W T ZL R
L RH F G⇒X S Y
W T ZL R
L RH′F′G′,
triples of natural transformations α:F⇒F′,β:G⇒G′, andσ:H⇒H′satisfying the two
“cylinder conditions”
X S
W TL
LH′FF′α =X S
W TL
LH F H′σandS Y
T ZR
RHG′H′σ =S Y
T ZR
HGG′
Rβ.
The source and target 2-functors Span(Cat)1⇒Catare the obvious ones that extract the left and
right feet, legs, and cells between legs. External composition is by 2-pullback in Cat.
Any double category Dhas an underlying span of categories D0s← −D1t− →D0, an object of
Span(Cat). Anyspanofsetscanberegardedasaspanofdiscretecategories, hencealsoasanobject
ofSpan(Cat). These observations motivate the following construction of a doubly indexed category.
We will also need some special notation for elements of spans of sets, inspired by [Par11, §3.7]. For
any spanIℓ← −Ar− →JinSet, we will generally label the left and right legs as ℓandrand then
conflate the apex of the span with the span itself, writing A:I∝⇕⊣√∫⊔≀→J. We then write a:i∝⇕⊣√∫⊔≀→jfor
an element a∈Asuch thatℓ(a) =iandr(a) =j.
Construction 3.2 (Double indexing of a double category) .Given a double category D, we con-
struct a lax double functor suggestively denoted
F=Span(Cat)(−,D)|Span:Spanop→Span(Cat).
The underlying functor F0:=Cat(−,D0)|Set:Setop→Catis that used previously in Construc-
tion 2.1. It sends a set Ito the functor category Cat(I,D0)having as objects, I-indexed families
x:I→D0of objects in Dand as morphisms x→x′, transformations f:x⇒x′. The second
underlying functor is
F1:=Span(Cat)1(−,D)|Span1:Spanop
1→Span(Cat)1.
8It sends a span of sets Iℓ← −Ar− →Jto the span of categories whose apex is the category
Span(Cat)1(Iℓ← −Ar− →J,D0s← −D1t− →D0)
from Example 3.1. Thus, the objects of this category are indexed families of objects and proarrows
inDof the form
IAJ
D0 D1 D0x
sℓ
tr
y m ,
which we abbreviate as m:x∝⇕⊣√∫⊔≀→y; and its morphisms from m:x∝⇕⊣√∫⊔≀→ytom′:x′∝⇕⊣√∫⊔≀→y′are families
of arrowsf:x⇒x′andg:y⇒y′together with a family of cells α:m⇒m′of form
xiyj
x′
iy′
jmap
fi gj
m′
apαa, (ia∝⇕⊣√∫⊔≀→j) : (IA∝⇕⊣√∫⊔≀→J).
The left and right legs of this span of categories are the obvious ones.
To complete the construction, the laxators and unitors of the lax double functor Fare furnished
by the external composition and identities in D. Given spans of sets A:I∝⇕⊣√∫⊔≀→JandB:J∝⇕⊣√∫⊔≀→K,
the laxator FA,Bis defined by the functor FA×FJFB→F(A×JB)that sends a pair of proarrow
familiesm:x∝⇕⊣√∫⊔≀→yandn:y→zto the family m⊙n:x∝⇕⊣√∫⊔≀→zwith components
xi zk
yj(m⊙n)(a,b)p
nbpmap , (ia∝⇕⊣√∫⊔≀→jb∝⇕⊣√∫⊔≀→k) : (IA∝⇕⊣√∫⊔≀→JB∝⇕⊣√∫⊔≀→K). (3.1)
and similarly for families of cells. Given a set I, the unitor FI: idFI→F(idI)is defined by the
functor sending each I-indexed object family xto the proarrow family idx:x→xwith components
idxi:xi∝⇕⊣√∫⊔≀→xifori∈I, and similarly for families of arrows.
WhenDis astrictdouble category, we obtain a genuine lax double functor, where the asso-
ciativity and unitality axioms for the laxators and unitors are immediate from the corresponding
axioms for the external composition and identity in D. In general, though, what we have is a lax
doublepseudofunctor [Cru+22, Definition 3.12], whose associativity and unitality modifications are
given by the associators and unitors of D. The coherence axioms for these modifications correspond
tothecoherenceaxiomsforthepseudodoublecategory. Ineithercase, thenaturalityaxiomsforthe
laxators and unitors amount to the statements that reindexing commutes with composing indexed
families of proarrows.
Construction 3.3 (Double families) .Thedouble category of families in a double category D,
denoted Fam(D), is the Grothendieck construction of the lax double pseudofunctor from Construc-
tion 3.2:
Fam(D):=/integraldisplayS∈Span
Span(Cat)(S,D).
Thedouble category of finite families inD, denoted FinFam (D), is defined similarly by
replacing SpanwithFinSpan, the double category of spans of finite sets.
9By construction, the canonical projection Fam(D)→Span, a strict double functor, is a double
fibration. In fact, if Sq(C)denotes the double category of commutative squares in a category C,
thenFam(Sq(C))is the double category denoted Fam(C)and called the “double family fibration”
by Cruttwell et al [Cru+22, Examples 2.29 and 3.19]. Any double category of families is also an
example of a “double category of decorated spans” in the generalized sense of [Pat23, §3].
It is indispensable to have a fully concrete description of the double category of families. Given
a double category D, its double category of families, Fam(D), has
•as objects, an indexing set Itogether with an I-indexed family x:I→D0, consisting of
objectsxiinDfori∈I;
•as arrows (I,x)→(J,y), a function f0:I→Jtogether with an I-indexed family fof
morphisms in Dof the form fi:xi→yf0(i)fori∈I;
•as proarrows (I,x)∝⇕⊣√∫⊔≀→(J,y), anindexing span Iℓ← −Ar− →Jtogether with an A-indexed
familym:A→D1, consisting of proarrows in Dof the form ma:xi∝⇕⊣√∫⊔≀→yjfor eacha:i∝⇕⊣√∫⊔≀→j;
•as cells(I,x) (J,y)
(K,w) (L,z)(A,m)p
(f0,f) (g0,g)
(B,n)p, a map of spans (f0,α0,g0)as shown on the left below together
with anA-indexed family αof cells in Dof the form on the right:
IAJ
KBLf0 g0ℓ
ℓ rα0r
,xi yj
wf0(i)zg0(j)fi gjmap
nα0(a)pαa,(ia∝⇕⊣√∫⊔≀→j) : (IA∝⇕⊣√∫⊔≀→J).
To compose proarrows in Fam(D), first compose the indexing spans by pullback as usual, then
compose the families of proarrows componentwise in Das defined in Equation (3.1).
The definition of the double category of families is lent further support by the several senses in
which the 1-categorical and double-categorical family constructions commute. First of all, we have
the expected compatibility Fam(D)0=Fam(D0)for any double category D. Less immediately, we
also have:
Proposition 3.4 (Families of spans) .LetSbe a category with pullbacks. Then there is an isomor-
phism of double categories
Fam(Span(S))∼=Span(Fam(S)).
Proof.AsobservedbyAdámekandRosick` y[AR20,Remark2.3],whenthecategory Shaspullbacks,
so does Fam(S). The pullback of a cospan (I,x)(f0,f)−−−→ (K,z)(g0,g)←−−− (J,y)inFam(S)is computed
by, first, taking the pullback of the indexing sets
I×KJ
I J
Kf0g0p0 q0 ⌟
10and then, for each pair (i,j)∈I×KJ, taking the pullback in S
w(i,j)
xi yj
zf0(i)=zg0(j)figjp(i,j) q(i,j) ⌟
.
The span (I,x)(p0,p)←−−− (I×KJ,w)(q0,q)−−−→ (J,y)is then a pullback in Fam(S). This proves that
the double category Span(Fam(S))is well defined. Comparing with the external composition in
Construction 3.3, it also shows that not only are the proarrows in Fam(Span(S))andSpan(Fam(S))
the same, they have the same composition law. The remaining identifications are straightforward.
As a corollary, we obtain an isomorphism that is also easy to see directly.
Corollary 3.5. Denoting the terminal double category by 1, there is an isomorphism
Fam(1)∼=Span.
Proof.Taking S=1to be the terminal category, we have Span(1)∼=1andFam(1)∼=Set.
It will be important later to know that Fam(D)inherits extension cells, including companions
and conjoints, whenever they exist in D. The general theory of companions, conjoints, and equip-
ments is established in [GP04; Shu08; Shu10]. In this paper, we use the terms restriction and
extensioncell asmoreevocativesynonymsforcartesianandopcartesiancellsinadoublecategory,
respectively.
Proposition 3.6 (Extensions of families) .LetDbe a double category. Suppose given a co-niche
inFam(D)of the form
(I,x) (J,y)
(K,w) (L,z)(A,m)p
(f0,f) (g0,g)
such that each constituent co-niche in D
xi yj
wf0(i)zg0(j)map
fi gj, (ia∝⇕⊣√∫⊔≀→j) : (IA∝⇕⊣√∫⊔≀→J),
can be filled by an extension cell. Then the co-niche in Fam(D)is also fillable by an extension cell.
Proof.From the extension in Span
IAJ
KALℓ r
f0 g0
f0◦ℓg0◦r
11together with the family of extensions in D
xi yj
wf0(i)zg0(j)map
fi gj
napexta, (ia∝⇕⊣√∫⊔≀→j) : (IA∝⇕⊣√∫⊔≀→J),
we obtain a family of cells in D:
(I,x) (J,y)
(K,w) (L,z)(A,m)p
(f0,f) (g0,g)
(A,n)p(1A,ext) .
We verify that this family satisfies the universal property of an extension cell in Fam(D). Given a
cell inFam(D)as on the left
(I,x) (J,y)
(K,w) (L,z)
(K′,w′) (L′,z′)(A,m)p
(f0,f) (g0,g)
(h0,h) (k0,k)
(B,p)p(α0,α) =(I,x) (J,y)
(K,w) (L,z)
(K′,w′) (L′,z′)(A,m)p
(f0,f) (g0,g)
(h0,h) (k0,k)
(B,p)p(A,n)p(1A,ext)
∃!,
we must show that there is a unique factorization as on the right. But this follow directly by
applying the universal properties of each of the constituent extension cells:
xi yj
wf0(i) zg0(j)
w′
h0(f0(i))z′
k0(g0(j))map
fi gj
hf0(i) kg0(j)
pα0(a)pαa =xi yj
wf0(i) zg0(j)
w′
h0(f0(i))z′
k0(g0(j))map
fi gj
hf0(i) kg0(j)
pα0(a)pnapexta
∃!, (ia∝⇕⊣√∫⊔≀→j) : (IA∝⇕⊣√∫⊔≀→J).
Corollary 3.7. If a double category Dis an equipment, then Fam(D)is also an equipment.
Proof.This follows immediately from Proposition 3.6 using the characterization of an equipment
as a double category whose source-target pairing is an opfibration [Shu08, Theorem 4.1].
Proposition 3.8 (Companions and conjoints of families) .Suppose (f0,f) : (I,x)→(J,y)is a
family of arrows in a double category Dsuch that each component fi:xi→yf0(i)has a companion
(fi)!:xi∝⇕⊣√∫⊔≀→yf0(i)inD. Then the family of arrows (f0,f)has a companion in Fam(D), namely the
family of proarrows ((f0)!,f!) : (I,x)∝⇕⊣√∫⊔≀→(J,y), where (f0)!= (I=If0−→J)is the companion of f0
inSpanand(f!)i:= (fi)!for eachi∈I.
Dually, if each component fihas a conjoint f∗
i:yf0(i)∝⇕⊣√∫⊔≀→xiinD, then the family of arrows
(f0,f)has a conjoint in Fam(D), namely the family of proarrows (f∗
0,f∗)indexed by the conjoint
spanf∗
0= (Jf0←−I=I).
12Proof.Since companions and conjoints are special kinds of extension cells, this result is a direct
consequence of Proposition 3.6. We sketch a direct proof anyway since it is useful to have formulas
for the binding cells of companions and conjoints in Fam(D). The unit and counit cells for a
companion pair in Fam(D),
(I,x) (I,x)
(I,x) (J,y)(f0,f)
((f0)!,f!)pid(I,x)p
(1I,η) and(I,x) (J,y)
(J,y) (J,y)(f0,f)
id(J,y)p((f0)!,f!)p
(f0,ε),
are the families of units and counits in D
xixi
xiyf0(i)fiidxip
(fi)!pηi andxiyf0(i)
yf0(i)yf0(i)fi
idyf0(i)p(fi)!p
εi, i∈I.
The equations for the companion pair in Fam(D)follow immediately by applying the companion
equations componentwise in D. Dually, the unit and counit for a conjoint pair in Fam(D),
(I,x) (I,x)
(J,y) (I,x)(f∗
0,f∗)p(f0,f)id(I,x)p
(1I,η) and(J,y) (I,x)
(J,y) (J,y)(f∗
0,f∗)p
(f0,f)
id(J,y)p(f0,ε),
are the families of units and counits in D
xixi
yf0(i)xiidxip
fi
f∗
ipηi andyf0(i)xi
yf0(i)yf0(i)f∗
ip
fi
idyf0(i)pεi, i∈I.
4 Coproducts in double categories
Following the analogy now established between families in categories and in double categories, we
define coproducts in a double category. The characterization of coproducts in a category Cas left
adjoint to the embedding ∆ :C→Fam(C)(Proposition 2.2) becomes the definition of coproducts
in a double category. Given a double category D, denote by ∆:= ∆D:D→Fam(D)the double
functor sending each object x∈Dto the singleton family (1,x)and each proarrow m:x∝⇕⊣√∫⊔≀→yinD
to the singleton family (1!← −1!− →1,m) : (1,x)∝⇕⊣√∫⊔≀→(1,y).
Definition 4.1 (Double coproducts) .A double category Dhas colax coproducts if the double
functor ∆ :D→Fam(D)has a colax left adjoint:
D Fam(D)Σ
∆⊣.
13The double category Dhas strong coproducts when the left adjoint Σ :Fam(D)→Dis apseudo
double functor. Colax and strong finite coproducts inDare defined analogously, replacing the
double category Fam(D)withFinFam (D).
Recall that a double adjunction is in general between a colax double functor on the left and
a lax double functor on the right [GP04], [Gra19, §4.3]. In this case, the right adjoint is pseudo,
so we can see the adjunction as being in the 2-category Dbl clxof double categories, colax double
functors, and natural transformations. On the other hand, nothing requires the left adjoint to be
pseudo and we will see examples where it is not.
Another description of double coproducts is more minimal than the definition and so more
convenient to check in examples.
Proposition 4.2 (Double coproducts via universal arrows) .A double category Dhas colax coprod-
ucts if and only if
(i) for every object family (I,x)inD, there is a choice of object Σx:= Σ(I,x)inDand a
universal arrow
(!,ι) : (I,x)→∆Σx
from (I,x)to the functor ∆0:D0→Fam(D0);
(ii) for every proarrow family (A,m) : (I,x)∝⇕⊣√∫⊔≀→(J,y)inD, there is a choice of proarrow Σm:=
Σ(A,m) : Σx∝⇕⊣√∫⊔≀→ΣyinD, compatible with the choices on objects, and a universal arrow
(I,x) (J,y)
∆Σx ∆Σy∆Σmp(!,ι) (!,ι)(A,m)p
(!,ι)
from (A,m)to the functor ∆1:D1→Fam(D)1.
Moreover, in this case, the coproducts in Dare strong if and only if, for every pair of composable
families (I,x)(A,m)∝⇕⊣√∫⊔≀→(J,y)(B,n)∝⇕⊣√∫⊔≀→(K,z)and for every family (I,x), the canonical comparison cells
Σx Σz
Σx Σy ΣzΣ(m⊙n)p
ΣmpΣnpΣm,n andΣx Σx
Σx ΣxidΣxpΣ(idx)p
Σx
are isomorphisms in D1.
Proof.This is a direct application of the equivalence between adjunctions and universal arrows for
double categories, stated for right adjoints in [GP04, Theorem 3.6] and [Gra19, Theorem 4.3.6].
Note that condition (i) says nothing more than that the underlying category D0has coproducts
(cf.Proposition2.2). Condition(ii)ismoreelaborate. Itimplies, butisstrongerthan, thestatement
thatD1has coproducts.
14The canonical comparison cells in the final statement of the proposition are the unique solutions
to the equations
xi zk
Σx Σz
Σx Σy ΣzΣ(m⊙n)p
ΣmpΣnpιi ιkma⊙mbp
Σm,nι(a,b)
=xiyjzk
Σx Σy Σzmapmbp
ιi ιj
Σmpιk
Σnpιa ιb, (ia∝⇕⊣√∫⊔≀→jb∝⇕⊣√∫⊔≀→k) : (IA∝⇕⊣√∫⊔≀→JB∝⇕⊣√∫⊔≀→K).
and
xixi
Σx Σx
Σx ΣxidΣxpΣ(idx)pιi ιiidxip
Σxιi
=xixi
Σx Σxidxip
ιi ιi
idΣxpidιi, i∈I,
afforded by the universal properties of the universal arrows. When the assignments in Proposi-
tion 4.2 are extended to a colax double functor Σ :Fam(D)→D, the cells above become the
composition and identity comparison cells for the colax functor.
Under mild conditions, double categories of spans have coproducts.
Theorem 4.3 (Coproducts of spans) .LetSbe a category with pullbacks and (finite) coproducts.
Then the double category Span(S)has colax (finite) coproducts.
Moreover, if Sis an (finitary or infinitary) extensive category, then the (finite or arbitrary)
coproducts in Span(S)are strong.
Proof.We first show that Span(S)has colax coproducts. By assumption, the category Span(S)0=S
has coproducts. Suppose that (A,m) : (I,x)∝⇕⊣√∫⊔≀→(J,y)is a family of spans in S, say of the form
ma= (xiℓa←−sara−→yj)for eacha:i∝⇕⊣√∫⊔≀→j. We take the coproduct Σs=/summationtext
a∈AsainSof the apexes
and then form the span Σx←Σs→Σyby taking the copairing in Sof the morphisms
Σxιi← −xiℓa←−sara−→yjιj− →Σy, (ia∝⇕⊣√∫⊔≀→j) : (IA∝⇕⊣√∫⊔≀→J).
The accompanying family of coprojections is
(I,x) (J,y)
∆Σx ∆Σy∆Σmp(A,m)p
ι ιι ↭xisayj
Σx Σs Σyιiℓa
ιara
ιj, (ia∝⇕⊣√∫⊔≀→j) : (IA∝⇕⊣√∫⊔≀→J).
As for the universal property, suppose that n= (wℓ← −tr− →z)is another span in Salong with a
family of span maps
(I,x) (J,y)
∆w ∆z∆np(A,m)p
f gh↭xisayj
wtzℓa ra
ha fi gi
ℓ r, (ia∝⇕⊣√∫⊔≀→j) : (IA∝⇕⊣√∫⊔≀→J).
15Taking the copairings f:= [fi]i∈I,g:= [gj]j∈J, andh:= [ha]a∈A, we get a unique map of spans
Σx Σs Σy
wtzf
ℓ rh g
that factors through the coprojections. Therefore, by Proposition 4.2, the double category Span(S)
has colax coproducts.
Now suppose that Sis an extensive category. Under the assumption that Shas coproducts and
pullbacks, extensivity amounts to the properties that coproducts in Sare disjoint and stable under
pullback [LS06, Proposition 17], cf. [CLW93, Proposition 2.14]. We need to see that Span(S)has
strongcoproducts. Given composable families of spans (I,x)(A,m)∝⇕⊣√∫⊔≀→(J,y)(B,n)∝⇕⊣√∫⊔≀→(K,z), with families
of apexessandt, we must show that the canonical comparison map in S
Σ(s×yt)
Σs×ΣyΣt↭sa×yjtb
sa Σs×ΣyΣttb
Σs yj Σt
Σyιaπ1 π2
ιb⌟σa,b
ra
ιjℓb,(ia∝⇕⊣√∫⊔≀→jb∝⇕⊣√∫⊔≀→k) : (IA∝⇕⊣√∫⊔≀→JB∝⇕⊣√∫⊔≀→K).
on the left, which is determined by the family of comparisons σa,bon the right, is an isomorphism.
This we do by decomposing it into several parts
/summationdisplay
ia∝⇕⊣√∫⊔≀→jb∝⇕⊣√∫⊔≀→ksa×yjtb/summationdisplay
ia∝⇕⊣√∫⊔≀→jb∝⇕⊣√∫⊔≀→ksa×Σytb
Σs×ΣyΣt/summationdisplay
a:i∝⇕⊣√∫⊔≀→j
b:j′∝⇕⊣√∫⊔≀→ksa×Σytb ∼=∼=
∼= ↭sa×yjtbsa×Σytb
Σs×ΣyΣtsa×Σytbϕa,b
σa,b
ψa,b
that we individually verify to be isomorphisms. Starting from the end, the final comparison mor-
phism in this sequence
/summationdisplay
a:i∝⇕⊣√∫⊔≀→j
b:j′∝⇕⊣√∫⊔≀→ksa×Σytb
Σs×ΣyΣt∼=↭sasa×Σytbtb
yj Σs Σs×ΣyΣt Σtyj′
Σy Σyιaπ1 π2
ιb
π1ψa,bra
ιjπ2ℓb
ιj′⌟,a:i∝⇕⊣√∫⊔≀→j
b:j′∝⇕⊣√∫⊔≀→k,
isanisomorphismbecausecoproductsin Sarestableunderpullback. Next,weanalyzethepullbacks
sa×Σytbinvolved by cases. In the case that j=j′, i.e., (a,b)∈A×JB, we form the pasting of
16pullback squares
sa×yjtbtbtb
sa yjyj
sa yj Σyraℓb⌟
ra ιjιj⌟ℓb
,
where the bottom right square is a pullback, i.e., the coprojection ιj:yj→Σyis monic, because
coproducts in Sare disjoint. Thus, the overall square is also a pullback and we obtain a canonical
isomorphism ϕa,b:sa×yjtb∼=− →sa×Σytb. Otherwise, j̸=j′and the pullback of saιj− →Σyιj′←−tb
is the initial object, again because coproducts in Sare disjoint. This verifies the the first two
isomorphisms in the decomposition and completes the proof.
Corollary 4.4. The double category Spanhas strong coproducts, and FinSpanhas strong finite
coproducts.
Proof.The category S=Setis infinitary extensive, and FinSetis finitary extensive.
Double categories of matrices also have strong coproducts. This is true without further assump-
tions as distributivity is needed to construct a double category in the first place. By a distributive
monoidal category , we will mean a symmetric monoidal category with arbitrary coproducts over
which the tensor distributes separately in each variable.
Proposition 4.5 (Coproducts of matrices) .For any distributive monoidal category V, the double
category ofV-matrices,V-Mat, has strong coproducts.
Proof.Clearly, the underlying category V-Mat0=Sethas coproducts. Given a family of V-matrices
(A,M ) : (I,X)∝⇕⊣√∫⊔≀→(J,Y), which have the form Ma:Xi×Yj→Vfor each element a:i∝⇕⊣√∫⊔≀→j, the
coproduct ΣM: ΣX∝⇕⊣√∫⊔≀→ΣYis theV-matrix ΣM: ΣX×ΣY→ Vdefined pointwise by the
coproducts inV
ΣM(xi,yj):=/summationdisplay
a:i∝⇕⊣√∫⊔≀→jMa(xi,yj),i∈I, j∈J,
xi∈Xi, yj∈Yj.
Here, for fixediandj, the sum ranges over all a∈Asuch thatℓ(a) =iandr(a) =j. The
accompanying coprojections
XiYj
ΣX ΣYιiMap
ιj
ΣMpιa, (ia∝⇕⊣√∫⊔≀→j) : (IA∝⇕⊣√∫⊔≀→J),
are the maps of matrices with components given by coprojections in V
Ma(xi,yj)ιa−→/summationdisplay
a′:i∝⇕⊣√∫⊔≀→jMa′(xi,yj) = ΣM(xi,yj),a:i∝⇕⊣√∫⊔≀→j,
xi∈Xi, yj∈Yj.
The universal property of the coproduct in V-Matis easily verified using the universal properties
of coproducts in Setand inV.
17SoV-Mathas colax coproducts. To see that it has strong coproducts, take composable families
ofV-matrices (I,X)(A,M )∝⇕⊣√∫⊔≀→(J,Y)(B,N)∝⇕⊣√∫⊔≀→(K,Z). The domain of the comparison cell Σ(M⊙N)→
ΣM⊙ΣNhas elements
Σ(M⊙N)(xi,zk) =/summationdisplay
ia∝⇕⊣√∫⊔≀→jb∝⇕⊣√∫⊔≀→k(Ma⊙Nb)(xi,zk) =/summationdisplay
ia∝⇕⊣√∫⊔≀→jb∝⇕⊣√∫⊔≀→k/summationdisplay
yj∈YjMa(xi,yj)⊗Nb(yj,zk)
for each choice of i∈I,k∈K,xi∈Xi, andzk∈Zk, where the outer sum ranges over all
(a,b)∈A×JBsuch thatℓ(a) =iandr(b) =k. Rearranging the sums, the right-hand side is
isomorphic inVto/summationdisplay
j∈J/summationdisplay
yj∈Yj/summationdisplay
a:i∝⇕⊣√∫⊔≀→j/summationdisplay
b:j∝⇕⊣√∫⊔≀→kMa(xi,yj)⊗Mb(yj,zk).
Using the distributivity of tensors over coproducts in V, this is in turn isomorphic to
/summationdisplay
j∈J/summationdisplay
yj∈YjΣM(xi,yj)⊗ΣN(yj,zk)∼=(ΣM⊙ΣN)(xi,zk).
The composite of these isomorphisms is one component of the comparison cell between matrices.
Since all the components are isomorphisms, the comparison cell is itself an isomorphism.
From the equivalence Mat≃Span, we obtain an independent proof of the previous corollary.
Corollary 4.6. The double category Mathas strong coproducts.
Proof.The cartesian monoidal category V=Setis distributive.
5 Functors between double categories with coproducts
We have yet to characterize Fam(D)as the free coproduct completion of the double category D,
as it must be. To even state such a result, we need a notion not just of coproducts but of double
functors that preserve coproducts. Unlike in the one-dimensional case, choices must be made to
define an ambient 2-category for the universal property of the free coproduct completion: between
colax and strong coproducts, between colax and pseudo double functors. We begin by saying what
it means for a colax functor to preserve coproducts, turning the characterization in Proposition 2.3
of preserving ordinary coproducts into the definition of preserving double coproducts.
Construction 5.1 (Functorality of double families) .Given a colax double functor F:D→E,
there is another colax double functor
Fam(F) :Fam(D)→Fam(E)
that acts on families of objects and proarrows in Dby post-composition with F, while preserving
indexing sets and spans. Specifically, Fam(F)sends
•an object family x:I→D0inDto the object family F0◦x:I→E0inE;
•a proarrow family (A,m) : (I,x)∝⇕⊣√∫⊔≀→(J,y)inDto the proarrow family in E:
IAJ
D0 D1 D0
E0 E1 E0F0ℓ
x m
s
F1
st
F0
tyr
.
18Similarly, Fam(F)acts on families of arrows and cells by post-whiskering with F. The composition
and identity comparisons for Fam(F)are families of composition and identity comparisons for F, to
be described in greater detail in Section 9 when they are needed. In particular, Fam(F)is pseudo
wheneverFis.
Given that the double functor Fam(F)acts by post-composition with F, it is only a mild
abuse of notation to write Fx:=Fam(F)(I,x)andFm:=Fam(F)(A,m)for this “elementwise”
application, and we will often do so.
Definition 5.2 (Preservation of double coproducts) .LetDandEbe double categories with colax
(possibly strong) coproducts. A colax functor F:D→Epreserves coproducts if the induced
morphism of adjunctions
Fam(D) D
Fam(E) EΣ⊣∆p
F Fam(F)
Σ⊣∆p(Φ,1)
is strong.
In this definition, the morphism of adjunctions is a cell in the double category of adjunctions
[Gra19, §3.1.5] in Dbl clx, the 2-category of double categories, colax double functors, and natural
transformations. The morphism of adjunctions is strongif the identity transformation on the left
Fam(D) D
Fam(E) EF∆D
Fam(F)
∆E1 ↭Fam(D) D
Fam(E) EFΣD
Fam(F)
ΣEΦ
has a mate Φ, as shown on the right, that is a natural isomorphism. The components of Φare, on
an object family (I,x)inD, the usual coproduct comparison Φx: ΣFx→FΣxand, on a proarrow
family (A,m) : (I,x)∝⇕⊣√∫⊔≀→(J,y)inD, the cell on the left
ΣFx ΣFy
FΣxFΣyΦxΣFmp
Φy
FΣmpΦm ↭FxiFyj
FΣxFΣyFιiFmap
Fιj
FΣmpFιa,(ia∝⇕⊣√∫⊔≀→j) : (IA∝⇕⊣√∫⊔≀→J).
that is uniquely determined by the family of cells on the right, using the universal property of the
coproduct of FminE. Thus, a colax functor Fpreserves coproducts just when the components
ΦxandΦmare all isomorphisms in E0andE1, respectively.
Example 5.3 (Preserving coproducts of spans) .As observed in [Gra19, §C3.11], for any functor
F:C→Dbetween categories with pullbacks, there is a unitary colax functor
Span(F) :Span(C)→Span(D)
that applies Fpointwise to spans and maps between them, and Span(F)is pseudo if and only if F
preserves pullbacks.
Suppose that Cand Dhave coproducts, so that Span(C)andSpan(D)have colax coproducts
(Theorem 4.3). Then the colax functor Span(F)preserves coproducts if and only if Fpreserves
coproducts in the usual sense.
19To express that Fam(D)is the free coproduct cocompletion of D, we work in the 2-category
of double categories with colax coproducts, colax functors that preserve coproducts, and natural
transformations. However, Fam(D)itself has strong coproducts, which turns out to be important
in the proof.
Theorem 5.4 (Free double coproduct completion) .For any double category D, the double category
Fam(D)has strong coproducts. Moreover, Fam(D)is the free coproduct completion of Din the sense
that, for any colax functor F:D→Einto a double category Ewith colax coproducts, there exists
a coproduct-preserving colax functor ˆF:Fam(D)→Emaking the triangle
Fam(D)
D EˆF∆
F(5.1)
commute, and ˆFis unique up to natural isomorphism.
Proof.We first show that Fam(D)has strong coproducts, which are reminiscent of coproducts in
Span(S)(Theorem 4.3). As reviewed in Theorem 2.4, the underlying category Fam(D)0=Fam(D0)
has coproducts and is in fact the free coproduct completion of D0. So suppose that
(A,(S,m)) : (I,(U,x))∝⇕⊣√∫⊔≀→(J,(V,y))
is a family of proarrows in Fam(D), i.e., a proarrow in Fam(Fam(D)). This data comprises a span
of setsIℓ← −Ar− →Jtogether with a family of proarrows
(Sa,ma) : (Ui,xi)∝⇕⊣√∫⊔≀→(Vj,yj), (ia∝⇕⊣√∫⊔≀→j) : (IA∝⇕⊣√∫⊔≀→J),
inFam(D). Each of the latter consists, in turn, of a span of sets Uiℓa←−Sara−→Vjtogether with a
family of proarrows
ma,s:xi,u∝⇕⊣√∫⊔≀→yj,v, (us∝⇕⊣√∫⊔≀→v) : (UiSa∝⇕⊣√∫⊔≀→Vj),
inD. Now, a coproduct Σ(S,m) : Σ(U,x)∝⇕⊣√∫⊔≀→Σ(V,y)of this family of families is constructed by
taking the span ΣU←ΣS→ΣVdefined by the copairings of the functions
ΣUιi← −Uiℓa←−Sara−→Vjιj− →ΣV, (ia∝⇕⊣√∫⊔≀→j) : (IA∝⇕⊣√∫⊔≀→J),
together with the family of proarrows in D
ΣU ΣS ΣV
D0 D1 D0x
sm
ty,
where again the copairings x:= [xi]i∈I,y:= [yj]j∈J, andm:= [ma]a∈Aare defined using the
universal property of coproducts in Set. For each element a:i∝⇕⊣√∫⊔≀→j, the coprojection
(Ui,xi) (Vj,yj)
(⊔U,x) (⊔V,y)(ιi,1xi)(Sa,ma)p
(⊔S,m)p(ιj,1yj) (ιa,1ma)
20inFam(D)consists of the map of spans
UiSaVj
ΣU ΣS ΣVιi ιa ιjℓa ra
,xi,u yj,v
xιi(u)yιj(v)ma,sp
mιa(s)p1,(us∝⇕⊣√∫⊔≀→v) : (UiSa∝⇕⊣√∫⊔≀→Vj),
on the left and along with the family of identity cells in Don the right. The universal property of
the coproduct in Fam(D)follows easily from that of coproducts in Set.
We merely sketch the proof that coproducts in Fam(D)are strong, being similar to the proof
that coproducts in Span(S)are strong (Theorem 4.3). For any composable pair of proarrows
(I,(U,x)) (J,(V,y)) (K,(W,z))(A,(S,m))
p(B,(T,n))
p
inFam(Fam(D)), we have canonical bijections
/unionsqdisplay
(a,b)∈A×JBSa×VjTb/unionsqdisplay
(a,b)∈A×BSa×⊔VTb⊔S×⊔V⊔T∼=∼=
due to the extensivity of Set. These show that the canonical comparison cell is an isomorphism.
It remains to prove the universal property of the free coproduct completion. Any colax functor
ˆF:Fam(D)→Emaking the triangle (5.1) commute is uniquely determined on singleton families
of objects and proarrows, and on maps between them, by F:D→E. But arbitrary families of
objects and proarrows in Dare coproducts in Fam(D)of singleton families, so if ˆFis to preserve
coproducts, it must send these to coproducts of fixed objects and proarrows in E. By functorality
and the universal property of coproducts, ˆFis then also determined on arrows and cells in Fam(D).
Finally, the composition and identity comparisons of ˆFare uniquely determined by those of F,
using the dual of Lemma 9.3, proved in detail later, along with the fact that coproducts in Fam(D)
are strong. So, since Eis assumed to have colax coproducts, we can choose coproducts in Eto
define ˆF, and such ˆFis unique up to the choice of coproducts, hence up to natural isomorphism
commuting with the triangle (5.1).
Corollary 5.5. The double category Spanis the free coproduct completion of the terminal double
category.
Proof.Immediate from the preceding theorem and Corollary 3.5.
6 Lax products in double categories
We turn now from coproducts to products in double categories. Of course, products are dual to
coproducts, so for certain abstract purposes nothing further need be said. For other purposes that
is not enough. Certainly, to understand any examples, a concrete description of products in double
categoriesisneeded, andwewillgiveone. Butthereisadeeperdivergencebetweendoubleproducts
and coproducts. Famously, the symmetry arising from duality is partly broken in category theory
due to the special role played by Set, which is far from being self-dual. The same is true in double
category theory due to the special role played by Span, but to an even greater degree. We will see
that the prototypical double categories of spans and of matrices have strong coproducts, as shown
in Section 4, but have laxproducts.
21Let us recall the principle of duality in double category theory. The oppositization 2-functor
op :Catco→Catsends a category to its opposite category, preserving the orientation of functors
and reversing that of natural transformations. It also preserves 2-pullbacks. Thus, the opposite
Dopof a double category Dcan be defined by applying the oppositization 2-functor to D, viewed as a
pseudocategory in Cat. So the categories underlying Dopare(Dop)0= (D0)opand(Dop)1= (D1)op.
Similarly, the oppositeFop:Dop→Eopof a lax or colax double functor F:D→Ehas underlying
functors (Fop)0= (F0)opand(Fop)1= (F1)op. But the orientations of the composition and identity
comparisonsarereversed, sothatalax functorhasacolaxoppositeandviceversa. Theorientations
of natural transformations between double functors are also reserved. Altogether, then, there are
oppositization 2-functors
op :Dblco
lax→Dbl clxand op :Dblco
clx→Dbl lax
that are inverse to each other. These both restrict on pseudo double functors to an involutive
2-functor op :Dblco→Dbl.
Definition 6.1 (Contravariant double families) .Thecontravariant double category of fami-
liesin a double category Dis the double category Fam∗(D)defined by the relation
Fam∗(D)op=Fam(Dop).
For contrast, Fam(D)can also be called the covariant double category of families.
The covariant and contravariant double categories of families have the same objects and proar-
rows but different arrows and cells. Concretely, the double category Fam∗(D)has
•as objects, an indexing set Itogether with an I-indexed family x:I→D0, consisting of
objectsxiinDfori∈I;
•as arrows (I,x)→(J,y), a function f0:J→Itogether with a J-indexed family fof
morphisms in Dof the form fj:xf0(j)→yjforj∈J;
•as proarrows (I,x)∝⇕⊣√∫⊔≀→(J,y), anindexing span Iℓ← −Ar− →Jtogether with an A-indexed
familym:A→D1, consisting of proarrows in Dof the form ma:xi∝⇕⊣√∫⊔≀→yjfor eacha:i∝⇕⊣√∫⊔≀→j;
•as cells(I,x) (J,y)
(K,w) (L,z)(A,m)p
(f0,f) (g0,g)
(B,n)p, a map of spans (f0,α0,g0)as shown on the left below together
with aB-indexed family αof cells in Dof the form on the right:
IAJ
KBLf0 g0ℓ
ℓ rα0r xf0(k)yg0(ℓ)
wk zℓfkgℓmα0(b)p
nbpαb,(kb∝⇕⊣√∫⊔≀→ℓ) : (KB∝⇕⊣√∫⊔≀→L).
The duality principle for double categories extends to double adjunctions. Like any 2-functor,
the oppositization 2-functor op :Catco→Catpreserves adjunctions, but the “co” implies that left
and right are exchanged. So an adjunction F⊣Gbecomes an adjunction Gop⊣Fop. Similarly,
the oppositization 2-functor op :Dblco
lax→Dbl clxturns a pseudo-lax adjunction F⊣Ginto a
colax-pseudo adjunction Gop⊣Fop, whereas the 2-functor op :Dblco
clx→Dbl laxturns a colax-
pseudo adjunction into a pseudo-lax adjunction. The following definition is thus seen to be dual to
Definition 4.1 in the sense that lax products in Dare colax coproducts in Dop.
22Definition 6.2 (Double products) .A double category Dhas lax products if the double functor
∆ :D→Fam∗(D)has a lax right adjoint:
D Fam∗(D)∆
Π⊣.
The double category Dhas strong products if the right adjoint Π :Fam∗(D)→Dis pseudo.
As noted in the Introduction, double products of this kind were first proposed in a talk by
Robert Paré [Par09]. We proceed with some straightforward dualizations of Section 4.
Proposition 6.3 (Double products via universal arrows) .A double category Dhas lax products if
and only if
(i) for every object family (I,x)inD, there is a choice of object Πx:= Π(I,x)inDand a
universal arrow
(!,π) : ∆Πx→(I,x)
from the functor ∆0:D0→Fam∗(D0)to(I,x);
(ii) for every proarrow family (A,m) : (I,x)∝⇕⊣√∫⊔≀→(J,y)inD, there is a choice of proarrow Πm:=
Π(A,m) : Πx∝⇕⊣√∫⊔≀→ΠyinD, compatible with the choices above, and a universal arrow
∆Πx ∆Πy
(I,x) (J,y)∆Πmp
(!,π) (!,π)
(A,m)p(!,π)
from the functor ∆1:D1→Fam∗(D)1to(A,m).
Moreover, in this case, the products are strong if and only if, for every pair of composable families
(I,x)(A,m)∝⇕⊣√∫⊔≀→(J,y)(B,n)∝⇕⊣√∫⊔≀→(K,z)and for every family (I,x), the canonical comparison cells
Πx Πy Πz
Πx ΠzΠ(m⊙n)pΠmpΠnp
Πm,nandΠx Πx
Πx ΠxidΠxp
Π(idx)pΠx
are isomorphisms in D1.
Proof.This proposition is dual to Proposition 4.2; alternatively, it follows immediately from [GP04,
Theorem 3.6] or [Gra19, Theorem 4.3.6].
The canonical comparison cells in the final statement of the proposition are the unique solutions
to the equations
Πx Πy Σz
Πx Πz
xi zkΠ(m⊙n)pΠmpΠnp
πi πk
ma⊙mbpΠm,n
π(a,b)=Πx Πy Πz
xiyjzk mapmbpπi πj πkΠnpΠmp
πb πa , (ia∝⇕⊣√∫⊔≀→jb∝⇕⊣√∫⊔≀→k) : (IA∝⇕⊣√∫⊔≀→JB∝⇕⊣√∫⊔≀→K).(6.1)
23and
Πx Πx
Πx Πx
xixiidΠxp
Π(idx)p
πi πi
idxipπiΠx
=Πx Πx
xixiidxipπi πiidΠxp
idπi, i∈I, (6.2)
afforded by the universal properties of the universal arrows. The comparison cells form the laxators
and unitors of the lax double functor Π :Fam∗(D)→D.
Double categories of spans are the prime example of double categories with lax products, and
we will see that certain products of spans aregenuinely lax. As preparation to describe products of
spans, recall that the category of elements construction has a right adjoint [Par90, Proposition 8].
Construction 6.4 (Adjoint elements constructions) .Fixing a category C, there is a functor/integraltextC:
SetC→Catthat sends each copresheaf XonCto its category of elements/integraltextX. Conversely, for any
category X, there is a copresheaf El/C(X)onCwhose elements of type c∈Care the generalized
elements of Xof shapec/C. In other words,
El/C(X):=Cat(−/C,X) :C→Set.
This construction is functorial in X, and it is right adjoint to the category of elements:
SetCCat/integraltextC
El/C⊣.
Theorem6.5 (Productsofspans) .LetSbe a (finitely) complete category. Then the double category
Span(S)has lax (finite) products.
Proof.We consider the infinitary case. By assumption, the underlying category Span(S)0=Shas
products. So suppose that (A,m) : (I,x)∝⇕⊣√∫⊔≀→(J,y)is a family of spans in S. Letting span :=
{•←•→•} be the walking span, the span of sets I←A→Jcan be identified with a copresheaf
F:span→Set, and the family of spans in Son the left
I A J
S Span(S)1 Sx
s ty m ↭ span SetF
El/span(S)m
can be identified with a natural transformation as on the right. The latter is equivalent, via the
adjunction in Construction 6.4, to a diagram M:/integraltextF→Swhose shape is the category of elements
ofF:span→Set. The product of the spans (A,m) : (I,x)∝⇕⊣√∫⊔≀→(J,y)is defined to be the span
Πx←Πm→ΠyinSobtained by taking limits of the following diagrams in S.
I/integraltextFJ
SxMy
24Writing the original spans as ma= (xiℓa←−sara−→yj)for eacha:i∝⇕⊣√∫⊔≀→j, the apex Πmof the product
span can be depicted schematically as
Πm:= lim/integraltext
FM= lim
iorjor
a:i′∝⇕⊣√∫⊔≀→j′
xisayj
xi′ yj′...ℓa ra......
.
The projection cells are the evident maps of spans
Πx Πm Πy
xisaykπi
ℓaraπa πj, (ia∝⇕⊣√∫⊔≀→j) : (IA∝⇕⊣√∫⊔≀→J),
where the squares commute because the apex Πmof the top span is, in particular, the apex of a
cone over the diagram M:/integraltextF→S.
To prove the universal property, suppose given families of maps f: ∆x→xandg: ∆y→y
along with a family of maps of spans
xsy
xisayjfiℓ r
ha
ℓagj
ra, (ia∝⇕⊣√∫⊔≀→j) : (IA∝⇕⊣√∫⊔≀→J).
Taken together, the maps fi◦l,gj◦r, andha, constitute a cone over the diagram M:/integraltextF→S
with apexs. By the universal property of the limit Πm= limMinS, there exists a unique map
h:s→Πmfactoring each fi◦ℓthroughπi, eachgj◦rthroughπj, and eachhathroughπa. Putting
f:=⟨fi⟩i∈Iandg:=⟨gj⟩j∈J, this is equivalent to there being a unique map of spans
xsy
Πx Πm Πyh fℓ r
g
factoring the span map (fi,ha,gj)through the projection (πi,πa,πj)for eacha:i∝⇕⊣√∫⊔≀→j.
Corollary 6.6 (Coproducts of cospans) .LetSbe a (finitely) cocomplete category. Then the double
category Cospan (S)has colax (finite) coproducts.
Proof.This follows by duality, since Cospan (S)op=Span(Sop).
Corollary 6.7. The double category Spanhas lax products, and FinSpanhas lax finite products.
Dually, Cospanhas colax coproducts and FinCospan has colax finite coproducts.
Proof.The category Setis complete, and FinSetis finitely complete.
We now prove that double categories of matrices have lax products when the base has products.
We do not yet assume that the monoidal product in the base category is the cartesian product.
Proposition 6.8 (Products of matrices) .For any distributive monoidal category Vwith (finite)
products, the double category V-Mathas lax (finite) products.
25Proof.Clearly, the underlying category V-Mat0=Sethas products. Given a family (A,M ) :
(I,X)∝⇕⊣√∫⊔≀→(J,Y)ofV-matrices, the product ΠM: ΠX∝⇕⊣√∫⊔≀→ΠYis theV-matrix defined pointwise by
the products inV
ΠM(x,y):=/productdisplay
a:i∝⇕⊣√∫⊔≀→jMa(xi,yj), x∈ΠX=/productdisplay
i∈IXi, y∈ΠY=/productdisplay
j∈JYj,
where each product in Vranges over all (ia∝⇕⊣√∫⊔≀→j) : (IA∝⇕⊣√∫⊔≀→J). The associated projection cell shown
on the left
ΠX ΠY
XiYjπiΠMp
πj
Mapπa ↭ΠM(x,y)
Ma(xi,yj)
Ma(πi(x),πj(y))πa
,x∈ΠX
y∈ΠY,
is given by the family of projection maps in Von the right. The universal property follows straight-
forwardly from that of products in V.
Products in a double category specialize to reproduce a number of familiar concepts. Two
especially important ones are parallel products and local products.
Example 6.9 (Parallel products) .Aparallel product in a double category Dis a product in Dof
a family of proarrows of form (idI,m) : (I,x)∝⇕⊣√∫⊔≀→(I,y), where idIis the identity span I1← −I1− →I.
The product Πm: Πx→Πyis traditionally denoted
/productdisplay
i∈Imi:/productdisplay
i∈Ixi∝⇕⊣√∫⊔≀→/productdisplay
i∈Iyi.
Let us isolate this special case by saying that a double category Dhas lax parallel products if,
for every set I, the diagonal double functor ∆I:D→DIhas a lax right adjoint ×I:DI→D, and
has strong parallel products if the right adjoints are pseudo. With this terminology, a double
category is precartesian in the sense of Aleiferi [Ale18, §4.1] just when it has lax finite parallel
products, and it is cartesian just when it has strong finite parallel products.
In the double category Span(S), a parallel product of spans is computed pointwise as the prod-
ucts in Sof the apexes and of the left and right feet. This can be seen directly, or as a special case
of Theorem 6.5. In V-Mat, the product of matrices Mi:Xi∝⇕⊣√∫⊔≀→Yi,i∈I, is
ΠM(x,y) =/productdisplay
i∈IMi(xi,yi), x∈/productdisplay
i∈IXi, y∈/productdisplay
i∈IYi.
Example 6.10 (Local products) .Alocal product in a double category Dis a product in Dof a
proarrow family of form (tI,m) : (1,x)∝⇕⊣√∫⊔≀→(1,y), wheretIis the span 1!← −I!− →1. The local product
Πm:= Π(tI,m)can be denoted/producttext
i∈Imi:x∝⇕⊣√∫⊔≀→y.
As the name suggests, a local product in a double category Dis, in particular, a local product
in the underlying bicategory of D, i.e., a product in the hom-category D(x,y)of proarrows x∝⇕⊣√∫⊔≀→y
and globular cells between them. However, it is important to realize that the double-categorical
universal property is stronger than the bicategorical one. The double-categorical universal property
says that for any arrows f:w→xandg:z→yand any family of cellswz
xynp
fg
mipαifori∈I, there
26exists a unique cell αfactoring each cell αithrough the projection πi:
wz
xyf gnp
mipαi =wz
xy
xyf gnp
Πmp
mipα
πi, i∈I.
The bicategorical universal property restricts fandgto be the identities 1xand1y.
For example, in Span(S), the local product of spans mi= (xℓi← −siri− →y),i∈I, has as its apex
the limit of the diagram in S
si
x...y
si′ℓi
ℓi′ri
ri′
(Theorem6.5)orequivalentlytheproductoftheobjects (si,⟨ℓi,ri⟩)i∈Iintheslicecategory S/(x×y).
InV-Mat, the local product of matrices Mi:X∝⇕⊣√∫⊔≀→Y,i∈I, is simply the pointwise product in V:
ΠM(x,y) =/productdisplay
i∈IMi(x,y), x∈X, y∈Y.
Another special class of products in a double category, those built out of identity proarrows,
will be studied Section 8. Before that, we need to determine when products can be expected to
commute with external composition.
7 Iso-strong products in double categories
It is easy to find examples showing that products in a double category Sof spans or matrices
constitute a genuinely lax functor Π :Fam∗(S)→S. Indeed, a “generic” choice of proarrow families
has this property. Here is a simple example involving local products. Let Vbe a distributive
category and let
XYZM1p
M2pNp
beV-matrices. Then, on the one hand, we have
(ΠM⊙N)(x,z) = ((M1×M2)⊙N)(x,z)∼=/summationdisplay
y∈YM1(x,y)×M2(x,y)×N(y,z)
for eachx∈Xandz∈Z. On the other hand, by distributivity, we have
Π(M⊙∆N)(x,z) = ((M1⊙N)×(M2⊙N))(x,z)
∼=/summationdisplay
(y,y′)∈Y×YM1(x,y)×N(y,z)×M2(x,y′)×N(y′,z).
Each canonical comparison map in Vsends the summand indexed by yin the first sum to the
summand indexed by the diagonal pair (y,y)in the second sum. These maps are hardly ever
isomorphisms.
27The class of proarrow products expected to commute, up to isomorphism, with external com-
position and identities are singled out in the following definition.
Definition 7.1 (Iso-strong products) .A double category Dhasiso-strong products when
(i)Dhas lax products;
(ii) for every pair of proarrow families (I,x)(A,m)∝⇕⊣√∫⊔≀→(J,y)(B,n)∝⇕⊣√∫⊔≀→(K,z)inDsuch that the legs A→J
andJ←Bare isomorphisms (bijections), the composition comparison cell
Πm,n: Πm⊙Πn→Π(m⊙n)
is an isomorphism; and
(iii) for every object family (I,x)inD, the identity comparison cell
Πx: idΠx→Π(idx)
is an isomorphism.
A double category with iso-strong finite products has, in particular, strong finite parallel prod-
ucts (Example 6.9) and so is a cartesian double category in the sense of Aleiferi [Ale18].
Remark 7.2 (Normal and unitary products) .The last condition in Definition 7.1 can be called
havingnormal lax products since it is equivalent to the existence of a normallax functor
Π :Fam∗(D)→D. It is reasonable to include in the definition of iso-strong products because it
involves the identity family id(I,x)= (idI,idx), whose indexing span has bijective legs.
As a practical matter, in double categories with normal lax products, it is straightforward to
choose products so that Π :Fam∗(D)→Dis aunitarylax functor [Gra19, §3.5.2], i.e., the equations
Π(idx) = id Πxhold strictly. A double category with such a choice of products is said to be equipped
withunitary lax products . We will not assume that such a choice as been made, although it
can be convenient to do so.
Proposition 7.3 (Iso-strong products of spans) .LetSbe (finitely) complete category. Then the
double category Span(S)has iso-strong (finite) products.
Proof.ThatSpan(S)has lax products has been shown in Theorem 6.5, and that they are normal
is both obvious and known from the study of Span(S)as a cartesian double category. We explicitly
construct the composition comparison Πm,nfor families of spans (I,x)(A,m)∝⇕⊣√∫⊔≀→(J,y)(B,n)∝⇕⊣√∫⊔≀→(K,z).
By reducing the pullback of limits to a single limit, the composite of products Πm⊙Πncan be
described similarly to the proof of Theorem 6.5. Let
span⊙:=span +1span ={•←•→•←•→•}
be the walking pair of composable spans. Then the given data on the left
IA JB K
S Span(S)1 S Span(S)1 Ss ts tz n y m x ↭ span⊙ SetF
El/span⊙(S)
can be identified with a copresheaf F:span⊙→Setalong with a natural transformation as on the
right, which is in turn equivalent to a diagram D:/integraltextF→Sby Construction 6.4. The apex of the
composite span Πm⊙Πnis isomorphic to the limit of the diagam DinS.
28The product of composites Π(m⊙n)can also be described in this way by reducing the limit of
pullbacks to a single limit. As before, the data on the left
IA×JBA×JBA×JBK
S Span(S)1 S Span(S)1 Sx y◦πJ z
s t s tm◦πA n◦πB ↭ span⊙ SetF′
El/span⊙(S)
is equivalent to a copresheaf F′and a natural transformation as on the right, which is equivalent
to a diagram D′:/integraltextF′→S. The apex of the span Π(m⊙n)is isomorphic to the limit of D′inS.
By the functorality of the elements construction, the morphism of copresheaves
I A J B K
IA×JBA×JBA×JBKπB πA πJ ↭ span⊙ SetF
F′
induces a functor/integraltextF′→/integraltextFthat is also a morphism D′→Din the slice category Cat/Sof
diagrams in S. The functorality of limits with respect to morphisms in (Cat/S)opyields the apex
map in the comparison cell Πm,n: Πm⊙Πn→Π(m⊙n). Now, if the legs A→JandJ←Bare
isomorphisms, then so are all the projections πA,πB, andπJout of the pullback A×JB. Thus,
F′⇒Fis a natural isomorphism and, by the functorality of the subsequent constructions, the
comparison cell Πm,nis also an isomorphism.
Corollary 7.4 (Iso-strong coproducts of cospans) .LetSbe a (finitely) cocomplete category. Then
the double category Cospan (S)has iso-strong (finite) coproducts.
The proof makes it clear that essentially the onlycondition under which products of spans, or
dually coproducts of cospans, commute with external composition is the iso-strong condition in
Definition 7.1.
Under reasonable hypotheses, double categories of matrices also have iso-strong products. By a
distributive category , we will mean a category with finite products and arbitrary coproducts, over
which the products distribute.
Proposition 7.5 (Iso-strong products of matrices) .For any distributive category V, the double
categoryV-Mathas iso-strong finite products.
Proof.ThatV-Mathas lax finite products has been shown under weaker hypotheses in Proposi-
tion 6.8, and that they are normal under the present hypotheses follows from the isomorphisms
1×1∼=1and1×0∼=0inV. So suppose that (I,X)(A,M )−−−−→ (J,Y)(B,N)−−−−→ (K,Z)are families of
V-matrices such that the legs A→JandB→Jare isomorphisms. Denoting the inverse functions
bya:J→Aandb:J→B, we have the isomorphisms
(ΠM⊙ΠN)(x,z)∼=/summationdisplay
y∈ΠY/productdisplay
j∈JMa(j)(xℓ(a(j)),yj)×Nb(j)(yj,zr(b(j)))
and
Π(M⊙N)(x,z)∼=/productdisplay
j∈J/summationdisplay
yj∈YjMa(j)(xℓ(a(j)),yj)×Nb(j)(yj,zr(b(j)))
29inVfor eachx∈ΠXandy∈ΠY. The canonical distributivity morphism
/summationdisplay
y∈ΠY/productdisplay
j∈J−→/productdisplay
j∈J/summationdisplay
yj∈Yj
from the first object in Vto the second, involving the dependent product ΠY=/producttext
j∈JYjof sets, is
an isomorphism since Vis a distributive category.
8 Restrictions in double categories with products
In any double category with lax products, one can ask about the proarrows that arise as products
of identity proarrows for different choices of indexing span. Such proarrows and accompanying cells
carry a surprisingly intricate structure, all following from the universal property of products. An
example will illustrate the general situation.
Example 8.1 (Diagonal proarrows) .LetDbe a double category with lax finite products. The
diagonal proarrow on an object x∈Dis the product
δx:= Π
x
x
xidxp
idxp
:= Π(1!← −2 = 2,(idx,idx)), (8.1)
where the diagram of proarrows on the left is shorthand for the family of proarrows on the right.
Besides the proarrow δx:x∝⇕⊣√∫⊔≀→x2, this product consists of two projection cells
xx2
xxδxp
πi
idxpπi, i = 1,2.
From the diagonal δxand the parallel product id2
x, we can form unitandcounitcells
xx
xx2idxp
∆x
δxpη andxx2
x2x2δxp
∆x
id2
xpε,
where ∆x:x→x2is the usual diagonal map. The unit cell is the unique solution to the equations
xx
xx2
xxidxp
∆x
δxp
πi
idxpπiη
= 1idx= id 1x, i = 1,2,
given by the universal property of the product δx. Similarly, the counit cell is the unique solution
to the equations
xx2
x2x2
xx∆x
πiδxp
id2
xp
πi
idxpπiε
=xx2
xxδxp
πi
idxpπi, i = 1,2,
30given by the universal property of the parallel product id2
x.
Now suppose that the double category Dhasnormallax finite products (Remark 7.2). Then
the codomain id2
x:x2∝⇕⊣√∫⊔≀→x2of the counit cell can be interchanged with idx2:x2∝⇕⊣√∫⊔≀→x2. We obtain
the data that would make the arrow ∆x:x→x2and proarrow δx:x∝⇕⊣√∫⊔≀→x2into a companion pair,
provided the cells satisfy the two compatibility equations. Later, we will prove that they do by a
more abstract approach.
Conversely, suppose that we start with a cartesian equipment E. For simplicity, assume that
we have made a unitary choice of finite parallel products, so that idI
x= idxIfor each finite set I
and object x∈E. Define the diagonal proarrow δx:x∝⇕⊣√∫⊔≀→x2to be a companion to the diagonal
arrow ∆x:x→x2. Then there is a counit cell of the form
xx2
x2x2δxp
∆x
id2
xpε,
which is also the restriction of the parallel product id2
x= idx2along the arrows ∆xand1x2. Using
the projections for the product id2
x, we can form a new pair of projections
xx2
xxδxp
πi
idxpπi:=xx2
x2x2
xxδxp
∆x
id2
xp
πi πi
idxpε
πi, i = 1,2.
We obtain the data that would make δxinto a product in Eas in Equation (8.1), provided the
universal property is satisfied. That is indeed the case, as we will show later.
The rest of this section is dedicated to systematizing this example and explaining the connection
between cartesian equipments and double categories with finite products. The key observations are
that when a double category has lax products, restrictions are closed under products, and when the
products are normal, companions and conjoints are also closed under products. The latter result
is quicker to prove, so we begin with it.
Proposition 8.2 (Products of companions and conjoints) .LetDbe a double category with normal
lax products. Suppose that (f0,f) : (I,x)→(J,y)is a family of arrows fj:xf0(j)→yjinDeach
having a companion (fj)!:xf0(j)∝⇕⊣√∫⊔≀→yj. Then the product arrow Π(f0,f) : Πx→Πyalso has a
companion, namely the product Π(f∗
0,f!) : Πx∝⇕⊣√∫⊔≀→Πyof the family of companions (f!)j:= (fj)!
indexed by the conjoint span f∗
0= (If0←−J=J).
Dually, if each component fjhas a conjoint f∗
j:yj∝⇕⊣√∫⊔≀→xf0(j), then the product arrow Π(f0,f) :
Πx→Πyalso has a conjoint, namely the product Π((f0)!,f∗) : Πy∝⇕⊣√∫⊔≀→Πxof the family of conjoints
(f∗)j:=f∗
jindexed by the companion span (f0)!= (J=Jf0−→I).
Proof.Sinceconjointsinadoublecategoryarecompanionsintheoppositedoublecategoryandvice
versa, and since Fam∗(D)op=Fam(Dop), the dual of Proposition 3.8 states that the companion and
conjoint of the arrow (f0,f)inFam∗(D)are(f∗
0,f!)and((f0)!,f∗), respectively. The result follows
since the product operation Π :Fam∗(D)→D, being a normal lax functor, preserves companions
and conjoints [DPP10, Proposition 3.8].
31Corollary 8.3 (Companions and conjoints of pairings) .Letfi:x→yibe a family of arrows with
common domain in a double category with normal lax products. If each arrow fihas a companion,
then so does the pairing ⟨fi⟩i∈I:x→/producttext
i∈Iyi, and likewise for conjoints.
Proof.This is the special case of Proposition 8.2 with reindexing map of the form f0:I!− →1.
Corollary 8.4 (Structure proarrows between products) .LetDbe a double category with normal
lax products. For any families of objects (I,x)and(J,y)inDand function between indexing sets
f0:J→Isuch thatx◦f0=y, the product arrow Π(f0):= Π(f0,1) : Πx→Πyhas both a
companion Π(f0)!= Π(f∗
0,id) : Πx∝⇕⊣√∫⊔≀→Πyand a conjoint Π(f0)∗= Π((f0)!,id) : Πy∝⇕⊣√∫⊔≀→Πx.
Proof.This is another special case of Proposition 8.2 since, for any object xin a double category,
the identity arrow 1x:x→xalways has the identity proarrow idx:x∝⇕⊣√∫⊔≀→xas both its companion
and its conjoint [Shu10, Lemma 3.12].
Such results can be stated more succinctly using a special notation for reindexed families of
objects and proarrows. Given a function f0:J→Iand anI-indexed family of objects x, denote
byf∗
0(x):=x◦f0theJ-indexed family obtained by precomposing xwithf0. Similarly, given
anI-indexed parallel family of proarrows m:x∝⇕⊣√∫⊔≀→y, denote by f∗
0m:f∗
0x∝⇕⊣√∫⊔≀→f∗
0ytheJ-indexed
parallel family of proarrows obtained by precomposing all of x,y, andmwithf0. With this
notation, Corollary 8.4 can be restated as furnishing each structure arrow Π(f0) : Πx→Πf∗
0xwith
a companion Π(f0)!: Πx∝⇕⊣√∫⊔≀→Πf∗
0xand a conjoint Π(f0)∗: Πf∗
0x∝⇕⊣√∫⊔≀→Πx.
Important special cases of the last corollary include that, in any double category with normal
lax finite products,
•diagonals ∆x:x→x2have companions δx:x∝⇕⊣√∫⊔≀→x2and conjoints δ∗
x:x2∝⇕⊣√∫⊔≀→x, via the unique
functionf0: 2!− →1as constructed directly in Example 8.1;
•deletion arrows !x:x→1have companions εx:x∝⇕⊣√∫⊔≀→1and conjoints ε∗
x: 1∝⇕⊣√∫⊔≀→x, via the
functionf0: 0!− →1;
•projections πx:x×y→xandπy:x×y→yhave companions and conjoints, via the two
inclusionsf0: 1◁arrowhookleft→2; and
•braidingsσx,y:x×y→y×xhavecompanionsandconjoints, viatheswapfunction f0: 2∼=− →2,
which are mutually inverse up to globular isomorphism [Shu10, Lemma 3.20].
In fact, since companions and conjoints are functorial up to isomorphism, these special cases es-
sentially exhaust the content of Corollary 8.4 for finite products.
AshintedbyExample8.1, thenormalityassumptioninProposition8.2anditscorollariescanbe
discarded while retaining nearly the same universal property. We will see that structure proarrows
such as the diagonal δx:x∝⇕⊣√∫⊔≀→x2and codiagonal δ∗
x:x2∝⇕⊣√∫⊔≀→x, while not necessarily companions
or conjoints in a double category with merely lax finite products, are still restrictions of parallel
products of identity proarrows.
Proposition8.5 (Restrictingalongstructurearrowsbetweenproducts) .LetDbe a double category
with lax products. Suppose given a niche in Fam∗(D)
(I,x) (J,y)
(K,w) (L,z)(B,n)p(f0,f) (g0,g)
32such that each constituent niche in D
xf0(k)yg0(ℓ)
wk zℓfkgℓ
nbp, (kb∝⇕⊣√∫⊔≀→ℓ) : (KB∝⇕⊣√∫⊔≀→L),
has a restriction. Then there is a restriction cell of the form
Πx Πy
Πw ΠzΠnpΠ(f0,f) Π(g0,g)Π(n(f,g))p
res . (8.2)
Here the domain of the restriction cell is the product of the proarrow family (B,n(f,g)), indexed by
the spanIf0←−K←B→Lg0−→Jand comprising the restricted proarrows nb(fk,gℓ) :xf0(k)∝⇕⊣√∫⊔≀→yg0(ℓ)
for each element b:k∝⇕⊣√∫⊔≀→ℓ.
Proof.By the dual of Proposition 3.6, the family of restriction cells
(I,x) (J,y)
(K,w) (L,z)(B,n)p(f0,f) (g0,g)(B,n(f,g))p
(1B,res)
is itself a restriction cell in Fam∗(D). We define the required cell (8.2) to be the product of this
family of restrictions. We must show that the product is itself a restriction.
Now,ifthe double category Dwere an equipment, then Fam∗(D)would also be an equipment
by the dual of Corollary 3.7. The result would then follow immediately since the product oper-
ation Π :Fam∗(D)→D, like any lax functor between equipments, preserves restrictions [Shu08,
Proposition 6.4]. However, we are notassuming that Dis an equipment, and the cited proof does
not go through when that assumption is dropped. We instead present a more specialized analysis
that uses the universal properties of both products and restrictions.
We must show that any cell αof the form on the left
xy
Πx Πy
Πw ΠzΠ(f0,f)qmp
ΠnpΠ(g0,g)r
α =xy
Πx Πy
Πw ΠzΠ(f0,f)q rmp
ΠnpΠ(g0,g)Πn(f,g)p
res∃! ¯α
(8.3)
has a unique factorization through the claimed restriction cell as on the right. Decomposing the
arrowsq=⟨qi⟩i∈Iandr=⟨rj⟩j∈Jinto pairings, the given cell αis the pairing of the cells
x y
xf0(k)yg0(ℓ)
wkzℓqf0(k)mp
rg0(ℓ)
fkgℓ
nbpαb :=xy
Πw Πz
wkzℓmp
Πnp
πk πℓ
nbpα
πb, (kb∝⇕⊣√∫⊔≀→ℓ) : (KB∝⇕⊣√∫⊔≀→L),
33with respect to the product Πn: Πw∝⇕⊣√∫⊔≀→Πz. For each b:k∝⇕⊣√∫⊔≀→ℓ, the universal property of the
restrictionnb(fk,gℓ)then gives a unique factorization
x y
xf0(k)yg0(ℓ)
wkzℓqf0(k)mp
rg0(ℓ)
fkgℓ
nbpαb =x y
xf0(k)yg0(ℓ)
wk zℓqf0(k)mp
rg0(ℓ)
fkgℓ
nbpnb(fk,gℓ)p
resb∃! ¯αb
.
Finally, we define the needed cell ¯αto be the pairing of the cells ¯αbwith respect to the product
Π(n(f,g)) : Πx∝⇕⊣√∫⊔≀→Πy, i.e., the unique solution to the equations
x y
Πx Πy
xf0(k)yg0(ℓ)q rmp
Πn(f,g)p
πf0(k) πg0(ℓ)
nb(fk,gℓ)p¯α
πb=x y
xf0(k)yg0(ℓ)qf0(k)mp
rg0(ℓ)
nb(fk,gℓ)p¯αb , (kb∝⇕⊣√∫⊔≀→ℓ) : (KB∝⇕⊣√∫⊔≀→L).
By the above relations, as well as the side equation
Πx Πy
xf0(k)yg0(ℓ)
wk zℓfkgℓ
nbpnb(fk,gℓ)pπf0(k) πg0(ℓ)Πn(f,g)p
resbπb
=Πx Πy
Πw Πz
wkzℓnbpΠn(f,g)p
Π(f0,f) Π(g0,g)
Πnp
πk πℓres
πb
which is a consequence of the functorality of products, the post-composite of Equation (8.3) with
the projection πb: Πn→nbholds for every b:k∝⇕⊣√∫⊔≀→ℓ, hence Equation (8.3) holds by the univer-
sal property of the product Πn. This proves the existence part of the universal property of the
restriction. Uniqueness follows from the uniqueness in each step of the above construction.
We can go further to characterize products in a double category in terms of restrictions and
parallel products (Example 6.9). The preceding proposition gives one half of the proof.
Theorem 8.6 (Double products via restrictions) .A double category has lax (finite) products if
and only if it has
(i) lax (finite) parallel products, and
(ii) restrictions of parallel products along structure arrows between products.
Moreover, in this case, the products are iso-strong if and only if the parallel products are strong.
Proof.For the first part of the proof, let (A,m) : (I,x)∝⇕⊣√∫⊔≀→(J,y)be any family of proarrows in a
double category D, indexed by the span If0←−Ag0−→J.
Suppose that Dhas lax products. Trivially, for every a∈A, the proarrow ma:xf0(a)∝⇕⊣√∫⊔≀→yg0(a)
has a restriction along the identity arrows, namely itself. Therefore, by Proposition 8.5, the product
34Πm: Πx∝⇕⊣√∫⊔≀→Πyis the restriction of the parallel product Πm: Πf∗
0x→Πg∗
0yalong the structure
arrows Π(f0)andΠ(g0):
Πx Πy
Πf∗
0x Πg∗
0yΠ(f0) Π(g0)
ΠmpΠmp
res . (8.4)
Not only does this prove the forward implication, it shows that an arbitrary product admits a
canonical decomposition as the restriction of a parallel product along structure arrows.
Suppose Dis a double category with lax parallel products and restrictions of these along struc-
ture arrows. We show that, conversely, the proarrow Πm: Πx∝⇕⊣√∫⊔≀→Πynowdefinedto be the
restriction (8.4) is a product of the family (A,m) : (I,x)∝⇕⊣√∫⊔≀→(J,y)when it is equipped with the
projection cells
Πx Πy
xiyjΠmp
πi πj
mapπa :=Πx Πy
Πf∗
0x Πg∗
0y
xf0(a)yg0(a)Πmp
mapΠ(f0) Π(g0)
πa πaΠmpres
πa, (ia∝⇕⊣√∫⊔≀→j) : (IA∝⇕⊣√∫⊔≀→J).
To prove the universal property, suppose given a family of cellswz
xiyjnp
figj
mapαaindexed by elements
a:i∝⇕⊣√∫⊔≀→j. Abbreviating the families ha:=ff0(a)andka:=gg0(a), we have equations
Π(f0)◦⟨fi⟩i∈I=⟨ha⟩a∈Aand Π(g0)◦⟨gj⟩j∈J=⟨ka⟩a∈A.
We can therefore form the pairing with respect to the parallel product as on the left
w z
Πf∗
0x Πg∗
0yΠmp⟨ha⟩a∈A ⟨ka⟩a∈Anp
⟨αa⟩a∈A =w z
Πx Πy
Πf∗
0x Πg∗
0yΠmpnp
⟨fi⟩i∈I ⟨gj⟩j∈J
Πmp
Π(f0) Π(g0)∃!α
res.
and then factorize it through the restriction cell to obtain a unique cell αas on the right. By
construction, the cell αis a solution to the equations
wz
Πx Πy
xiyjnp
⟨fi⟩i∈I⟨gj⟩j∈J
Πmp
πi πj
mapα
πa=wz
xiyjnp
mapfigjαa, (ia∝⇕⊣√∫⊔≀→j) : (IA∝⇕⊣√∫⊔≀→J),
35andαistheuniquesolutionbytheuniquenesspropertyabove. Usingthedescriptionoflaxproducts
as universal arrows in Proposition 6.3, we conclude that Dhas lax products. This completes the
proof characterizing lax products.
To characterize iso-strong products, we need only prove the reverse implication. Suppose that
a double category Dhas strong parallel products and restrictions of these along structure arrows.
Then, by the foregoing, Dalready has lax products, and the products are normal by assumption,
so we just need to establish the iso-strong condition on composites (Definition 7.1).
First, notice that the general case of composing along bijective legs can be reduced to the
special case of composing along legs that are identities. Given indexing spans IℓA←−ArA−→Jand
JℓB←−ArB−→K, whererAandℓBare bijections as Definition 7.1, the maps of spans
IAJ
IJJℓArA
rA
ℓa◦r−1
AandJBK
JJKℓBrB
rB◦ℓ−1
BℓB
are isomorphisms. Thus, they induce isomorphisms in Fam∗(D)between families indexed by those
spans and, by the functorality of products, between products of such families. By the naturality
axiom for laxators, the composition comparisons for products indexed by the original spans are
invertible precisely when the comparisons for products indexed by the specials spans I←J=J
andJ=J→Kare invertible.
Soassumethatwehavefamiliesofproarrows (A,m) : (I,x)∝⇕⊣√∫⊔≀→(A,y)and(A,n) : (A,y)∝⇕⊣√∫⊔≀→(J,z)
indexed by spans If0←−A=AandA=Ag0−→J, wheref0andg0are arbitrary functions. We can
express the restrictions giving the products of these families as
Πx Πf∗
0x Πy
Πf∗
0x Πf∗
0x ΠyΠ(f0)Π(f0)!p
pΠmpΠmp
res 1 andΠy Πg∗
0z Πz
Πy Πg∗
0z Πg∗
0zΠnp
Πnp pΠ(g0)∗
p
Π(g0) 1 res ,
using Corollary 8.4 and the formula for general restrictions in terms of companions and conjoints
[Shu08, Equation 4.7]. But, by the same formula, the composite cell
Πx Πf∗
0x Πy Πg∗
0z Πz
Πf∗
0x Πf∗
0x Πy Πg∗
0z Πg∗
0zΠ(f0)Π(f0)!p
pΠmpΠmp
ΠnpΠmp
1
pΠ(g0)Π(g0)∗
p
res res
is a restriction of the composite of parallel products Πm⊙Πn∼=Π(m⊙n) : Πf∗
0x∝⇕⊣√∫⊔≀→Πg∗
0z. This
completes the proof of the iso-strong condition and the theorem.
Corollary 8.7. Any precartesian equipment has lax finite products, and any cartesian equipment
has iso-strong finite products.
Since the double categories of spans in a finitely complete category, and of matrices valued in
a distributive category, are known to be cartesian equipments, we obtain independent proofs of
Propositions 7.3 and 7.5. Nevertheless, the proofs in Sections 6 and 7 are useful in giving unbiased
36formulas for products in these double categories. On the other hand, we have not directly shown
that double categories of relations or of profunctors have iso-strong finite products. That follows
from the corollary since these double categories are known to be cartesian equipments.
We emphasize the converse to the corollary is not true: a double category with products, even
strong ones, need not be an equipment. Here is a simple counterexample. Let Dbe the strict double
category freely generated by a nontrival arrow f:x→y. Thenfdoes not have a companion since
Ddoes not even have a proarrow x∝⇕⊣√∫⊔≀→y. Now the double category Fam∗(D)has strong products,
being the free product completion of D(Theorem 5.4), yet the image of funder the embedding
∆ :D→Fam∗(D)still does not have a companion. Again, Fam∗(D)does not even have a proarrow
∆x∝⇕⊣√∫⊔≀→∆y. So the concepts of a cartesian equipment and a double category with finite products
do not coincide.
9 Lax functors between double categories with products
Though related to cartesian equipments, as we have just seen, double categories with finite products
turn out to be better behaved as domains of lax functors. A lax functor between equipments
preserves restrictions, while dually a colax functor between equipments preserves extensions [Shu08,
Proposition 6.4]. Only a pseudo double functor preserves the full range of operations available in
an equipment. Specifically, the axioms of a lax functor between equipments seem to only weakly
constrain the laxators for general composites of companions and conjoints. By contrast, although
a generic double category with iso-strong products has certain companions and conjoints, the
corresponding laxators are well controlled. The reason is that these special restrictions are actually
products, as shown in Section 8, and lax functors interact well with products, as we will show in
this section.
A lax functor Fcan be defined to preserve products when its opposite, the colax functor Fop,
preserves coproducts (Definition 5.2). Or, more directly:
Definition 9.1 (Preservation of double products) .LetDandEbe double categories with lax
products. A lax functor F:D→Epreserves products if the morphism of adjunctions
D Fam∗(D)
E Fam∗(E)∆⊣Πp
F Fam∗(F)
∆⊣Πp(1,Φ)
is strong.
To elaborate, the components of the natural transformation
Fam∗(D) D
Fam∗(E) EFΠD
Fam∗(F)
ΠEΦ
are, for each family of objects (I,x)inD, the usual canonical comparison Φx:FΠx→ΠFx
between products, and for each family of proarrows (A,m) : (I,x)∝⇕⊣√∫⊔≀→(J,y)inD, the canonical
37comparison Φm:FΠm→ΠFmthat is the unique solution to the equations
FΠxFΠy
ΠFx ΠFy
FxiFyjFΠmp
Φx Φy
ΠFmp
πi πj
FmapπaΦm
=FΠxFΠy
FxiFyjFΠmp
FmapFπi Fπj Fπa, (ia∝⇕⊣√∫⊔≀→j) : (IA∝⇕⊣√∫⊔≀→J).
A lax functor Fpreserves products just when the components ΦxandΦmare all isomorphisms.
Example 9.2 (Preserving products of spans) .Recalling Example 5.3, any pullback-preserving func-
torF:C→Dbetween categories with pullbacks induces a (pseudo) double functor
Span(F) :Span(C)→Span(D)
between double categories of spans. Suppose that Cand Dalso have products, i.e., are complete
categories, sothat Span(C)andSpan(D)haveiso-strongproducts. Then Span(F)preservesproducts
if and only if Fpreserves products, i.e., is a continuous functor.
LetF:D→Ebe any lax functor between double categories. To state the next lemma, we
need an explicit description of the comparisons for the lax functor Fam∗(F) :Fam∗(D)→Fam∗(E),
given by dual of Construction 5.1, that applies Felementwise to families. The laxator of Fam∗(F)
at a pair of proarrow families (I,x)(A,m)∝⇕⊣√∫⊔≀→(J,y)(B,n)∝⇕⊣√∫⊔≀→(K,z)inD, denotedFm,non the left
FxFyFz
Fx FzF(m⊙n)pFmpFnp
Fm,n↭FxiFyjFzk
Fxi FzkF(ma⊙nb)pFmapFnbp
Fma,nb,(ia∝⇕⊣√∫⊔≀→jb∝⇕⊣√∫⊔≀→k) : (IA∝⇕⊣√∫⊔≀→JB∝⇕⊣√∫⊔≀→K),
is the family of laxators of Fon the right. Similarly, the unitor of Fam∗(F)at an object family
(I,x)inD, denotedFxon the left
FxFx
FxFxidFxp
FidxpFx ↭FxiFxi
FxiFxiidFxip
FidxipFxi, i∈I,
is the family of unitors of Fon the right. With this notation, we state an important technical
lemma relating laxators and unitors of products to products of laxators and unitors.
Lemma 9.3 (Laxators and unitors for products) .LetF:D→Ebe a lax functor between double
categories with lax products. For any composable families of proarrows (I,x)(A,m)∝⇕⊣√∫⊔≀→(J,y)(B,n)∝⇕⊣√∫⊔≀→(K,z)
38inD, we have
FΠxFΠyFΠz
FΠx FΠz
FΠx FΠz
ΠFx ΠFzFΠmpFΠnp
F(Πm⊙Πn)p
FΠ(m⊙n)p
Φx Φz
ΠF(m⊙n)pFΠm,Πm
FΠm,n
Φm⊙n=FΠxFΠyFΠz
ΠFx ΠFy ΠFz
ΠFx ΠFz
ΠFx ΠFzFΠmpFΠnp
Φx Φy Φz
ΠFmpΠFnp
Π(Fm⊙Fn)p
ΠF(m⊙n)pΦm Φn
ΠFm,Fn
ΠFm,n. (9.1)
Similarly, for any family of objects (I,x)inD, we have
FΠxFΠx
FΠxFΠx
FΠxFΠx
ΠFx ΠFxidFΠxp
FidΠxp
FΠ idxp
Φx Φx
ΠFidxpFΠx
FΠx
Φidx=FΠxFΠx
ΠFx ΠFx
ΠFx ΠFx
ΠFx ΠFxidFΠxp
ΠFidxpΦx Φx
idΠFxp
Π idFxpidΦx
ΠFx
ΠFx. (9.2)
In particular, if Fpreserves products and the domain Dhas strong products, then the laxator
FΠm,Πnfor a composite of products is uniquely determined by the product of laxators ΠFm,nand
the unitorFΠxfor a product is uniquely determined by the product of unitors ΠFx.
Proof.The proof is a direct calculation, even if the notation is heavy. Beginning with the laxators,
choose elements ia∝⇕⊣√∫⊔≀→jb∝⇕⊣√∫⊔≀→kof the indexing spans. Then post-composing the left-hand side of
Equation (9.1) with the projection π(a,b)inEgives
FΠxFΠyFΠz
ΠFx ΠFz
Fxi FzkFΠmpFΠnp
ΠF(m⊙n)pΦx Φx
πi πk
F(ma⊙nb)pLHS
π(a,b)=FΠxFΠyFΠz
FΠx FΠz
FΠx FΠz
Fxi FzkFΠmpFΠnp
F(Πm⊙Πn)p
FΠ(m⊙n)p
Fπi Fπk
F(ma⊙nb)pFΠm,Πn
FΠm,n
Fπ(a,b)=FΠxFΠyFΠz
FΠx FΠz
Fxi FzkFΠmpFΠnp
F(Πm⊙Πn)p
F(ma⊙nb)pFπi FπkFΠm,Πn
F(πa⊙πb).
39Meanwhile, post-composing the right-hand side of Equation (9.1) with this projection gives
FΠxFΠyFΠz
ΠFx ΠFz
Fxi FzkFΠmpFΠnp
ΠF(m⊙n)pΦx Φx
πi πk
F(ma⊙nb)pRHS
π(a,b)=FΠxFΠyFΠz
ΠFx ΠFy ΠFz
ΠFx ΠFz
FxiFyjFzk
Fxi FzkFΠmpFΠnp
Φx Φy Φz
ΠFmpΠFnp
Π(Fm⊙Fn)p
FmapFnbp
F(ma⊙nb)pπi πkΦm Φn
ΠFm,Fn
Fma,nbπ(a,b)=FΠxFΠyFΠz
ΠFx ΠFy ΠFz
FxiFyjFzk
Fxi FzkFΠmpFΠnp
Φx Φy Φz
ΠFmpΠFnp
FmapFnbp
F(ma⊙nb)pπi πk πjΦm
Fma,nbπaΦn
πb
=FΠxFΠyFΠz
FxiFyjFzk
Fxi FzkFΠmpFΠnp
FmapFnbp
F(ma⊙nb)pFπi Fπj Fπk
Fma,nbFπaFπb
=FΠxFΠyFΠz
FΠx FΠz
Fxi FzkFΠmpFΠnp
F(Πm⊙Πn)p
F(ma⊙nb)pFπi FπkFΠm,Πn
F(πa⊙πb),
where the last equation is the naturality of the laxators of Fwith respect to the projection cells πa
andπbinD. Thus, post-composite of Equation (9.1) with the projection π(a,b)inEis true for any
choice of elements ia∝⇕⊣√∫⊔≀→jb∝⇕⊣√∫⊔≀→k. By the universal property of the product ΠF(m⊙n), Equation (9.1)
itself is true.
Turning to the unitors, fix an element i∈I. The post-composite of the left-hand side of
Equation (9.2) with the projection πiinEis
FΠxFΠx
ΠFx ΠFx
FxiFxiidFΠxp
ΠFidxpΦx Φx
Fidxipπi πiLHS
πi=FΠxFΠx
FΠxFΠx
FΠxFΠx
FxiFxiidFΠxp
FidΠxp
FΠ idxp
Fπi Fπi
FidxipFΠx
FΠx
Fπi=FΠxFΠx
FΠxFΠx
FxiFxiidFΠxp
FidΠxp
FidxipFπi FπiFΠx
Fidπi.
40On the other hand, the post-composite with the right-hand side of Equation (9.2) is
FΠxFΠx
ΠFx ΠFx
FxiFxiidFΠxp
ΠFidxpΦx Φx
Fidxipπi πiRHS
πi=FΠxFΠx
ΠFx ΠFx
ΠFx ΠFx
FxiFxi
FxiFxiidFΠxp
idFxipΦx Φx
idΠFxp
Π idFxp
πi πi
FidxipidΦx
ΠFx
Fxiπi=FΠxFΠx
ΠFx ΠFx
FxiFxi
FxiFxiidFΠxp
idFxipΦx Φx
idΠFxp
Fidxipπi πiidΦx
Fxiidπi=FΠxFΠx
FxiFxi
FxiFxiidFΠxp
idFxip
FidxipFπi Fπi
FxiidFπi
.
But these are equal by the naturality of the unitors of Fwith respect to the projection arrow
πi: Πx→xiinD. By the universal property of the product ΠFidx, Equation (9.2) holds.
An analogous lemma for lax functors between cartesian double categories has been used to
study models of cartesian double theories [LP23, Lemma 5.2]. We will use Lemma 9.3 for the same
purpose when we define finite-product double theories and their models in the next section.
10 Finite-product double theories
As an application of the tools developed so far, we extend the cartesian double theories recently
proposed by Lambert and Patterson [LP23] by allowing arbitrary finite products instead of only
finite parallel products as in a cartesian double category. Double theories with finite products have
greater expressivity, encompassing among other things an important class of enriched categories,
yet require minimal modifications to the machinery producing a virtual double category of models.
This development brings us full circle to Paré’s early work on products in double categories [Par09],
which was also motivated by double theories, albeit with different intended semantics and models.
Definition 10.1 (Finite-product double theories and models) .Afinite-product double theory
is a small, strict double category with strong finite products. A morphism of finite-product double
theories is a strict double functor that preserves finite products.
Amodelof a finite-product double theory Tin a double category Swith lax finite products is
a lax double functor M:T→Sthat preserves finite products. If left unstated, the semantics for
a model is assumed to be S=Span.
The name “finite-product double theory” is clearly intended to evoke the finite-product theories
familiar from categorical logic. Indeed, they categorify that concept. The differing strengths of
products in the syntax and the semantics is important. A typical semantics, such as spans or
matrices, will have at most iso-strong products, whereas the theory must have strong products in
order to fully control the comparison cells of its models, as shown by Lemma 9.3.
All of the cartesian double theories in [LP23] can be seen as finite-product double theories that
happen to use only finite parallel products. The examples presented here take advantage of the
extra flexibility afforded by arbitrary finite products. To avoid confusion with parallel products,
we write local products using conjunctive notation, so that m∧n:x∝⇕⊣√∫⊔≀→yis the local product
41of two proarrows m,n :x∝⇕⊣√∫⊔≀→ywith common source and target, and ⊤:=⊤x,y:x∝⇕⊣√∫⊔≀→yis the
local terminal between two objects x,y. The same notation is used in the literature on cartesian
bicategories [Car+08, §3.1].
Example 10.2 (Categories enriched in commutative monoids) .Thetheory of local commutative
monoids TlcMonis the finite-product double theory generated by a single object xand two globular
cells, thelocal multiplication andunit
xx
xxidx∧idxp
idxpµ andxx
xx⊤p
idxpη,
subject to the usual equations of associativity, unitality, and commutativity:
idx∧idx∧idx idx∧idx
idx∧idx idx1∧µµ∧1
µµ⊤∧idx idx∧idx idx∧⊤
idx∼=µη∧1 1∧η
∼=idx∧idx idx∧idx
idxσidx,idx
µ
µ.
We claim that a model of the theory of local commutative monoids, namely a finite-product-
preserving lax functor M:TlcMon→Span, is precisely a category enriched in commutative monoids.
First, thedata (Mx,M idx,Mx,x,Mx), comprisingtheimageof xandidx:x∝⇕⊣√∫⊔≀→xandcorresponding
laxator and unitor, is a category [LP23, §2], call it C. Moreover, Lemma 9.3 ensures that all of the
other laxators and unitors of Mare uniquely determined by products of Mx,xandMx. The images
ofµandηunderMare natural transformations [LP23, §2], conventionally written in additive
notation as
+ :C(a,b)2→C(a,b)and 0 : 1→C(a,b)
for each pair of objects a,b∈C. The three equational axioms on µandηsay that each hom-set of
Cis endowed with the structure of a commutative monoid. Finally, the naturality conditions say
that for all morphisms h:a′→aandk:b→b′inC, the diagrams
C(a,b)2C(a,b)
C(a′,b′)2C(a′,b′)C(h,k)2+
C(h,k)
+and1 C(a,b)
C(a′,b′)0
0C(h,k)
commute, that is, for all morphisms f,g:a→binC,
h·(f+g)·k= (h·f·k) + (h·g·k)andh·0a,b·k= 0a′,b′.
These equations are equivalent to the biadditivity that makes the category Cbe enriched in com-
mutative monoids.
Enriched categories are usually defined for a base of enrichment that is a monoidal category or
a multicategory. Perhaps surprisingly, the double theory in Example 10.2 makes no reference to
the monoidal category of commutative monoids under its tensor product or to the multicategory
of commutative monoids and multi-additive maps. Instead, the naturality requirements of a lax
functor automatically ensure that composition is biadditive. That models of double theories are
functorial and natural by construction is a key advantage compared with models of one-dimensional
theories such as finite-limit theories.
42The property of commutative monoids that makes Example 10.2 work is that the category of
commutative monoids is algebraic. Recall that an algebraic category is a category concretely
equivalent to the category of models of an algebraic theory, which we assume to be single-sorted;
see [ARV10, Chapter 11] or [Bor94, Vol. 2, Chapter 3]. In general, given an algebraic theory T, we
can construct a finite-product double theory whose models are categories enriched in models of T.
This includes the important example of categories enriched in abelian groups or, more generally,
enriched in R-modules over a commutative ring R.
Construction 10.3 (Categories enriched in an algebraic category) .LetTbe an algebraic theory
with generating object x. We define a finite-product double theory Tgenerated by a single object,
also denoted x, and by, for each morphism f:xm→xninT, a globular cell F(f) : id∧m
x→id∧n
x,
where id∧n
xdenotes the n-fold local product idx∧···∧ idx:x∝⇕⊣√∫⊔≀→xof the identity idx:x∝⇕⊣√∫⊔≀→xwith
itself. We impose relations making the assignment F:T→T(x,x)into a finite-product-preserving
functor from Tinto the hom-category T(x,x)of proarrows x∝⇕⊣√∫⊔≀→xand globular cells.
When the algebraic theory Tis commutative, its category of models, Mod T, has a symmetric
monoidal closed structure [Bor94, Vol. 2, Theorem 3.10.3]. Models of the finite-product double
theory Tare then equivalent to categories enriched over Mod T, similarly to Example 10.2. In fact,
as Borceux remarks, the hypothesis of commutativity is not actually needed to construct the tensor
product on Mod T, only to make it well behaved; nor, as we have already noted, is the tensor product
used at all in constructing the double theory.
The enrichment construction can be combined with other double theories from [LP23] to present
finite-product double theories whose models are, say, monoidal categories or multicategories en-
riched over an algebraic category. We leave these examples to the interested reader and turn to a
rather different use of finite products.
Since they have restrictions of products along structure arrows (Theorem 8.6), finite-product
double theories subsume some, though not all, of the intended applications of “restriction sketches,”
a provisional notion introduced in [LP23, Definition 6.17]. The next example reconstructs the
restriction sketch for cartesian multicategories as a finite-product double theory.
Example 10.4 (Cartesianandsymmetricmulticategories) .Thetheoryofpromonoids isthefinite-
product double theory generated by one object xand two proarrows, m:x2∝⇕⊣√∫⊔≀→xandj: 1∝⇕⊣√∫⊔≀→x,
subject to axioms of associativity and unitality,
x3x2
x2x(p×idx)p
pp
pp(idx×p)p and1×xx2x×1
xj×idxp
ppidx×jp
∼=p∼=p.
The axioms ensure that, for each arity n≥0, there is a unique proarrow pn:xn∝⇕⊣√∫⊔≀→xbuilt out
of the generators pandj. For example, p1= idxandp4= (p×p)⊙p. So far we have simply
recalled the cartesian double theory of promonoids [LP23, Theory 6.9] but we now regard it as a
finite-product double theory. Models of the theory are equivalent to multicategories.
LetFbe the skeleton of FinSetspanned by the sets [n]:={1,...,n}for eachn≥0. The
theory of cartesian promonoids is the finite-product double theory presented as the theory of
promonoids augmented with, for each function σ: [m]→[n]inF, a globular cell
xnxmx
xnxxσ
!ppmp
pnpρ(σ),
43called the action by σ, wherexσ:= Π(σ) :xn→xmis the structure arrow between products
induced by σandxσ
!= Π(σ)!:xn∝⇕⊣√∫⊔≀→xmis its companion (Corollary 8.4). The composite proarrow
pσ
m:=xσ
!⊙pmis thus the restriction of pmalong the arrows xσand1x. The action cells obey the
following relations.
•Functorality of action: for every pair of composable maps [m]σ− →[n]τ− →[q]inF, we have
xqxnxmx
xqxnx
xqxxσ
!ppmp
pnpxτ
!p
xτ
!p
pqpρ(σ) 1
ρ(τ)=xqxnxmx
xqxmx
xqxxσ·τ
!ppmp
pqppmpxσ
!pxτ
!p
1 ∼=
ρ(σ·τ),
and for every n≥0, the cellρ(1[n])is the canonical isomorphism x1[n]
!⊙pn∼=pn.
•Naturality of action (i): for all k≥0and mapsσi: [mi]→[ni],1≤i≤k, inF, we have
xnxkx
xnxkx
xnxpσ1m1×···×pσkmkppkp
pkppn1×···×pnkp
pnp1pk ρ(σ1)×···×ρ(σk)
1=xnxkx
xnx
xnxpnppσ1+···+σkmppkppσ1m1×···×pσkmkp
ρ(σ1+···+σk)∼=
,
where we put m:=m1+···+mkandn:=n1+···+nkand the isomorphism on the right-hand
side is built out of the canonical isomorphisms (Proposition 8.2)
xσ1
!×···×xσk
!∼=(xσ1×···×xσk)!∼=xσ1+···+σk
!.
•Naturality of action (ii): for every map σ: [k]→[ℓ]inFand allnj≥0,1≤j≤ℓ, we have
xnxℓx
xnxℓx
xnxpn1×···×pnℓp
pn1×···×pnℓppσ
kp
pℓp
pnp1 ρ(σ)
1=xnxℓx
xnx
xnxpσ≀(n1,...,nℓ)
mp
pnppn1×···×pnℓppσ
kp
ρ(σ≀(n1,...,nℓ))∼=
,
whereweput m:=nσ1+···+nσkandn:=n1+···+nℓ, andthemap σ≀(n1,...,nℓ) : [m]→[n]
appliesσblockwise and is the identity within each block of size nσi.
The isomorphism on the right-hand side uses a canonical isomorphism between products
obtained as follows. The family of proarrows pnj:xnj∝⇕⊣√∫⊔≀→x,1≤j≤ℓ, indexed by the identity
span id[ℓ], and the familyof identity proarrows idx, indexed by thespan σ∗= ([ℓ]σ← −[k] = [k]),
have as their composite the family pnσi:xnσi∝⇕⊣√∫⊔≀→x,1≤i≤k, also indexed by the span σ∗.
But the same is true for the family of identity proarrows idxnσi∼=idnσix,i≤1≤k, indexed
byσ∗, composed with the proarrow family pnσi:xnσi∝⇕⊣√∫⊔≀→x,1≤i≤k, indexed by the
44identity span id[k]. Since a finite-product double theory has strongfinite products, we obtain
a canonical isomorphism
(pn1×···×pnℓ)⊙xσ
!∼=xσ≀(n1,...,nℓ)
!⊙(pnσ1×···×pnσk),
which, by composing with the identity 1pkon the right, yields the isomorphism used in the
right-hand side.
A model of the theory of cartesian promonoids is equivalent to a cartesian multicategory. This
follows by reasoning similar to, but simpler than, that in [LP23, Proposition 6.21], with the ad
hoc argument controlling the model’s laxators for companions replaced by a simple appeal to
Lemma 9.3.
Thetheory of symmetric promonoids is defined in the same way except that the skeleton
ofFinSetis replaced by its core, the skeleton of the groupoid of finite sets and bijections. Models
of the theory of symmetric promonoids are equivalent to symmetric multicategories.
11 Higher morphisms and double categories of models
If models of finite-product double theories are product-preserving lax functors, then morphisms
between models, and cells between those, ought to be the higher morphisms between lax functors
that also preserve finite products. In this final section, we determine the sense in which lax natural
transformations and modules between lax functors, and modulations between squares of those,
should or already do preserve products. The definitions and lemmas are all more or less obvious,
following the pattern of Lemma 9.3 on lax functors and having counterparts for cartesian double
categories in previous work [LP23]. Nevertheless, it is important to state and prove these results, as
they ensure that the morphisms and cells between models of finite-product double theories behaved
as intended and recover the expected notions in examples of interest. We will conclude by showing
that these higher morphisms assemble into a unital virtual double category, and in particular a
2-category, of models of a finite-product double theory.
Natural transformations between product-preserving lax double functors require no extra as-
sumptions, just as ordinary natural transformations between product-preserving functors do not.
However, laxnatural transformations between double functors, introduced in [LP23, §7] to gen-
eralize lax natural transformations between 2-functors, need an extra axiom to make products be
strictly respected.
Definition 11.1 (Product-preserving lax transformation) .LetF,G :D→Ebe lax functors
between double categories with lax products. A lax natural transformation α:F⇒Gpreserves
products if it isstrictlynatural with respect to projections, meaning that for every family of
objects (I,x)inDand everyi∈I, the square
FΠxFxi
GΠxGxiαΠxFπi
αxi
Gπi
45of arrows in Ecommutes, and the naturality comparison for the projection πihas the form
FΠxFΠx
GΠxFxi
GxiGxiαΠx
GπiαxiFπi
GidxipidFΠxp
απi=FΠxFΠx
GΠxFxi
GxiGxi
GxiGxiαΠx
GπiαxiFπi
idGxipidFΠxp
Gidxipid
Gxi.
The next lemma generalizes [LP23, Lemma 7.11] on the naturality comparisons of a cartesian
lax natural transformation.
Lemma 11.2 (Naturality comparisons for products) .LetF,G :D→Ebe lax functors between
double categories with lax products, and let α:F⇒Gbe a product-preserving lax transformation.
Then for every arrow (f0,f) : (I,x)→(J,y)inFam∗(D), we have
FΠx FΠx
GΠx FΠy
GΠy GΠy
GΠy GΠy
ΠGy ΠGyidFΠxp
αΠx
GΠ(f0,f)FΠ(f0,f)
αΠy
GidΠyp
GΠ idyp
Ψy Ψy
ΠGidypαΠ(f0,f)
GΠy
Ψidy=FΠx FΠx
ΠFx ΠFx
ΠFx ΠFx
ΠGx ΠFy
ΠGy ΠGyidFΠxp
Φx Φx
idΠFxp
Π idFxp
Παx
Π(f0,Gf)Π(f0,Ff)
Παy
ΠGidypΠ(f0,αf)idΦx
ΠFx
, (11.1)
whereαfdenotes the family of naturality comparisons αfjfor the arrows fj:xf0(j)→yj,j∈J.
In particular, when Dhas normal lax products and Gpreserves products of identities, the natu-
rality comparison for the product arrow Π(f0,f) : Πx→Πyis uniquely determined by the product
Π(f0,αf)of naturality comparisons.
Proof.Fixing an element j∈J, the post-composite of the left-hand side of Equation (11.1) with
the projection πjinEis
FΠxFΠx
ΠGy ΠGy
GyjGyjidFΠxp
ΠGidyp
Gidyjpπj πjLHS
πj=FΠxFΠx
GΠyGΠy
GΠyGΠy
GyjGyjidFΠxp
GidΠyp
GΠ idyp
Gπj Gπj
GidyjpαΠ(f0,f)
GΠy
Gπj=FΠx FΠx
GΠx FΠy
GΠy GΠy
Gyj GyjidFΠxp
αΠx
GΠ(f0,f)FΠ(f0,f)
αΠy
GidΠyp
Gπj Gπj
GidyjpαΠ(f0,f)
Gidπj.
46Settingi:=f0(j)∈Iand using the equations
Πx Πy
xf0(j)yjΠ(f0,f)
πj
fjπi=πf0(j) andΠ idFx ΠGidy
idFxiGidyjΠ(f0,αf)
πj
αfjπi=πf0(j) (11.2)
inE0andE1, the post-composite of the right-hand side of Equation (11.1) with πjis
FΠxFΠx
ΠGy ΠGy
GyjGyjidFΠxp
ΠGidyp
Gidyjpπj πjRHS
πj=FΠxFΠx
ΠFx ΠFx
ΠFx ΠFx
FxiFxi
GyjGyjidFΠxp
Φx Φx
idΠFxp
Π idFxp
idFxip
Gidyjpπi πiidΦx
ΠFx
πi
αfj=FΠxFΠx
ΠFx ΠFx
FxiFxi
GyjGyjidFΠxp
Φx Φx
idΠFxp
idFxip
Gidyjpπi πiidΦx
αfjidπi=FΠxFΠx
FxiFxi
GxiFyj
GyjGyjidFΠxp
idFxip
GidyjpFπi Fπi
αxi
GfjFfj
αyjidFπi
αfj.
But, applying the functorality of the naturality comparisons to the first square in Equation (11.2)
and using the assumption that αis strictly natural with respect to projections, we also have
FΠx FΠx
GΠx FΠy
GΠy GΠy
Gyj GyjidFΠxp
αΠx
GΠ(f0,f)FΠ(f0,f)
αΠy
GidΠyp
Gπj Gπj
GidyjpαΠ(f0,f)
Gidπj=απj◦Π(f0,f)=αfj◦πi=FΠxFΠx
FxiFxi
GxiFyj
GyjGyjidFΠxp
idFxip
GidyjpFπi Fπi
αxi
GfjFfj
αyjidFπi
αfj.
We have proved that the post-composite of Equation (11.1) with any projection πjis true, hence
the equation itself is true by the universal property of the product.
We now turn to modules between lax double functors, introduced by Paré while developing the
Yoneda theory of double categories [Par11]. A module between lax functors F,G :D→Ecan be
succinctly defined as a lax functor M:D×I→E, where I:={0∝⇕⊣√∫⊔≀→1}is the walking proarrow,
such thatM(−,0) =FandM(−,1) =G. The definition is fully articulated in [Par11, §3.1] or
[LP23, Definition 9.1]. Since a module is a kind of lax functor, a product-preserving module can be
defined very similarly to a product-preserving lax functor (Definition 9.1), extending our previous
definition of a cartesian module [LP23, Definition 9.4].
Definition 11.3 (Product-preserving module) .LetF,G :D→Ebe lax functors between double
categories with lax products. A module M:F∝⇕⊣√∫⊔≀⇒Gpreserves products if, for every family of
47proarrows (A,m) : (I,x)∝⇕⊣√∫⊔≀→(J,y)inD, the canonical comparison cell
FΠxGΠy
ΠFx ΠGyMΠmp
Φx Ψy
ΠMmpMm,
defined by the equations
FΠxGΠy
ΠFx ΠGy
FxiGyjMΠmp
Φx Ψy
ΠMmp
πi πj
MmapMm
πa=FΠxGΠy
FxiGyjMΠmp
MmapFπi Gπj Mπa, (ia∝⇕⊣√∫⊔≀→j) : (IA∝⇕⊣√∫⊔≀→J), (11.3)
is an isomorphism in E1.
For a module M:F∝⇕⊣√∫⊔≀⇒Gbetween lax double functors to preserve products, it is clearly
necessary that the underlying functors F0,G0:D0→E0preserve products. One typically assumes
that the double functors F,G :D→Ein their entirety preserve products.
A square of compatible transformations and modules are bound together by a modulation , de-
fined for strict transformations in [Par11, §3.3] and for lax transformations in [LP23, Definition 9.7].
As a top-dimensional cell, modulations automatically preserve products.
Lemma 11.4 (Modulation components for products) .LetDandEbe double categories with lax
products, let F,G,H,K :D→Ebe lax functors, let α:F⇒Handβ:G⇒Kbe product-
preserving lax transformations, let M:F∝⇕⊣√∫⊔≀⇒GandN:H∝⇕⊣√∫⊔≀⇒Kbe modules, and finally let
FG
HKMp
α β
Npµ
be a modulation. Then, for any family of proarrows (A,m) : (I,x)∝⇕⊣√∫⊔≀→(J,y)inD, we have
FΠxGΠy
HΠxKΠy
ΠHx ΠKyαΠxMΠmp
βΠy
NΠmp
Hx
ΠNmpKyµΠm
Nm=FΠxGΠy
ΠFx ΠGy
ΠHx ΠKyMΠmp
Φx Ψy
ΠMmp
Παx Πβy
ΠNmpMm
Πµm, (11.4)
where (1A,µm)is the cell in Fam∗(E)with components
FxiGyj
HxiKyjMmap
αxi βyj
Nmapµma, (ia∝⇕⊣√∫⊔≀→j) : (IA∝⇕⊣√∫⊔≀→J).
48In particular, when the module N:H∝⇕⊣√∫⊔≀⇒Kpreserve products, the component of the modulation µ
at the product Πmis uniquely determined by the product of the components at mafor eacha∈A.
Proof.Fixing an element a:i∝⇕⊣√∫⊔≀→jof the indexing span, the naturality of the modulation µapplied
to the projection cell πa: Πm→mainDis the equation
FΠxGΠy
HΠxKΠy
HxiKyjαΠxMΠmp
βΠy
NΠmp
Hπi Kπj
NmapµΠm
Nπa=FΠxGΠy
FxiGyj
HxiKyjMΠmp
Fπi
αxi βyjGπj
Mmap
NmapMπa
µma,
where we have also used the assumption that the lax transformations αandβpreserve products.
But, by Equation (11.3), the equation above is also the post-composite of Equation (11.4) with the
projection cell πa: ΠNm→NmainE. So, by the universal property of the product ΠNm, the
claimed Equation (11.4) holds.
Since lax double functors are, in general, the objects of a merely virtual double category, we
must also consider the multi-input generalization of a modulation. Multimodulations were defined
for strict transformations in [Par11, §4.1] and for lax transformations in [LP23, Definition 10.1].
The following lemma on multimodulations is a straightforward generalization of Lemma 11.4 on
modulations. We include it not just for completeness but to emphasize the role by played by strong
products in the domain, irrelevant in the unary case.
Lemma 11.5 (Multimodulation components for products) .LetDandEbe double categories with
lax products and, for any k≥0, letF0,...,Fk,G, andHbe lax functors from DtoE. Suppose
given a multimodulation
F0···Fk
G HM1pMkp
α
Npβ µ ,
whereαandβare product-preserving lax natural transformations. Then, for any length- ksequence
of proarrow families (I0,x0)(A1,m1)∝⇕⊣√∫⊔≀→ ···(Ak,mk)∝⇕⊣√∫⊔≀→(Ik,xk)inD, we have
F0Πx0···FkΠxk
GΠx0 HΠxk
GΠx0 HΠxk
ΠGx0 ΠHxkM1Πm1p
αΠx0MkΠmkp
βΠxk
N(Πm1⊙···⊙ Πmk)p
ΠN(m1⊙···⊙mk)pNΠ(m1⊙···⊙mk)p
Ψx0HxkµΠm1,...,Πmk
NΠm1,...,mk
Nm1⊙···⊙mk=F0Πx0···FkΠxk
ΠF0x0··· ΠFkxk
ΠF0x0 ΠFkxk
ΠGx0 ΠHx0M1Πm1pMkΠmkp
(Φ0)x0
ΠM1m1p(Φk)xk
ΠMkmkp
ΠN(m1⊙···⊙mk)pΠ(M1m1⊙···⊙Mkmk)p
Παx0Πβxk(M1)m1(Mk)mk
Πµm1⊙···⊙mkΠM1m1,...,Mkmk.(11.5)
In particular, when the domain double category Dhas strong products and the module Npreserves
products, the component of the multimodulation µat the products Πm1,..., Πmkis uniquely deter-
mined by the product of the components at m1,a1,...,mk,akindexed byi0a0∝⇕⊣√∫⊔≀→···ak∝⇕⊣√∫⊔≀→ik.
49Proof.Fixing elements i0a0∝⇕⊣√∫⊔≀→···ak∝⇕⊣√∫⊔≀→ikof the indexing spans I0A0∝⇕⊣√∫⊔≀→···Ak∝⇕⊣√∫⊔≀→Ik, the naturality of the
multimodulation µat the projection cells πa1: Πm1→m1,a1throughπak: Πmk→mk,akinDis
the equation
F0Πx0···FkΠxk
GΠx0 HΠxk
Gx0,i0 Hxk,ikM1Πm1pMkΠmkp
N(m1,a1⊙···⊙mk,ak)pN(Πm1⊙···⊙ Πmk)pαΠx0βΠxk
Gπi0HπikµΠm1,...,Πmk
N(πa1⊙···⊙πak)=F0Πx0···FkΠxk
F0x0,i0···Fkxk,ik
Gx0,i0 Hxk,ikM1m1,a1pMkmk,akpF0πi0M1Πm1pMkΠmkp
Fkπik
αx0,i0
N(m1,a1⊙···⊙mk,ak)pβxk,akM1πa1Mkπak
µm1,a1,...,mk,ak.
But this equation is the post-composite of Equation (11.5) with the projection cell
π(a1,...,ak): ΠN(m1⊙···⊙mk)→N(m1,a1⊙···⊙mk,ak)
inE. By the universal property of the product, Equation (11.5) holds.
As anticipated, for fixed two double categories with lax products, the product-preserving lax
functors and higher morphisms between them assemble into a unital virtual double category. The
preceding lemmas are not needed to prove this, only to ensure that the construction is well behaved.
For the definitions of virtual double categories and units in them, see [CS10].
Theorem 11.6 (Virtual double category of product-preserving lax functors) .LetDandEbe
double categories with lax products. There is a virtual double category with units whose
•objects are product-preserving lax functors from DtoE,
•arrows are either (strict) natural transformations or product-preserving pseudo, lax, or oplax
natural transformations,
•proarrows are product-preserving modules, and
•multicells are multimodulations.
Proof.For fixed double categories DandE, there is a unital virtual double category of lax functors
D→E, natural transformations, modules, and multimodulations, for any choice of laxness in the
natural transformations. This result was stated for strict transformations in [Par11, Theorem 4.3]
and proved for pseudo or (op)lax transformations in [LP23, Theorem 10.3]. So we need only check
thattheproduct-preservingarrowsandproarrowsareclosedundertheoperationsofaunitalvirtual
double category. Product-preserving lax transformations are closed under composition, by pasting
the naturality squares for projections, and the identity lax transformation arises from the identity
strict transformation, so certainly preserves products. Finally, the identity module idFon a lax
functorFpreserves products if and only if Fdoes.
Corollary11.7 (Virtualdoublecategoryofmodels) .Every finite-product double theory has a unital
virtual double category of models, for any choice of strict, pseudo, or (op)lax maps of models.
For instance, the theory of local commutative monoids (Example 10.2) gives rise to the uni-
tal virtual double category of categories, functors, profunctors, and natural transformations, all
enriched in commutative monoids. In this case, the strict and lax maps of models coincide since
the only arrows in the theory are the structure arrows between products. The verification of these
claims uses the lemmas proved in this section. More generally, for any algebraic category V, Con-
struction 10.3 gives the unital virtual double category of V-categories,V-functors,V-profunctors,
andV-natural transformations.
50References
[Ale18] Evangelia Aleiferi. “Cartesian double categories with an emphasis on characterizing
spans”. PhD thesis. Dalhousie University, 2018. arXiv: 1809.06940 .
[AR20] Jiří Adámek and Jiří Rosick` y. “How nice are free completions of categories?” Topology
and its Applications 273 (2020), p. 106972. doi:10.1016/j.topol.2019.106972 .
[ARV10] Jiří Adámek, Jiří Rosický, and Enrico Vitale. Algebraic theories: a categorical intro-
duction to general algebra . Vol. 184. Cambridge Tracts in Mathematics. Cambridge
University Press, 2010. doi:10.1017/CBO9780511760754 .
[BC20] John C. Baez and Kenny Courser. “Structured cospans”. Theory and Applications of
Categories 35.48 (2020), pp. 1771–1822. arXiv: 1911.04630 .url:http://www.tac.
mta.ca/tac/volumes/35/48/35-48abs.html .
[Bor94] Francis Borceux. Handbook of categorical algebra . 3 volumes. Cambridge University
Press, 1994. doi:10.1017/CBO9780511525858 .
[Car+08] Aurelio Carboni, G. Max Kelly, Robert F.C. Walters, and Richard J. Wood. “Cartesian
bicategories II”. Theory and Applications of Categories 19.6 (2008), pp. 93–124. url:
http://www.tac.mta.ca/tac/volumes/19/6/19-06abs.html .
[CJ95] Aurelio Carboni and Peter Johnstone. “Connected limits, familial representability and
Artin glueing”. Mathematical Structures in Computer Science 5.4 (1995), pp. 441–459.
doi:10.1017/S0960129500001183 .
[CLW93] Aurelio Carboni, Stephen Lack, and Robert F.C. Walters. “Introduction to extensive
and distributive categories”. Journal of Pure and Applied Algebra 84.2 (1993), pp. 145–
158.doi:10.1016/0022-4049(93)90035-R .
[Cru+22] Geoffrey Cruttwell, Michael Lambert, Dorette Pronk, and Martin Szyld. “Double fi-
brations”. Theory and Applications of Categories 38.35 (2022), pp. 1326–1394. arXiv:
2205.15240 .url:http://www.tac.mta.ca/tac/volumes/38/35/38-35abs.html .
[CS10] G.S.H. Cruttwell and Michael A. Shulman. “A unified framework for generalized mul-
ticategories”. Theory and Applications of Categories 24.21 (2010), pp. 580–655. arXiv:
0907.2460 .url:http://www.tac.mta.ca/tac/volumes/24/21/24-21abs.html .
[CW87] Aurelio Carboni and Robert F.C. Walters. “Cartesian bicategories I”. Journal of Pure
and Applied Algebra 49.1-2 (1987), pp. 11–32. doi:10.1016/0022-4049(87)90121-6 .
[DPP10] Robert Dawson, Robert Paré, and Dorette Pronk. “The span construction”. Theory and
Applications of Categories 24.13 (2010), pp. 302–377. url:http://www.tac.mta.ca/
tac/volumes/24/13/24-13abs.html .
[FS07] José Luiz Fiadeiro and Vincent Schmitt. “Structured co-spans: an algebra of interaction
protocols”. International Conference on Algebra and Coalgebra in Computer Science
(CALCO 2007) . 2007, pp. 194–208. doi:10.1007/978-3-540-73859-6_14 .
[GP04] Marco Grandis and Robert Paré. “Adjoint for double categories”. Cahiers de topologie
et géométrie différentielle catégoriques 45.3 (2004), pp. 193–240.
[GP99] Marco Grandis and Robert Paré. “Limits in double categories”. Cahiers de topologie et
géométrie différentielle catégoriques 40.3 (1999), pp. 162–220.
[Gra19] Marco Grandis. Higher dimensional categories: From double to multiple categories .
World Scientific, 2019. doi:10.1142/11406 .
51[HT95] Hongde Hu and Walter Tholen. “Limits in free coproduct completions”. Journal of Pure
and Applied Algebra 105.3 (1995), pp. 277–291. doi:10.1016/0022-4049(94)00153-7 .
[Lam22] Michael Lambert. “Double categories of relations”. Theory and Applications of Cate-
gories38.33 (2022), pp. 1249–1283. arXiv: 2107.07621 .url:http://www.tac.mta.
ca/tac/volumes/38/33/38-33abs.html .
[LP23] Michael Lambert and Evan Patterson. “Cartesian double theories: A double-categorical
framework for categorical doctrines” (2023). arXiv: 2310.05384 .
[LS06] Stephen Lack and Paweł Sobociński. “Toposes are adhesive”. International Conference
on Graph Transformation . 2006, pp. 184–198. doi:10.1007/11841883_14 .
[Mac98] Saunders Mac Lane. Categories for the working mathematician . 2nd ed. Springer, 1998.
doi:10.1007/978-1-4757-4721-8 .
[Par09] Robert Paré. “Coherent theories as double Lawvere theories”. International Category
Theory Conference (CT 2009). Cape Town, June 2009. url:https://www.mathstat.
dal.ca/~pare/CapeTown2009.pdf .
[Par11] Robert Paré. “Yoneda theory for double categories”. Theory and Applications of Cat-
egories25.17 (2011), pp. 436–489. url:http://www.tac.mta.ca/tac/volumes/25/
17/25-17abs.html .
[Par90] Robert Paré. “Simply connected limits”. Canadian Journal of Mathematics 42.4 (1990),
pp. 731–746. doi:10.4153/CJM-1990-038-6 .
[Pat23] Evan Patterson. “Structured and decorated cospans from the viewpoint of double cat-
egory theory”. Proceedings of the Sixth International Conference on Applied Category
Theory (ACT 2023) . 2023. arXiv: 2304.00447 .
[PT20] George Peschke and Walter Tholen. “Diagrams, fibrations, and the decomposition of
colimits” (2020). arXiv: 2006.10890 .
[Shu08] Michael Shulman. “Framed bicategories and monoidal fibrations”. Theory and Applica-
tions of Categories 20.18 (2008), pp. 650–738. arXiv: 0706.1286 .url:http://www.
tac.mta.ca/tac/volumes/20/18/20-18abs.html .
[Shu10] MichaelShulman.“Constructingsymmetricmonoidalbicategories”(2010).arXiv: 1004.
0993.
52